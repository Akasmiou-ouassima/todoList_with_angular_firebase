"use strict";(self.webpackChunktodoList_with_angular_firebase=self.webpackChunktodoList_with_angular_firebase||[]).push([[179],{6304:(lt,De,P)=>{P.d(De,{Dh:()=>Oe,GT:()=>pe,cc:()=>Ae,hO:()=>Ve,on:()=>U,pX:()=>re,xv:()=>fe});var y=P(5879),X=P(120),k=P(2793);lt=P.hmd(lt);const J=["ngOnDestroy"],re=(Le,mt,ht,ne={})=>new Proxy(Le,{get:(ve,ee)=>ht.runOutsideAngular(()=>{var Te;if(Le[ee])return!(null===(Te=ne?.spy)||void 0===Te)&&Te.get&&ne.spy.get(ee,Le[ee]),Le[ee];if(J.indexOf(ee)>-1)return()=>{};const ke=mt.toPromise().then(Ge=>{const oe=Ge&&Ge[ee];return"function"==typeof oe?oe.bind(Ge):oe&&oe.then?oe.then(_t=>ht.run(()=>_t)):ht.run(()=>oe)});return new Proxy(()=>{},{get:(Ge,oe)=>ke[oe],apply:(Ge,oe,_t)=>ke.then(Ht=>{var Ar;const Jr=Ht&&Ht(..._t);return!(null===(Ar=ne?.spy)||void 0===Ar)&&Ar.apply&&ne.spy.apply(ee,_t,Jr),Jr})})})}),pe=(Le,mt)=>{mt.forEach(ht=>{Object.getOwnPropertyNames(ht.prototype||ht).forEach(ne=>{Object.defineProperty(Le.prototype,ne,Object.getOwnPropertyDescriptor(ht.prototype||ht,ne))})})};class ge{constructor(mt){return mt}}const Oe=new y.OlP("angularfire2.app.options"),fe=new y.OlP("angularfire2.app.name");function U(Le,mt,ht){const ve="object"==typeof ht&&ht||{};ve.name=ve.name||"string"==typeof ht&&ht||"[DEFAULT]";const Te=X.Z.apps.filter(ke=>ke&&ke.name===ve.name)[0]||mt.runOutsideAngular(()=>X.Z.initializeApp(Le,ve));try{JSON.stringify(Le)!==JSON.stringify(Te.options)&&H("error",`${Te.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(Te)}const H=(Le,...mt)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Le](...mt)},Y={provide:ge,useFactory:U,deps:[Oe,y.R0b,[new y.FiY,fe]]};let Ve=(()=>{class Le{constructor(ht){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",y.q4F.full,ht.toString())}static initializeApp(ht,ne){return{ngModule:Le,providers:[{provide:Oe,useValue:ht},{provide:fe,useValue:ne}]}}}return Le.\u0275fac=function(ht){return new(ht||Le)(y.LFG(y.Lbi))},Le.\u0275mod=y.oAB({type:Le}),Le.\u0275inj=y.cJS({providers:[Y]}),Le})();function Ae(Le,mt,ht,ne,ve){const[,ee,Te]=globalThis.\u0275AngularfireInstanceCache.find(ke=>ke[0]===Le)||[];if(ee)return function Ze(Le,mt){try{return Le.toString()===mt.toString()}catch{return Le===mt}}(ve,Te)||(ze("error",`${mt} was already initialized on the ${ht} Firebase App with different settings.${xe?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:ve,was:Te})),ee;{const ke=ne();return globalThis.\u0275AngularfireInstanceCache.push([Le,ke,ve]),ke}}const xe=!!lt.hot,ze=(Le,...mt)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Le](...mt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(lt,De,P)=>{P.d(De,{q4:()=>ci,iC:()=>Sa,HU:()=>Wh,vb:()=>ad,JM:()=>Os});var y=P(5879),X=P(4097),k=P(5861),J=P(534),re=P(9058),pe=P(4537),ge=P(7879);const Oe=(D,b)=>b.some(M=>D instanceof M);let fe,U;const Ve=new WeakMap,Ae=new WeakMap,Ze=new WeakMap,xe=new WeakMap,ze=new WeakMap;let ht={get(D,b,M){if(D instanceof IDBTransaction){if("done"===b)return Ae.get(D);if("objectStoreNames"===b)return D.objectStoreNames||Ze.get(D);if("store"===b)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Te(D[b])},set:(D,b,M)=>(D[b]=M,!0),has:(D,b)=>D instanceof IDBTransaction&&("done"===b||"store"===b)||b in D};function ee(D){return"function"==typeof D?function ve(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Y(){return U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...b){return D.apply(ke(this),b),Te(Ve.get(this))}:function(...b){return Te(D.apply(ke(this),b))}:function(b,...M){const O=D.call(ke(this),b,...M);return Ze.set(O,b.sort?b.sort():[b]),Te(O)}}(D):(D instanceof IDBTransaction&&function mt(D){if(Ae.has(D))return;const b=new Promise((M,O)=>{const z=()=>{D.removeEventListener("complete",W),D.removeEventListener("error",he),D.removeEventListener("abort",he)},W=()=>{M(),z()},he=()=>{O(D.error||new DOMException("AbortError","AbortError")),z()};D.addEventListener("complete",W),D.addEventListener("error",he),D.addEventListener("abort",he)});Ae.set(D,b)}(D),Oe(D,function H(){return fe||(fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,ht):D)}function Te(D){if(D instanceof IDBRequest)return function Le(D){const b=new Promise((M,O)=>{const z=()=>{D.removeEventListener("success",W),D.removeEventListener("error",he)},W=()=>{M(Te(D.result)),z()},he=()=>{O(D.error),z()};D.addEventListener("success",W),D.addEventListener("error",he)});return b.then(M=>{M instanceof IDBCursor&&Ve.set(M,D)}).catch(()=>{}),ze.set(b,D),b}(D);if(xe.has(D))return xe.get(D);const b=ee(D);return b!==D&&(xe.set(D,b),ze.set(b,D)),b}const ke=D=>ze.get(D),_t=["get","getKey","getAll","getAllKeys","count"],Ht=["put","add","delete","clear"],Ar=new Map;function Jr(D,b){if(!(D instanceof IDBDatabase)||b in D||"string"!=typeof b)return;if(Ar.get(b))return Ar.get(b);const M=b.replace(/FromIndex$/,""),O=b!==M,z=Ht.includes(M);if(!(M in(O?IDBIndex:IDBObjectStore).prototype)||!z&&!_t.includes(M))return;const W=function(){var he=(0,k.Z)(function*(We,...je){const ct=this.transaction(We,z?"readwrite":"readonly");let Rt=ct.store;return O&&(Rt=Rt.index(je.shift())),(yield Promise.all([Rt[M](...je),z&&ct.done]))[0]});return function(je){return he.apply(this,arguments)}}();return Ar.set(b,W),W}!function ne(D){ht=D(ht)}(D=>({...D,get:(b,M,O)=>Jr(b,M)||D.get(b,M,O),has:(b,M)=>!!Jr(b,M)||D.has(b,M)}));const _s="@firebase/installations",Zn="0.6.4",ua=1e4,Es=`w:${Zn}`,ae="FIS_v2",de="https://firebaseinstallations.googleapis.com/v1",_e=36e5,tt=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function $n({projectId:D}){return`${de}/projects/${D}/installations`}function yt(D){return{token:D.token,requestStatus:2,expiresIn:Gr(D.expiresIn),creationTime:Date.now()}}function Xt(D,b){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,k.Z)(function*(D,b){const O=(yield b.json()).error;return tt.create("request-failed",{requestName:D,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function Tn({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Mr(D){return cn.apply(this,arguments)}function cn(){return(cn=(0,k.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function Gr(D){return Number(D.replace("s","000"))}function vi(){return(vi=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const O=$n(D),z=Tn(D),W=b.getImmediate({optional:!0});if(W){const ct=yield W.getHeartbeatsHeader();ct&&z.append("x-firebase-client",ct)}const We={method:"POST",headers:z,body:JSON.stringify({fid:M,authVersion:ae,appId:D.appId,sdkVersion:Es})},je=yield Mr(()=>fetch(O,We));if(je.ok){const ct=yield je.json();return{fid:ct.fid||M,registrationStatus:2,refreshToken:ct.refreshToken,authToken:yt(ct.authToken)}}throw yield Xt("Create Installation",je)})).apply(this,arguments)}function _i(D){return new Promise(b=>{setTimeout(b,D)})}const iu=/^[cdef][\w-]{21}$/,pt="";function zt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function Nt(D){return function qs(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return iu.test(M)?M:pt}catch{return pt}}function fn(D){return`${D.appName}!${D.appId}`}const Pn=new Map;function ei(D,b){const M=fn(D);su(M,b),function en(D,b){const M=function Gt(){return!ti&&"BroadcastChannel"in self&&(ti=new BroadcastChannel("[Firebase] FID Change"),ti.onmessage=D=>{su(D.data.key,D.data.fid)}),ti}();M&&M.postMessage({key:D,fid:b}),function ws(){0===Pn.size&&ti&&(ti.close(),ti=null)}()}(M,b)}function su(D,b){const M=Pn.get(D);if(M)for(const O of M)O(b)}let ti=null;const Eo="firebase-installations-database",wo=1,Si="firebase-installations-store";let Ws=null;function qi(){return Ws||(Ws=function Ge(D,b,{blocked:M,upgrade:O,blocking:z,terminated:W}={}){const he=indexedDB.open(D,b),We=Te(he);return O&&he.addEventListener("upgradeneeded",je=>{O(Te(he.result),je.oldVersion,je.newVersion,Te(he.transaction))}),M&&he.addEventListener("blocked",()=>M()),We.then(je=>{W&&je.addEventListener("close",()=>W()),z&&je.addEventListener("versionchange",()=>z())}).catch(()=>{}),We}(Eo,wo,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Si)}})),Ws}function hr(D,b){return fr.apply(this,arguments)}function fr(){return(fr=(0,k.Z)(function*(D,b){const M=fn(D),z=(yield qi()).transaction(Si,"readwrite"),W=z.objectStore(Si),he=yield W.get(M);return yield W.put(b,M),yield z.done,(!he||he.fid!==b.fid)&&ei(D,b.fid),b})).apply(this,arguments)}function ni(D){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,k.Z)(function*(D){const b=fn(D),O=(yield qi()).transaction(Si,"readwrite");yield O.objectStore(Si).delete(b),yield O.done})).apply(this,arguments)}function Ci(D,b){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,k.Z)(function*(D,b){const M=fn(D),z=(yield qi()).transaction(Si,"readwrite"),W=z.objectStore(Si),he=yield W.get(M),We=b(he);return void 0===We?yield W.delete(M):yield W.put(We,M),yield z.done,We&&(!he||he.fid!==We.fid)&&ei(D,We.fid),We})).apply(this,arguments)}function j(D){return V.apply(this,arguments)}function V(){return V=(0,k.Z)(function*(D){let b;const M=yield Ci(D.appConfig,O=>{const z=function q(D){return xt(D||{fid:zt(),registrationStatus:0})}(O),W=function we(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(tt.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},O=function se(D,b){return Xe.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:O}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Ct(D)}:{installationEntry:b}}(D,z);return b=W.registrationPromise,W.installationEntry});return M.fid===pt?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}}),V.apply(this,arguments)}function Xe(){return Xe=(0,k.Z)(function*(D,b){try{const M=yield function _o(D,b){return vi.apply(this,arguments)}(D,b);return hr(D.appConfig,M)}catch(M){throw $e(M)&&409===M.customData.serverCode?yield ni(D.appConfig):yield hr(D.appConfig,{fid:b.fid,registrationStatus:0}),M}}),Xe.apply(this,arguments)}function Ct(D){return It.apply(this,arguments)}function It(){return(It=(0,k.Z)(function*(D){let b=yield pr(D.appConfig);for(;1===b.registrationStatus;)yield _i(100),b=yield pr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:O}=yield j(D);return O||M}return b})).apply(this,arguments)}function pr(D){return Ci(D,b=>{if(!b)throw tt.create("installation-not-found");return xt(b)})}function xt(D){return function Un(D){return 1===D.registrationStatus&&D.registrationTime+ua<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function or(){return(or=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const O=function ns(D,{fid:b}){return`${$n(D)}/${b}/authTokens:generate`}(D,M),z=function xn(D,{refreshToken:b}){const M=Tn(D);return M.append("Authorization",function yi(D){return`${ae} ${D}`}(b)),M}(D,M),W=b.getImmediate({optional:!0});if(W){const ct=yield W.getHeartbeatsHeader();ct&&z.append("x-firebase-client",ct)}const We={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Es,appId:D.appId}})},je=yield Mr(()=>fetch(O,We));if(je.ok)return yt(yield je.json());throw yield Xt("Generate Auth Token",je)})).apply(this,arguments)}function Is(D){return ou.apply(this,arguments)}function ou(){return ou=(0,k.Z)(function*(D,b=!1){let M;const O=yield Ci(D.appConfig,W=>{if(!kt(W))throw tt.create("not-registered");const he=W.authToken;if(!b&&function Jt(D){return 2===D.requestStatus&&!function Qn(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+_e}(D)}(he))return W;if(1===he.requestStatus)return M=function ce(D,b){return te.apply(this,arguments)}(D,b),W;{if(!navigator.onLine)throw tt.create("app-offline");const We=function Xn(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}(W);return M=function st(D,b){return qe.apply(this,arguments)}(D,We),We}});return M?yield M:O.authToken}),ou.apply(this,arguments)}function te(){return(te=(0,k.Z)(function*(D,b){let M=yield Ne(D.appConfig);for(;1===M.authToken.requestStatus;)yield _i(100),M=yield Ne(D.appConfig);const O=M.authToken;return 0===O.requestStatus?Is(D,b):O})).apply(this,arguments)}function Ne(D){return Ci(D,b=>{if(!kt(b))throw tt.create("not-registered");return function Nr(D){return 1===D.requestStatus&&D.requestTime+ua<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function qe(){return qe=(0,k.Z)(function*(D,b){try{const M=yield function Kt(D,b){return or.apply(this,arguments)}(D,b),O=Object.assign(Object.assign({},b),{authToken:M});return yield hr(D.appConfig,O),M}catch(M){if(!$e(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const O=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield hr(D.appConfig,O)}else yield ni(D.appConfig);throw M}}),qe.apply(this,arguments)}function kt(D){return void 0!==D&&2===D.registrationStatus}function ca(){return(ca=(0,k.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:O}=yield j(b);return O?O.catch(console.error):Is(b).catch(console.error),M.fid})).apply(this,arguments)}function au(){return au=(0,k.Z)(function*(D,b=!1){const M=D;return yield function Rl(D){return Mi.apply(this,arguments)}(M),(yield Is(M,b)).token}),au.apply(this,arguments)}function Mi(){return(Mi=(0,k.Z)(function*(D){const{registrationPromise:b}=yield j(D);b&&(yield b)})).apply(this,arguments)}function la(D){return tt.create("missing-app-config-values",{valueName:D})}const xl="installations",Im=D=>{const b=D.getProvider("app").getImmediate(),M=function ri(D){if(!D||!D.options)throw la("App Configuration");if(!D.name)throw la("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw la(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,J._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Do=D=>{const b=D.getProvider("app").getImmediate(),M=(0,J._getProvider)(b,xl).getImmediate();return{getId:()=>function rs(D){return ca.apply(this,arguments)}(M),getToken:z=>function Ml(D){return au.apply(this,arguments)}(M,z)}};(function Ep(){(0,J._registerComponent)(new pe.wA(xl,Im,"PUBLIC")),(0,J._registerComponent)(new pe.wA("installations-internal",Do,"PRIVATE"))})(),(0,J.registerVersion)(_s,Zn),(0,J.registerVersion)(_s,Zn,"esm2017");const lu="@firebase/remote-config",$r=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Et{constructor(b,M,O,z){this.client=b,this.storage=M,this.storageCache=O,this.logger=z}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-M,z=O<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${z}.`),z}fetch(b){var M=this;return(0,k.Z)(function*(){const[O,z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(z&&M.isCachedDataFresh(b.cacheMaxAgeMillis,O))return z;b.eTag=z&&z.eTag;const W=yield M.client.fetch(b),he=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&he.push(M.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(he),W})()}}function Sn(D=navigator){return D.languages&&D.languages[0]||D.language}class Kr{constructor(b,M,O,z,W,he){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=O,this.projectId=z,this.apiKey=W,this.appId=he}fetch(b){var M=this;return(0,k.Z)(function*(){const[O,z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),he=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},je={sdk_version:M.sdkVersion,app_instance_id:O,app_instance_id_token:z,app_id:M.appId,language_code:Sn()},ct={method:"POST",headers:We,body:JSON.stringify(je)},Rt=fetch(he,ct),Pt=new Promise((Vr,mn)=>{b.signal.addEventListener(()=>{const ln=new Error("The operation was aborted.");ln.name="AbortError",mn(ln)})});let lr;try{yield Promise.race([Rt,Pt]),lr=yield Rt}catch(Vr){let mn="fetch-client-network";throw"AbortError"===Vr?.name&&(mn="fetch-timeout"),$r.create(mn,{originalErrorMessage:Vr?.message})}let tr=lr.status;const Ma=lr.headers.get("ETag")||void 0;let kn,ks;if(200===lr.status){let Vr;try{Vr=yield lr.json()}catch(mn){throw $r.create("fetch-client-parse",{originalErrorMessage:mn?.message})}kn=Vr.entries,ks=Vr.state}if("INSTANCE_STATE_UNSPECIFIED"===ks?tr=500:"NO_CHANGE"===ks?tr=304:("NO_TEMPLATE"===ks||"EMPTY_CONFIG"===ks)&&(kn={}),304!==tr&&200!==tr)throw $r.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:Ma,config:kn}})()}}class fu{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,k.Z)(function*(){const O=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,O)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:O}){var z=this;return(0,k.Z)(function*(){yield function To(D,b){return new Promise((M,O)=>{const z=Math.max(b-Date.now(),0),W=setTimeout(M,z);D.addEventListener(()=>{clearTimeout(W),O($r.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const W=yield z.client.fetch(b);return yield z.storage.deleteThrottleMetadata(),W}catch(W){if(!function xr(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(W))throw W;const he={throttleEndTimeMillis:Date.now()+(0,re.$s)(O),backoffCount:O+1};return yield z.storage.setThrottleMetadata(he),z.attemptFetch(b,he)}})()}}class ha{constructor(b,M,O,z,W){this.app=b,this._client=M,this._storageCache=O,this._storage=z,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Dt(D,b){const M=D.target.error||void 0;return $r.create(b,{originalErrorMessage:M&&M?.message})}const Pr="app_namespace_store";class Ll{constructor(b,M,O,z=function Cn(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=O=>{b(Dt(O,"storage-open"))},M.onsuccess=O=>{D(O.target.result)},M.onupgradeneeded=O=>{0===O.oldVersion&&O.target.result.createObjectStore(Pr,{keyPath:"compositeKey"})}}catch(M){b($r.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=b,this.appName=M,this.namespace=O,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,k.Z)(function*(){const O=yield M.openDbPromise;return new Promise((z,W)=>{const We=O.transaction([Pr],"readonly").objectStore(Pr),je=M.createCompositeKey(b);try{const ct=We.get(je);ct.onerror=Rt=>{W(Dt(Rt,"storage-get"))},ct.onsuccess=Rt=>{const Pt=Rt.target.result;z(Pt?Pt.value:void 0)}}catch(ct){W($r.create("storage-get",{originalErrorMessage:ct?.message}))}})})()}set(b,M){var O=this;return(0,k.Z)(function*(){const z=yield O.openDbPromise;return new Promise((W,he)=>{const je=z.transaction([Pr],"readwrite").objectStore(Pr),ct=O.createCompositeKey(b);try{const Rt=je.put({compositeKey:ct,value:M});Rt.onerror=Pt=>{he(Dt(Pt,"storage-set"))},Rt.onsuccess=()=>{W()}}catch(Rt){he($r.create("storage-set",{originalErrorMessage:Rt?.message}))}})})()}delete(b){var M=this;return(0,k.Z)(function*(){const O=yield M.openDbPromise;return new Promise((z,W)=>{const We=O.transaction([Pr],"readwrite").objectStore(Pr),je=M.createCompositeKey(b);try{const ct=We.delete(je);ct.onerror=Rt=>{W(Dt(Rt,"storage-delete"))},ct.onsuccess=()=>{z()}}catch(ct){W($r.create("storage-delete",{originalErrorMessage:ct?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class bo{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,k.Z)(function*(){const M=b.storage.getLastFetchStatus(),O=b.storage.getLastSuccessfulFetchTimestampMillis(),z=b.storage.getActiveConfig(),W=yield M;W&&(b.lastFetchStatus=W);const he=yield O;he&&(b.lastSuccessfulFetchTimestampMillis=he);const We=yield z;We&&(b.activeConfig=We)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Zs(){return xi.apply(this,arguments)}function xi(){return(xi=(0,k.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function gr(){(0,J._registerComponent)(new pe.wA("remote-config",function D(b,{instanceIdentifier:M}){const O=b.getProvider("app").getImmediate(),z=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $r.create("registration-window");if(!(0,re.hl)())throw $r.create("indexed-db-unavailable");const{projectId:W,apiKey:he,appId:We}=O.options;if(!W)throw $r.create("registration-project-id");if(!he)throw $r.create("registration-api-key");if(!We)throw $r.create("registration-app-id");const je=new Ll(We,O.name,M=M||"firebase"),ct=new bo(je),Rt=new ge.Yd(lu);Rt.logLevel=ge.in.ERROR;const Pt=new Kr(z,J.SDK_VERSION,M,W,he,We),lr=new fu(Pt,je),tr=new Et(lr,je,ct,Rt),Ma=new ha(O,tr,ct,je,Rt);return function qr(D){const b=(0,re.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ma),Ma},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(lu,"0.4.4"),(0,J.registerVersion)(lu,"0.4.4","esm2017")}();const pu=(D,b)=>b.some(M=>D instanceof M);let Ys,Bt;const pc=new WeakMap,mr=new WeakMap,So=new WeakMap,yr=new WeakMap,Qs=new WeakMap;let vr={get(D,b,M){if(D instanceof IDBTransaction){if("done"===b)return mr.get(D);if("objectStoreNames"===b)return D.objectStoreNames||So.get(D);if("store"===b)return M.objectStoreNames[1]?void 0:M.objectStore(M.objectStoreNames[0])}return Ei(D[b])},set:(D,b,M)=>(D[b]=M,!0),has:(D,b)=>D instanceof IDBTransaction&&("done"===b||"store"===b)||b in D};function Co(D){return"function"==typeof D?function gc(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fa(){return Bt||(Bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(D)?function(...b){return D.apply(ii(this),b),Ei(pc.get(this))}:function(...b){return Ei(D.apply(ii(this),b))}:function(b,...M){const O=D.call(ii(this),b,...M);return So.set(O,b.sort?b.sort():[b]),Ei(O)}}(D):(D instanceof IDBTransaction&&function Dp(D){if(mr.has(D))return;const b=new Promise((M,O)=>{const z=()=>{D.removeEventListener("complete",W),D.removeEventListener("error",he),D.removeEventListener("abort",he)},W=()=>{M(),z()},he=()=>{O(D.error||new DOMException("AbortError","AbortError")),z()};D.addEventListener("complete",W),D.addEventListener("error",he),D.addEventListener("abort",he)});mr.set(D,b)}(D),pu(D,function Dm(){return Ys||(Ys=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(D,vr):D)}function Ei(D){if(D instanceof IDBRequest)return function Or(D){const b=new Promise((M,O)=>{const z=()=>{D.removeEventListener("success",W),D.removeEventListener("error",he)},W=()=>{M(Ei(D.result)),z()},he=()=>{O(D.error),z()};D.addEventListener("success",W),D.addEventListener("error",he)});return b.then(M=>{M instanceof IDBCursor&&pc.set(M,D)}).catch(()=>{}),Qs.set(b,D),b}(D);if(yr.has(D))return yr.get(D);const b=Co(D);return b!==D&&(yr.set(D,b),Qs.set(b,D)),b}const ii=D=>Qs.get(D);function pa(D,b,{blocked:M,upgrade:O,blocking:z,terminated:W}={}){const he=indexedDB.open(D,b),We=Ei(he);return O&&he.addEventListener("upgradeneeded",je=>{O(Ei(he.result),je.oldVersion,je.newVersion,Ei(he.transaction))}),M&&he.addEventListener("blocked",()=>M()),We.then(je=>{W&&je.addEventListener("close",()=>W()),z&&je.addEventListener("versionchange",()=>z())}).catch(()=>{}),We}function ga(D,{blocked:b}={}){const M=indexedDB.deleteDatabase(D);return b&&M.addEventListener("blocked",()=>b()),Ei(M).then(()=>{})}const Fl=["get","getKey","getAll","getAllKeys","count"],Tm=["put","add","delete","clear"],mc=new Map;function Ul(D,b){if(!(D instanceof IDBDatabase)||b in D||"string"!=typeof b)return;if(mc.get(b))return mc.get(b);const M=b.replace(/FromIndex$/,""),O=b!==M,z=Tm.includes(M);if(!(M in(O?IDBIndex:IDBObjectStore).prototype)||!z&&!Fl.includes(M))return;const W=function(){var he=(0,k.Z)(function*(We,...je){const ct=this.transaction(We,z?"readwrite":"readonly");let Rt=ct.store;return O&&(Rt=Rt.index(je.shift())),(yield Promise.all([Rt[M](...je),z&&ct.done]))[0]});return function(je){return he.apply(this,arguments)}}();return mc.set(b,W),W}!function Hr(D){vr=D(vr)}(D=>({...D,get:(b,M,O)=>Ul(b,M)||D.get(b,M,O),has:(b,M)=>!!Ul(b,M)||D.has(b,M)}));const Eh="/firebase-messaging-sw.js",Vl="/firebase-cloud-messaging-push-scope",wh="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bm="https://fcmregistrations.googleapis.com/v1",An="google.c.a.c_id",Sm="google.c.a.c_l",Tp="google.c.a.ts";var Ih=function(D){return D.PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",D}(Ih||{});function Cs(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bl(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(M),z=new Uint8Array(O.length);for(let W=0;W<O.length;++W)z[W]=O.charCodeAt(W);return z}const ma="fcm_token_details_db",jl=5,gu="fcm_token_object_Store";function mu(){return mu=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(ma))return null;let b=null;return(yield pa(ma,jl,{upgrade:(O=(0,k.Z)(function*(z,W,he,We){var je;if(W<2||!z.objectStoreNames.contains(gu))return;const ct=We.objectStore(gu),Rt=yield ct.index("fcmSenderId").get(D);if(yield ct.clear(),Rt)if(2===W){const Pt=Rt;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;b={token:Pt.fcmToken,createTime:null!==(je=Pt.createTime)&&void 0!==je?je:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Cs(Pt.vapidKey)}}}else if(3===W){const Pt=Rt;b={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Cs(Pt.auth),p256dh:Cs(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Cs(Pt.vapidKey)}}}else if(4===W){const Pt=Rt;b={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Cs(Pt.auth),p256dh:Cs(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Cs(Pt.vapidKey)}}}}),function(W,he,We,je){return O.apply(this,arguments)})})).close(),yield ga(ma),yield ga("fcm_vapid_details_db"),yield ga("undefined"),function Ao(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}(b)?b:null;var O}),mu.apply(this,arguments)}const is="firebase-messaging-database",Dh=1,si="firebase-messaging-store";let ar=null;function Mo(){return ar||(ar=pa(is,Dh,{upgrade:(D,b)=>{0===b&&D.createObjectStore(si)}})),ar}function oi(D){return As.apply(this,arguments)}function As(){return As=(0,k.Z)(function*(D){const b=vu(D),O=yield(yield Mo()).transaction(si).objectStore(si).get(b);if(O)return O;{const z=yield function __(D){return mu.apply(this,arguments)}(D.appConfig.senderId);if(z)return yield $l(D,z),z}}),As.apply(this,arguments)}function $l(D,b){return yu.apply(this,arguments)}function yu(){return(yu=(0,k.Z)(function*(D,b){const M=vu(D),z=(yield Mo()).transaction(si,"readwrite");return yield z.objectStore(si).put(b,M),yield z.done,b})).apply(this,arguments)}function ya(){return(ya=(0,k.Z)(function*(D){const b=vu(D),O=(yield Mo()).transaction(si,"readwrite");yield O.objectStore(si).delete(b),yield O.done})).apply(this,arguments)}function vu({appConfig:D}){return D.appId}const ur=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zl(D,b){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,k.Z)(function*(D,b){const M=yield bh(D),O=Wl(b),z={method:"POST",headers:M,body:JSON.stringify(O)};let W;try{W=yield(yield fetch(Eu(D.appConfig),z)).json()}catch(he){throw ur.create("token-subscribe-failed",{errorInfo:he?.toString()})}if(W.error)throw ur.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw ur.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function _u(){return(_u=(0,k.Z)(function*(D,b){const M=yield bh(D),O=Wl(b.subscriptionOptions),z={method:"PATCH",headers:M,body:JSON.stringify(O)};let W;try{W=yield(yield fetch(`${Eu(D.appConfig)}/${b.token}`,z)).json()}catch(he){throw ur.create("token-update-failed",{errorInfo:he?.toString()})}if(W.error)throw ur.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw ur.create("token-update-no-token");return W.token})).apply(this,arguments)}function Ro(D,b){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,k.Z)(function*(D,b){const O={method:"DELETE",headers:yield bh(D)};try{const W=yield(yield fetch(`${Eu(D.appConfig)}/${b}`,O)).json();if(W.error)throw ur.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch(z){throw ur.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function Eu({projectId:D}){return`${bm}/projects/${D}/registrations`}function bh(D){return No.apply(this,arguments)}function No(){return(No=(0,k.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Wl({p256dh:D,auth:b,endpoint:M,vapidKey:O}){const z={web:{endpoint:M,auth:b,p256dh:D}};return O!==wh&&(z.web.applicationPubKey=O),z}const wu=6048e5;function Kl(){return Kl=(0,k.Z)(function*(D){const b=yield function Iu(D,b){return Zl.apply(this,arguments)}(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Cs(b.getKey("auth")),p256dh:Cs(b.getKey("p256dh"))},O=yield oi(D.firebaseDependencies);if(O){if(function Ch(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}(O.subscriptionOptions,M))return Date.now()>=O.createTime+wu?function Sp(D,b){return va.apply(this,arguments)}(D,{token:O.token,createTime:Date.now(),subscriptionOptions:M}):O.token;try{yield Ro(D.firebaseDependencies,O.token)}catch(z){console.warn(z)}return Am(D.firebaseDependencies,M)}return Am(D.firebaseDependencies,M)}),Kl.apply(this,arguments)}function yc(){return yc=(0,k.Z)(function*(D){const b=yield oi(D.firebaseDependencies);b&&(yield Ro(D.firebaseDependencies,b.token),yield function Th(D){return ya.apply(this,arguments)}(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),yc.apply(this,arguments)}function va(){return va=(0,k.Z)(function*(D,b){try{const M=yield function ql(D,b){return _u.apply(this,arguments)}(D.firebaseDependencies,b),O=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield $l(D.firebaseDependencies,O),M}catch(M){throw yield function Sh(D){return yc.apply(this,arguments)}(D),M}}),va.apply(this,arguments)}function Am(D,b){return _a.apply(this,arguments)}function _a(){return(_a=(0,k.Z)(function*(D,b){const O={token:yield zl(D,b),createTime:Date.now(),subscriptionOptions:b};return yield $l(D,O),O.token})).apply(this,arguments)}function Zl(){return(Zl=(0,k.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bl(b)})})).apply(this,arguments)}function vc(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Du(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const O=b.notification.body;O&&(D.notification.body=O);const z=b.notification.image;z&&(D.notification.image=z);const W=b.notification.icon;W&&(D.notification.icon=W)}(b,D),function Cp(D,b){b.data&&(D.data=b.data)}(b,D),function Yl(D,b){var M,O,z,W,he;if(!(b.fcmOptions||null!==(M=b.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const We=null!==(z=null===(O=b.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==z?z:null===(W=b.notification)||void 0===W?void 0:W.click_action;We&&(D.fcmOptions.link=We);const je=null===(he=b.fcmOptions)||void 0===he?void 0:he.analytics_label;je&&(D.fcmOptions.analyticsLabel=je)}(b,D),b}function Ql(D,b){const M=[];for(let O=0;O<D.length;O++)M.push(D.charAt(O)),O<b.length&&M.push(b.charAt(O));return M.join("")}function Xl(D){return ur.create("missing-app-config-values",{valueName:D})}Ql("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ql("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mp{constructor(b,M,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Ap(D){if(!D||!D.options)throw Xl("App Configuration Object");if(!D.name)throw Xl("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const O of b)if(!M[O])throw Xl(O);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:z,installations:M,analyticsProvider:O}}_delete(){return Promise.resolve()}}function Tu(){return(Tu=(0,k.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Eh,{scope:Vl}),D.swRegistration.update().catch(()=>{})}catch(b){throw ur.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function xo(){return(xo=(0,k.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield function _c(D){return Tu.apply(this,arguments)}(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw ur.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function Po(){return(Po=(0,k.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=wh)})).apply(this,arguments)}function bu(){return bu=(0,k.Z)(function*(D,b){if(!navigator)throw ur.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ur.create("permission-blocked");return yield function ss(D,b){return Po.apply(this,arguments)}(D,b?.vapidKey),yield function Rp(D,b){return xo.apply(this,arguments)}(D,b?.serviceWorkerRegistration),function Cm(D){return Kl.apply(this,arguments)}(D)}),bu.apply(this,arguments)}function Wi(){return(Wi=(0,k.Z)(function*(D,b,M){const O=function Mh(D){switch(D){case Ih.NOTIFICATION_CLICKED:return"notification_open";case Ih.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:M[An],message_name:M[Sm],message_time:M[Tp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function rn(){return rn=(0,k.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Ih.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(vc(M)):D.onMessageHandler.next(vc(M)));const O=M.data;(function Mm(D){return"object"==typeof D&&!!D&&An in D})(O)&&"1"===O["google.c.a.e"]&&(yield function Np(D,b,M){return Wi.apply(this,arguments)}(D,M.messageType,O))}),rn.apply(this,arguments)}const Js="@firebase/messaging",kr=D=>{const b=new Mp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Rh(D,b){return rn.apply(this,arguments)}(b,M)),b},xp=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:O=>function Ah(D,b){return bu.apply(this,arguments)}(b,O)}};function ko(){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,k.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Jl(){(0,J._registerComponent)(new pe.wA("messaging",kr,"PUBLIC")),(0,J._registerComponent)(new pe.wA("messaging-internal",xp,"PRIVATE")),(0,J.registerVersion)(Js,"0.12.4"),(0,J.registerVersion)(Js,"0.12.4","esm2017")}();const _n="analytics",Nm="firebase_id",Tt="origin",Nh=6e4,xh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wc="https://www.googletagmanager.com/gtag/js",_r=new ge.Yd("@firebase/analytics"),Fr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function os(D){if(!D.startsWith(wc)){const b=Fr.create("invalid-gtag-resource",{gtagURL:D});return _r.warn(b.message),""}return D}function Ic(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function be(){return(be=(0,k.Z)(function*(D,b,M,O,z,W){const he=O[z];try{if(he)yield b[he];else{const je=(yield Ic(M)).find(ct=>ct.measurementId===z);je&&(yield b[je.appId])}}catch(We){_r.error(We)}D("config",z,W)})).apply(this,arguments)}function Ki(){return(Ki=(0,k.Z)(function*(D,b,M,O,z){try{let W=[];if(z&&z.send_to){let he=z.send_to;Array.isArray(he)||(he=[he]);const We=yield Ic(M);for(const je of he){const ct=We.find(Pt=>Pt.measurementId===je),Rt=ct&&b[ct.appId];if(!Rt){W=[];break}W.push(Rt)}}0===W.length&&(W=Object.values(b)),yield Promise.all(W),D("event",O,z||{})}catch(W){_r.error(W)}})).apply(this,arguments)}const wa=30,nd=new class Lo{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Lp(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function rd(){return(rd=(0,k.Z)(function*(D){var b;const{appId:M,apiKey:O}=D,z={method:"GET",headers:Lp(O)},W=xh.replace("{app-id}",M),he=yield fetch(W,z);if(200!==he.status&&304!==he.status){let We="";try{const je=yield he.json();null!==(b=je.error)&&void 0!==b&&b.message&&(We=je.error.message)}catch{}throw Fr.create("config-fetch-failed",{httpStatus:he.status,responseMessage:We})}return he.json()})).apply(this,arguments)}function wi(){return(wi=(0,k.Z)(function*(D,b=nd,M){const{appId:O,apiKey:z,measurementId:W}=D.options;if(!O)throw Fr.create("no-app-id");if(!z){if(W)return{measurementId:W,appId:O};throw Fr.create("no-api-key")}const he=b.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new Lh;return setTimeout((0,k.Z)(function*(){We.abort()}),void 0!==M?M:Nh),Oh({appId:O,apiKey:z,measurementId:W},he,We,b)})).apply(this,arguments)}function Oh(D,b,M){return Fo.apply(this,arguments)}function Fo(){return Fo=(0,k.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},O,z=nd){var W;const{appId:he,measurementId:We}=D;try{yield function to(D,b){return new Promise((M,O)=>{const z=Math.max(b-Date.now(),0),W=setTimeout(M,z);D.addEventListener(()=>{clearTimeout(W),O(Fr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(O,b)}catch(je){if(We)return _r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:he,measurementId:We};throw je}try{const je=yield function E_(D){return rd.apply(this,arguments)}(D);return z.deleteThrottleMetadata(he),je}catch(je){const ct=je;if(!function kh(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ct)){if(z.deleteThrottleMetadata(he),We)return _r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${We} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:he,measurementId:We};throw je}const Rt=503===Number(null===(W=ct?.customData)||void 0===W?void 0:W.httpStatus)?(0,re.$s)(M,z.intervalMillis,wa):(0,re.$s)(M,z.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Rt,backoffCount:M+1};return z.setThrottleMetadata(he,Pt),_r.debug(`Calling attemptFetch again in ${Rt} millis`),Oh(D,Pt,O,z)}}),Fo.apply(this,arguments)}class Lh{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let Cc,Rs;function Ac(){return(Ac=(0,k.Z)(function*(D,b,M,O,z){if(z&&z.global)D("event",M,O);else{const W=yield b;D("event",M,Object.assign(Object.assign({},O),{send_to:W}))}})).apply(this,arguments)}function zn(){return(zn=(0,k.Z)(function*(){if(!(0,re.hl)())return _r.warn(Fr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return _r.warn(Fr.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function wr(){return wr=(0,k.Z)(function*(D,b,M,O,z,W,he){var We;const je=function ui(D){return wi.apply(this,arguments)}(D);je.then(tr=>{M[tr.measurementId]=tr.appId,D.options.measurementId&&tr.measurementId!==D.options.measurementId&&_r.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>_r.error(tr)),b.push(je);const ct=function cr(){return zn.apply(this,arguments)}().then(tr=>{if(tr)return O.getId()}),[Rt,Pt]=yield Promise.all([je,ct]);(function Sc(D){const b=window.document.getElementsByTagName("script");for(const M of Object.values(b))if(M.src&&M.src.includes(wc)&&M.src.includes(D))return M;return null})(W)||function Tc(D,b){const M=function Dc(D,b){let M;return window.trustedTypes&&(M=window.trustedTypes.createPolicy(D,b)),M}("firebase-js-sdk-policy",{createScriptURL:os}),O=document.createElement("script"),z=`${wc}?l=${D}&id=${b}`;O.src=M?M?.createScriptURL(z):z,O.async=!0,document.head.appendChild(O)}(W,Rt.measurementId),Rs&&(z("consent","default",Rs),function Rc(D){Rs=D}(void 0)),z("js",new Date);const lr=null!==(We=he?.config)&&void 0!==We?We:{};return lr[Tt]="firebase",lr.update=!0,null!=Pt&&(lr[Nm]=Pt),z("config",Rt.measurementId,lr),Cc&&(z("set",Cc),function no(D){Cc=D}(void 0)),Rt.measurementId}),wr.apply(this,arguments)}class Ns{constructor(b){this.app=b}_delete(){return delete St[this.app.options.appId],Promise.resolve()}}let St={},Bh=[];const Ia={};let er,xs,Su="dataLayer",Da=!1;function ro(D,b,M){!function as(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((O,z)=>`(${z+1}) ${O}`).join(" "),M=Fr.create("invalid-analytics-context",{errorInfo:b});_r.warn(M.message)}}();const O=D.options.appId;if(!O)throw Fr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Fr.create("no-api-key");_r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=St[O])throw Fr.create("already-exists",{id:O});if(!Da){!function xm(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Su);const{wrappedGtag:W,gtagCore:he}=function Er(D,b,M,O,z){let W=function(...he){window[O].push(arguments)};return window[z]&&"function"==typeof window[z]&&(W=window[z]),window[z]=function bc(D,b,M,O){function W(){return W=(0,k.Z)(function*(he,...We){try{if("event"===he){const[je,ct]=We;yield function Wt(D,b,M,O,z){return Ki.apply(this,arguments)}(D,b,M,je,ct)}else if("config"===he){const[je,ct]=We;yield function td(D,b,M,O,z,W){return be.apply(this,arguments)}(D,b,M,O,je,ct)}else if("consent"===he){const[je]=We;D("consent","update",je)}else if("get"===he){const[je,ct,Rt]=We;D("get",je,ct,Rt)}else if("set"===he){const[je]=We;D("set",je)}else D(he,...We)}catch(je){_r.error(je)}}),W.apply(this,arguments)}return function z(he){return W.apply(this,arguments)}}(W,D,b,M),{gtagCore:W,wrappedGtag:window[z]}}(St,Bh,Ia,Su,"gtag");xs=W,er=he,Da=!0}return St[O]=function hn(D,b,M,O,z,W,he){return wr.apply(this,arguments)}(D,Bh,Ia,b,er,Su,M),new Ns(D)}function id(){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,k.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Au="@firebase/analytics";!function Nc(){(0,J._registerComponent)(new pe.wA(_n,(b,{options:M})=>ro(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,J._registerComponent)(new pe.wA("analytics-internal",function D(b){try{const M=b.getProvider(_n).getImmediate();return{logEvent:(O,z,W)=>function zh(D,b,M,O){D=(0,re.m9)(D),function Pm(D,b,M,O,z){return Ac.apply(this,arguments)}(xs,St[D.app.options.appId],b,M,O).catch(z=>_r.error(z))}(M,O,z,W)}}catch(M){throw Fr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,J.registerVersion)(Au,"0.10.0"),(0,J.registerVersion)(Au,"0.10.0","esm2017")}();var Mn=P(1954),xc=P(2631);const Pc=new class sd extends xc.v{}(class us extends Mn.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(b,M,O):(b.flush(this),0)}});var Dr=P(6321),cs=P(9397),Bo=P(5137),ls=P(3093);const ci=new y.GfV("7.6.1"),jo="__angularfire_symbol__analyticsIsSupportedValue",so="__angularfire_symbol__analyticsIsSupported",Mu="__angularfire_symbol__remoteConfigIsSupportedValue",Ps="__angularfire_symbol__remoteConfigIsSupported",Ta="__angularfire_symbol__messagingIsSupportedValue",$o="__angularfire_symbol__messagingIsSupported";function Os(D,b,M){if(b){if(1===b.length)return b[0];const W=b.filter(he=>he.app===M);if(1===W.length)return W[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[so]||(globalThis[so]=id().then(D=>globalThis[jo]=D).catch(()=>globalThis[jo]=!1)),globalThis[$o]||(globalThis[$o]=ko().then(D=>globalThis[Ta]=D).catch(()=>globalThis[Ta]=!1)),globalThis[Ps]||(globalThis[Ps]=Zs().then(D=>globalThis[Mu]=D).catch(()=>globalThis[Mu]=!1));const ad=(D,b)=>{const M=b?[b]:(0,X.C6)(),O=[];return M.forEach(z=>{z.container.getProvider(D).instances.forEach(he=>{O.includes(he)||O.push(he)})}),O};function Zi(){}class xu{constructor(b,M=Pc){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,O){const z=this.zone;return this.delegate.schedule(function(he){z.runGuarded(()=>{b.apply(this,[he])})},M,O)}}class ba{constructor(b){this.zone=b,this.task=null}call(b,M){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zi,{},Zi,Zi)),M.pipe((0,cs.b)({next:O,complete:O,error:O})).subscribe(b).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wh=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new xu(Zone.current)),this.insideAngular=M.run(()=>new xu(Zone.current,Dr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(y.LFG(y.R0b))},D.\u0275prov=y.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function En(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Sa(D){return En(),function Pu(D){return function(M){return(M=M.lift(new ba(D.ngZone))).pipe((0,Bo.R)(D.outsideAngular),(0,ls.Q)(D.insideAngular))}}(En())(D)}},9058:(lt,De,P)=>{P.d(De,{$s:()=>ni,BH:()=>ee,G6:()=>Es,L:()=>fe,LL:()=>Ce,Pz:()=>ve,Sg:()=>Te,UG:()=>oe,US:()=>pe,ZB:()=>Y,ZR:()=>Ie,aH:()=>ne,b$:()=>Ar,eu:()=>de,hl:()=>ae,jU:()=>_t,m9:()=>Ai,ne:()=>fn,pd:()=>zt,r3:()=>cn,ru:()=>Ht,tV:()=>U,uI:()=>Ge,vZ:()=>vi,w1:()=>_s,xO:()=>iu,xb:()=>yi,z$:()=>ke,zI:()=>_e,zd:()=>pt});const J=function(j){const V=[];let q=0;for(let we=0;we<j.length;we++){let se=j.charCodeAt(we);se<128?V[q++]=se:se<2048?(V[q++]=se>>6|192,V[q++]=63&se|128):55296==(64512&se)&&we+1<j.length&&56320==(64512&j.charCodeAt(we+1))?(se=65536+((1023&se)<<10)+(1023&j.charCodeAt(++we)),V[q++]=se>>18|240,V[q++]=se>>12&63|128,V[q++]=se>>6&63|128,V[q++]=63&se|128):(V[q++]=se>>12|224,V[q++]=se>>6&63|128,V[q++]=63&se|128)}return V},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let se=0;se<j.length;se+=3){const Xe=j[se],Ct=se+1<j.length,It=Ct?j[se+1]:0,pr=se+2<j.length,xt=pr?j[se+2]:0;let or=(15&It)<<2|xt>>6,ns=63&xt;pr||(ns=64,Ct||(or=64)),we.push(q[Xe>>2],q[(3&Xe)<<4|It>>4],q[or],q[ns])}return we.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(J(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let q=0,we=0;for(;q<j.length;){const se=j[q++];if(se<128)V[we++]=String.fromCharCode(se);else if(se>191&&se<224){const Xe=j[q++];V[we++]=String.fromCharCode((31&se)<<6|63&Xe)}else if(se>239&&se<365){const pr=((7&se)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;V[we++]=String.fromCharCode(55296+(pr>>10)),V[we++]=String.fromCharCode(56320+(1023&pr))}else{const Xe=j[q++],Ct=j[q++];V[we++]=String.fromCharCode((15&se)<<12|(63&Xe)<<6|63&Ct)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const q=V?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let se=0;se<j.length;){const Xe=q[j.charAt(se++)],It=se<j.length?q[j.charAt(se)]:0;++se;const xt=se<j.length?q[j.charAt(se)]:64;++se;const Kt=se<j.length?q[j.charAt(se)]:64;if(++se,null==Xe||null==It||null==xt||null==Kt)throw new ge;we.push(Xe<<2|It>>4),64!==xt&&(we.push(It<<4&240|xt>>2),64!==Kt&&we.push(xt<<6&192|Kt))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fe=function(j){return function(j){const V=J(j);return pe.encodeByteArray(V,!0)}(j).replace(/\./g,"")},U=function(j){try{return pe.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function Y(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const q in V)!V.hasOwnProperty(q)||!Ve(q)||(j[q]=Y(j[q],V[q]));return j}function Ve(j){return"__proto__"!==j}const Le=()=>{try{return function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=j&&U(j[1]);return V&&JSON.parse(V)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ne=()=>{var j;return null===(j=Le())||void 0===j?void 0:j.config},ve=j=>{var V;return null===(V=Le())||void 0===V?void 0:V[`_${j}`]};class ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,q)=>{this.resolve=V,this.reject=q})}wrapCallback(V){return(q,we)=>{q?this.reject(q):this.resolve(we),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(q):V(q,we))}}}function Te(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=V||"demo-project",se=j.iat||0,Xe=j.sub||j.user_id;if(!Xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ct=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:se,exp:se+3600,auth_time:se,sub:Xe,user_id:Xe,firebase:{sign_in_provider:"custom",identities:{}}},j);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(Ct)),""].join(".")}function ke(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function oe(){var j;const V=null===(j=Le())||void 0===j?void 0:j.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _t(){return"object"==typeof self&&self.self===self}function Ht(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ar(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _s(){const j=ke();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Es(){return!oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ae(){try{return"object"==typeof indexedDB}catch{return!1}}function de(){return new Promise((j,V)=>{try{let q=!0;const we="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(we);se.onsuccess=()=>{se.result.close(),q||self.indexedDB.deleteDatabase(we),j(!0)},se.onupgradeneeded=()=>{q=!1},se.onerror=()=>{var Xe;V((null===(Xe=se.error)||void 0===Xe?void 0:Xe.message)||"")}}catch(q){V(q)}})}function _e(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ie extends Error{constructor(V,q,we){super(q),this.code=V,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}}class Ce{constructor(V,q,we){this.service=V,this.serviceName=q,this.errors=we}create(V,...q){const we=q[0]||{},se=`${this.service}/${V}`,Xe=this.errors[V],Ct=Xe?function tt(j,V){return j.replace($e,(q,we)=>{const se=V[we];return null!=se?String(se):`<${we}?>`})}(Xe,we):"Error";return new Ie(se,`${this.serviceName}: ${Ct} (${se}).`,we)}}const $e=/\{\$([^}]+)}/g;function cn(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function yi(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function vi(j,V){if(j===V)return!0;const q=Object.keys(j),we=Object.keys(V);for(const se of q){if(!we.includes(se))return!1;const Xe=j[se],Ct=V[se];if(_i(Xe)&&_i(Ct)){if(!vi(Xe,Ct))return!1}else if(Xe!==Ct)return!1}for(const se of we)if(!q.includes(se))return!1;return!0}function _i(j){return null!==j&&"object"==typeof j}function iu(j){const V=[];for(const[q,we]of Object.entries(j))Array.isArray(we)?we.forEach(se=>{V.push(encodeURIComponent(q)+"="+encodeURIComponent(se))}):V.push(encodeURIComponent(q)+"="+encodeURIComponent(we));return V.length?"&"+V.join("&"):""}function pt(j){const V={};return j.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[se,Xe]=we.split("=");V[decodeURIComponent(se)]=decodeURIComponent(Xe)}}),V}function zt(j){const V=j.indexOf("?");if(!V)return"";const q=j.indexOf("#",V);return j.substring(V,q>0?q:void 0)}function fn(j,V){const q=new Pn(j,V);return q.subscribe.bind(q)}class Pn{constructor(V,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{V(this)}).catch(we=>{this.error(we)})}next(V){this.forEachObserver(q=>{q.next(V)})}error(V){this.forEachObserver(q=>{q.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,q,we){let se;if(void 0===V&&void 0===q&&void 0===we)throw new Error("Missing Observer.");se=function on(j,V){if("object"!=typeof j||null===j)return!1;for(const q of V)if(q in j&&"function"==typeof j[q])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:q,complete:we},void 0===se.next&&(se.next=Rr),void 0===se.error&&(se.error=Rr),void 0===se.complete&&(se.complete=Rr);const Xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch{}}),this.observers.push(se),Xe}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,V)}sendOne(V,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{q(this.observers[V])}catch(we){typeof console<"u"&&console.error&&console.error(we)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rr(){}const Ws=1e3,qi=2,hr=144e5,fr=.5;function ni(j,V=Ws,q=qi){const we=V*Math.pow(q,j),se=Math.round(fr*we*(Math.random()-.5)*2);return Math.min(hr,we+se)}function Ai(j){return j&&j._delegate?j._delegate:j}},9104:(lt,De,P)=>{var y=P(5879);let X=null;function k(){return X}class re{}const pe=new y.OlP("DocumentToken");let ge=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(fe)},providedIn:"platform"}),e})();const Oe=new y.OlP("Location Initialized");let fe=(()=>{var n;class e extends ge{constructor(){super(),this._doc=(0,y.f3M)(pe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(r){const s=k().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",r,!1),()=>s.removeEventListener("popstate",r)}onHashChange(r){const s=k().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",r,!1),()=>s.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,s,u){this._history.pushState(r,s,u)}replaceState(r,s,u){this._history.replaceState(r,s,u)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),e})();function U(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function H(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Y(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{var n;class e{historyGo(r){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(Ze)},providedIn:"root"}),e})();const Ae=new y.OlP("appBaseHref");let Ze=(()=>{var n;class e extends Ve{constructor(r,s){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return U(this._baseHref,r)}path(r=!1){const s=this._platformLocation.pathname+Y(this._platformLocation.search),u=this._platformLocation.hash;return u&&r?`${s}${u}`:s}pushState(r,s,u,l){const p=this.prepareExternalUrl(u+Y(l));this._platformLocation.pushState(r,s,p)}replaceState(r,s,u,l){const p=this.prepareExternalUrl(u+Y(l));this._platformLocation.replaceState(r,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(ge),y.LFG(Ae,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),xe=(()=>{var n;class e extends Ve{constructor(r,s){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(r){const s=U(this._baseHref,r);return s.length>0?"#"+s:s}pushState(r,s,u,l){let p=this.prepareExternalUrl(u+Y(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(r,s,p)}replaceState(r,s,u,l){let p=this.prepareExternalUrl(u+Y(l));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(r,s,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(ge),y.LFG(Ae,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})(),ze=(()=>{var n;class e{constructor(r){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;const s=this._locationStrategy.getBaseHref();this._basePath=function ne(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(H(ht(s))),this._locationStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,s=""){return this.path()==this.normalize(r+Y(s))}normalize(r){return e.stripTrailingSlash(function mt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ht(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,s="",u=null){this._locationStrategy.pushState(u,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Y(s)),u)}replaceState(r,s="",u=null){this._locationStrategy.replaceState(u,"",r,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Y(s)),u)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)})),()=>{const s=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(s,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",s){this._urlChangeListeners.forEach(u=>u(r,s))}subscribe(r,s,u){return this._subject.subscribe({next:r,error:s,complete:u})}}return(n=e).normalizeQueryParams=Y,n.joinWithSlash=U,n.stripTrailingSlash=H,n.\u0275fac=function(r){return new(r||n)(y.LFG(Ve))},n.\u0275prov=y.Yz7({token:n,factory:function(){return function Le(){return new ze((0,y.LFG)(Ve))}()},providedIn:"root"}),e})();function ht(n){return n.replace(/\/index.html$/,"")}class Io{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let uu=(()=>{var n;class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,s,u){this._viewContainer=r,this._template=s,this._differs=u,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;!this._differ&&r&&(this._differ=this._differs.find(r).create(this.ngForTrackBy))}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const s=this._viewContainer;r.forEachOperation((u,l,p)=>{if(null==u.previousIndex)s.createEmbeddedView(this._template,new Io(u.item,this._ngForOf,-1,-1),null===p?void 0:p);else if(null==p)s.remove(null===l?void 0:l);else if(null!==l){const _=s.get(l);s.move(_,p),Nl(_,u)}});for(let u=0,l=s.length;u<l;u++){const _=s.get(u).context;_.index=u,_.count=l,_.ngForOf=this._ngForOf}r.forEachIdentityChange(u=>{Nl(s.get(u.currentIndex),u)})}static ngTemplateContextGuard(r,s){return!0}}return(n=e).\u0275fac=function(r){return new(r||n)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},n.\u0275dir=y.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function Nl(n,e){n.context.$implicit=e.item}let On=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),e})();function Ts(n){return"server"===n}let gr=(()=>{var n;class e{}return(n=e).\u0275prov=(0,y.Yz7)({token:n,providedIn:"root",factory:()=>new bs((0,y.LFG)(pe),window)}),e})();class bs{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ss(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Ch extends re{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class vc extends Ch{static makeCurrent(){!function J(n){X||(X=n)}(new vc)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Cp(){return Du=Du||document.querySelector("base"),Du?Du.getAttribute("href"):null}();return null==t?null:function Mm(n){Yl=Yl||document.createElement("a"),Yl.setAttribute("href",n);const e=Yl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Du=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function rs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Yl,Du=null,Ap=(()=>{var n;class e{build(){return new XMLHttpRequest}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();const Xl=new y.OlP("EventManagerPlugins");let Mp=(()=>{var n;class e{constructor(r,s){this._zone=s,this._eventNameToPlugin=new Map,r.forEach(u=>{u.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,s,u){return this._findPluginFor(s).addEventListener(r,s,u)}getZone(){return this._zone}_findPluginFor(r){let s=this._eventNameToPlugin.get(r);if(s)return s;if(s=this._plugins.find(l=>l.supports(r)),!s)throw new y.vHH(5101,!1);return this._eventNameToPlugin.set(r,s),s}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(Xl),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();class _c{constructor(e){this._doc=e}}const Tu="ng-app-id";let Rp=(()=>{var n;class e{constructor(r,s,u,l={}){this.doc=r,this.appId=s,this.nonce=u,this.platformId=l,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ts(l),this.resetHostNodes()}addStyles(r){for(const s of r)1===this.changeUsageCount(s,1)&&this.onStyleAdded(s)}removeStyles(r){for(const s of r)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){const r=this.styleNodesInDOM;r&&(r.forEach(s=>s.remove()),r.clear());for(const s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(const s of this.getAllStyles())this.addStyleToHost(r,s)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(const s of this.hostNodes)this.addStyleToHost(s,r)}onStyleRemoved(r){const s=this.styleRef;s.get(r)?.elements?.forEach(u=>u.remove()),s.delete(r)}collectServerRenderedStyles(){const r=this.doc.head?.querySelectorAll(`style[${Tu}="${this.appId}"]`);if(r?.length){const s=new Map;return r.forEach(u=>{null!=u.textContent&&s.set(u.textContent,u)}),s}return null}changeUsageCount(r,s){const u=this.styleRef;if(u.has(r)){const l=u.get(r);return l.usage+=s,l.usage}return u.set(r,{usage:s,elements:[]}),s}getStyleElement(r,s){const u=this.styleNodesInDOM,l=u?.get(s);if(l?.parentNode===r)return u.delete(s),l.removeAttribute(Tu),l;{const p=this.doc.createElement("style");return this.nonce&&p.setAttribute("nonce",this.nonce),p.textContent=s,this.platformIsServer&&p.setAttribute(Tu,this.appId),p}}addStyleToHost(r,s){const u=this.getStyleElement(r,s);r.appendChild(u);const l=this.styleRef,p=l.get(s)?.elements;p?p.push(u):l.set(s,{elements:[u],usage:1})}resetHostNodes(){const r=this.hostNodes;r.clear(),r.add(this.doc.head)}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(pe),y.LFG(y.AFp),y.LFG(y.Ojb,8),y.LFG(y.Lbi))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();const xo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ss=/%COMP%/g,Wi=new y.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function rn(n,e){return e.map(t=>t.replace(ss,n))}let Js=(()=>{var n;class e{constructor(r,s,u,l,p,_,I,S=null){this.eventManager=r,this.sharedStylesHost=s,this.appId=u,this.removeStylesOnCompDestroy=l,this.doc=p,this.platformId=_,this.ngZone=I,this.nonce=S,this.rendererByCompId=new Map,this.platformIsServer=Ts(_),this.defaultRenderer=new Oo(r,p,I,this.platformIsServer)}createRenderer(r,s){if(!r||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===y.ifc.ShadowDom&&(s={...s,encapsulation:y.ifc.Emulated});const u=this.getOrCreateRenderer(r,s);return u instanceof Pp?u.applyToHost(r):u instanceof Lr&&u.applyStyles(),u}getOrCreateRenderer(r,s){const u=this.rendererByCompId;let l=u.get(s.id);if(!l){const p=this.doc,_=this.ngZone,I=this.eventManager,S=this.sharedStylesHost,R=this.removeStylesOnCompDestroy,F=this.platformIsServer;switch(s.encapsulation){case y.ifc.Emulated:l=new Pp(I,S,s,this.appId,R,p,_,F);break;case y.ifc.ShadowDom:return new ko(I,S,r,s,p,_,this.nonce,F);default:l=new Lr(I,S,s,R,p,_,F)}u.set(s.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(Mp),y.LFG(Rp),y.LFG(y.AFp),y.LFG(Wi),y.LFG(pe),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(y.Ojb))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();class Oo{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(xo[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Jl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Jl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new y.vHH(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=xo[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=xo[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(y.JOm.DashCase|y.JOm.Important)?e.style.setProperty(t,r,s&y.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&y.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=k().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Jl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ko extends Oo{constructor(e,t,r,s,u,l,p,_){super(e,u,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const I=rn(s.id,s.styles);for(const S of I){const R=document.createElement("style");p&&R.setAttribute("nonce",p),R.textContent=S,this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Lr extends Oo{constructor(e,t,r,s,u,l,p,_){super(e,u,l,p),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=_?rn(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Pp extends Lr{constructor(e,t,r,s,u,l,p,_){const I=s+"-"+r.id;super(e,t,r,u,l,p,_,I),this.contentAttr=function Mh(n){return"_ngcontent-%COMP%".replace(ss,n)}(I),this.hostAttr=function Rh(n){return"_nghost-%COMP%".replace(ss,n)}(I)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ea=(()=>{var n;class e extends _c{constructor(r){super(r)}supports(r){return!0}addEventListener(r,s,u){return r.addEventListener(s,u,!1),()=>this.removeEventListener(r,s,u)}removeEventListener(r,s,u){return r.removeEventListener(s,u)}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(pe))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();const Op=["alt","control","meta","shift"],ai={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ed=(()=>{var n;class e extends _c{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,s,u){const l=e.parseEventName(s),p=e.eventCallback(l.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(r,l.domEventName,p))}static parseEventName(r){const s=r.toLowerCase().split("."),u=s.shift();if(0===s.length||"keydown"!==u&&"keyup"!==u)return null;const l=e._normalizeKey(s.pop());let p="",_=s.indexOf("code");if(_>-1&&(s.splice(_,1),p="code."),Op.forEach(S=>{const R=s.indexOf(S);R>-1&&(s.splice(R,1),p+=S+".")}),p+=l,0!=s.length||0===l.length)return null;const I={};return I.domEventName=u,I.fullKey=p,I}static matchEventFullKeyCode(r,s){let u=ai[r.key]||r.key,l="";return s.indexOf("code.")>-1&&(u=r.code,l="code."),!(null==u||!u)&&(u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),Op.forEach(p=>{p!==u&&(0,kp[p])(r)&&(l+=p+".")}),l+=u,l===s)}static eventCallback(r,s,u){return l=>{e.matchEventFullKeyCode(l,r)&&u.runGuarded(()=>s(l))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(pe))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();const _r=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:"browser"},{provide:y.g9A,useValue:function Tt(){vc.makeCurrent()},multi:!0},{provide:pe,useFactory:function xh(){return(0,y.RDi)(document),document},deps:[]}]),Ph=new y.OlP(""),Fr=[{provide:y.rWj,useClass:class Ql{addToWindow(e){y.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new y.vHH(5103,!1);return u},y.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(r=>{const s=y.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const p=function(_){l=l||_,u--,0==u&&r(l)};s.forEach(_=>{_.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],os=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Nh(){return new y.qLn},deps:[]},{provide:Xl,useClass:Ea,multi:!0,deps:[pe,y.R0b,y.Lbi]},{provide:Xl,useClass:ed,multi:!0,deps:[pe]},Js,Rp,Mp,{provide:y.FYo,useExisting:Js},{provide:class xi{},useClass:Ap,deps:[]},[]];let Ic=(()=>{var n;class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:y.AFp,useValue:r.appId}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(Ph,12))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[...os,...Fr],imports:[On,y.hGG]}),e})(),be=(()=>{var n;class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(pe))},n.\u0275prov=y.Yz7({token:n,factory:function(r){let s=null;return s=r?new r:function td(){return new be((0,y.LFG)(pe))}(),s},providedIn:"root"}),e})();typeof window<"u"&&window;var Uo=P(6321),Ms=P(5592),gn=P(2459),wt=P(2096),Vn=P(2793),Rs=P(7537),no=P(4564);function cr(...n){return function Rc(){return(0,Rs.J)(1)}()((0,gn.D)(n,(0,no.yG)(n)))}var zn=P(9360);function hn(...n){const e=(0,no.yG)(n);return(0,zn.e)((t,r)=>{(e?cr(n,t,e):cr(n,t)).subscribe(r)})}var wr=P(8251);function Ns(){return(0,zn.e)((n,e)=>{let t,r=!1;n.subscribe((0,wr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}var St=P(7398);function Ia(n,e){return(0,zn.e)(function Bh(n,e,t,r,s){return(u,l)=>{let p=t,_=e,I=0;u.subscribe((0,wr.x)(l,S=>{const R=I++;_=p?n(_,S,R):(p=!0,S),r&&l.next(_)},s&&(()=>{p&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}var Su=P(3997);function Ur(n,e){return(0,zn.e)((t,r)=>{let s=0;t.subscribe((0,wr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var He,er=P(6304),Da=(P(8977),P(3106)),me=P(5861),as=P(534),ro=P(4537),io=P(7879),Qt=P(9058),id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ir={},jh=jh||{},Mt=id||self;function Vo(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Cu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Hh="closure_uid_"+(1e9*Math.random()>>>0),zh=0;function Om(n,e,t){return n.call.apply(n.bind,arguments)}function Au(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Gn(n,e,t){return(Gn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Om:Au).apply(null,arguments)}function Nc(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mn(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),p=2;p<arguments.length;p++)l[p-2]=arguments[p];return e.prototype[s].apply(r,l)}}function us(){this.s=this.s,this.o=this.o}us.prototype.s=!1,us.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function $h(n){Object.prototype.hasOwnProperty.call(n,Hh)&&n[Hh]||(n[Hh]=++zh)}(this)},us.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Pc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Gh(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Vo(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Dr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Dr.prototype.h=function(){this.defaultPrevented=!0};var cs=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",()=>{},e),Mt.removeEventListener("test",()=>{},e)}catch{}return n}();function Bo(n){return/^[\s\xa0]*$/.test(n)}function ls(){var n=Mt.navigator;return n&&(n=n.userAgent)?n:""}function ci(n){return-1!=ls().indexOf(n)}function jo(n){return jo[" "](n),n}jo[" "]=function(){};var Nu,n,Mu=ci("Opera"),Ps=ci("Trident")||ci("MSIE"),Ta=ci("Edge"),$o=Ta||Ps,Ru=ci("Gecko")&&!(-1!=ls().toLowerCase().indexOf("webkit")&&!ci("Edge"))&&!(ci("Trident")||ci("MSIE"))&&!ci("Edge"),qh=-1!=ls().toLowerCase().indexOf("webkit")&&!ci("Edge");function od(){var n=Mt.document;return n?n.documentMode:void 0}e:{var Os="",ad=(n=ls(),Ru?/rv:([^\);]+)(\)|;)/.exec(n):Ta?/Edge\/([\d\.]+)/.exec(n):Ps?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):qh?/WebKit\/(\S+)/.exec(n):Mu?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ad&&(Os=ad?ad[1]:""),Ps){var Zi=od();if(null!=Zi&&Zi>parseFloat(Os)){Nu=String(Zi);break e}}Nu=Os}var Wh=Mt.document&&Ps&&(od()||parseInt(Nu,10))||void 0;function En(n,e){if(Dr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ru){e:{try{jo(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Oc[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&En.$.h.call(this)}}Mn(En,Dr);var Oc={2:"touch",3:"pen",4:"mouse"};En.prototype.h=function(){En.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pi="closure_listenable_"+(1e6*Math.random()|0),Kh=0;function km(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Kh,this.fa=this.ia=!1}function Sa(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Pu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Aa(n){const e={};for(const t in n)e[t]=n[t];return e}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<D.length;u++)t=D[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function M(n){this.src=n,this.g={},this.h=0}function O(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=sd(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Sa(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function z(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}M.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=z(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new km(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var W="closure_lm_"+(1e6*Math.random()|0),he={};function We(n,e,t,r,s){if(r&&r.once)return Rt(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)We(n,e[u],t,r,s);return null}return t=Vr(t),n&&n[Pi]?n.O(e,t,Cu(r)?!!r.capture:!!r,s):je(n,e,t,!1,r,s)}function je(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=Cu(s)?!!s.capture:!!s,p=kn(n);if(p||(n[W]=p=new M(n)),(t=p.add(e,t,r,l,u)).proxy)return t;if(r=function ct(){const e=Ma;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)cs||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(tr(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Rt(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Rt(n,e[u],t,r,s);return null}return t=Vr(t),n&&n[Pi]?n.P(e,t,Cu(r)?!!r.capture:!!r,s):je(n,e,t,!0,r,s)}function Pt(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Pt(n,e[u],t,r,s);else r=Cu(r)?!!r.capture:!!r,t=Vr(t),n&&n[Pi]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=z(u=n.g[e],t,r,s))&&(Sa(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=kn(n))&&(e=n.g[e.toString()],n=-1,e&&(n=z(e,t,r,s)),(t=-1<n?e[n]:null)&&lr(t))}function lr(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Pi])O(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(tr(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=kn(e))?(O(t,n),0==t.h&&(t.src=null,e[W]=null)):Sa(n)}}}function tr(n){return n in he?he[n]:he[n]="on"+n}function Ma(n,e){if(n.fa)n=!0;else{e=new En(e,this);var t=n.listener,r=n.la||n.src;n.ia&&lr(n),n=t.call(r,e)}return n}function kn(n){return(n=n[W])instanceof M?n:null}var ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vr(n){return"function"==typeof n?n:(n[ks]||(n[ks]=function(e){return n.handleEvent(e)}),n[ks])}function mn(){us.call(this),this.i=new M(this),this.S=this,this.J=null}function ln(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Dr(e,n);else if(e instanceof Dr)e.target=e.target||n;else{var s=e;b(e=new Dr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=Ls(l,r,!0,e)&&s}if(s=Ls(l=e.g=n,r,!0,e)&&s,s=Ls(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Ls(l=e.g=t[u],r,!1,e)&&s}function Ls(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var p=l.listener,_=l.la||l.src;l.ia&&O(n.i,l),s=!1!==p.call(_,r)&&s}}return s&&!r.defaultPrevented}Mn(mn,us),mn.prototype[Pi]=!0,mn.prototype.removeEventListener=function(n,e,t,r){Pt(this,n,e,t,r)},mn.prototype.N=function(){if(mn.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Sa(t[r]);delete n.g[e],n.h--}}this.J=null},mn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},mn.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Zh=Mt.JSON.stringify;function Ou(){var n=Um;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Yh=new class Up{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Fm,n=>n.reset());class Fm{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function w_(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Yi(n){Mt.setTimeout(()=>{throw n},0)}let ku,oo=!1,Um=new class Lm{constructor(){this.h=this.g=null}add(e,t){const r=Yh.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Vp=()=>{const n=Mt.Promise.resolve(void 0);ku=()=>{n.then(Vm)}};var Vm=()=>{for(var n;n=Ou();){try{n.h.call(n.g)}catch(t){Yi(t)}var e=Yh;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}oo=!1};function Qh(n,e){mn.call(this),this.h=n||1,this.g=e||Mt,this.j=Gn(this.qb,this),this.l=Date.now()}function Bm(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Ho(n,e,t){if("function"==typeof n)t&&(n=Gn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Mt.setTimeout(n,e||0)}function jm(n){n.g=Ho(()=>{n.g=null,n.i&&(n.i=!1,jm(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mn(Qh,mn),(He=Qh.prototype).ga=!1,He.T=null,He.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ln(this,"tick"),this.ga&&(Bm(this),this.start()))}},He.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},He.N=function(){Qh.$.N.call(this),Bm(this),delete this.g};class I_ extends us{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jm(this)}N(){super.N(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zo(n){us.call(this),this.h=n,this.g={}}Mn(zo,us);var ud=[];function Xh(n,e,t,r){Array.isArray(t)||(t&&(ud[0]=t.toString()),t=ud);for(var s=0;s<t.length;s++){var u=We(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function cd(n){Pu(n.g,function(e,t){this.g.hasOwnProperty(t)&&lr(e)},n),n.g={}}function Jh(){this.g=!0}function Lu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ef(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return Zh(t)}catch{return e}}(n,t)+(r?" "+r:"")})}zo.prototype.N=function(){zo.$.N.call(this),cd(this)},zo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jh.prototype.Ea=function(){this.g=!1},Jh.prototype.info=function(){};var Ra={},$m=null;function tf(){return $m=$m||new mn}function Fu(n){Dr.call(this,Ra.Ta,n)}function ao(n){const e=tf();ln(e,new Fu(e))}function nf(n,e){Dr.call(this,Ra.STAT_EVENT,n),this.stat=e}function Oi(n){const e=tf();ln(e,new nf(e,n))}function Bp(n,e){Dr.call(this,Ra.Ua,n),this.size=e}function Uu(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},e)}Ra.Ta="serverreachability",Mn(Fu,Dr),Ra.STAT_EVENT="statevent",Mn(nf,Dr),Ra.Ua="timingevent",Mn(Bp,Dr);var dd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Hm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jp(){}function fd(){}jp.prototype.h=null;var zm,Lc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $p(){Dr.call(this,"d")}function pd(){Dr.call(this,"c")}function gd(){}function rf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new zo(this),this.P=md,this.V=new Qh(n=$o?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Gm}function Gm(){this.i=null,this.g="",this.h=!1}Mn($p,Dr),Mn(pd,Dr),Mn(gd,jp),gd.prototype.g=function(){return new XMLHttpRequest},gd.prototype.i=function(){return{}},zm=new gd;var md=45e3,yd={},sf={};function qm(n,e,t){n.L=1,n.v=_d(fs(e)),n.s=t,n.S=!0,af(n,null)}function af(n,e){n.G=Date.now(),Fc(n),n.A=fs(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Oa(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Gm,n.g=aI(n.l,t?e:null,!n.s),0<n.O&&(n.M=new I_(Gn(n.Pa,n,n.g),n.O)),Xh(n.U,n.g,"readystatechange",n.nb),e=n.I?Aa(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),ao(),function kc(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",p=u.split("&"),_=0;_<p.length;_++){var I=p[_].split("=");if(1<I.length){var S=I[0];I=I[1];var R=S.split("_");l=2<=R.length&&"type"==R[1]?l+(S+"=")+I+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function T_(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function b_(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=S_(n,t),s==sf){4==e&&(n.o=4,Oi(14),r=!1),Lu(n.j,n.m,null,"[Incomplete Response]");break}if(s==yd){n.o=4,Oi(15),Lu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Lu(n.j,n.m,s,null),uf(n,s)}T_(n)&&s!=sf&&s!=yd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Oi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),gf(e),e.M=!0,Oi(11))):(Lu(n.j,n.m,t,"[Invalid Chunked Response]"),ds(n),Na(n))}function S_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?sf:(t=Number(e.substring(t,r)),isNaN(t)?yd:(r+=1)+t>e.length?sf:(e=e.slice(r,r+t),n.C=r+t,e))}function Fc(n){n.Y=Date.now()+n.P,Hp(n,n.P)}function Hp(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Uu(Gn(n.lb,n),e)}function vd(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function Na(n){0==n.l.H||n.J||sy(n.l,n)}function ds(n){vd(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Bm(n.V),cd(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function uf(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||E(t.i,n)))if(!n.K&&E(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Yp(t),ny(t)}iy(t),Oi(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Uu(Gn(t.ib,t),6e3));if(1>=g(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Vc(t,11)}else if((n.K||t.g==n)&&Yp(t),!Bo(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.V=I[0],I=I[1],2==t.H)if("c"==I[0]){t.K=I[1],t.pa=I[2];const S=I[3];null!=S&&(t.ra=S,t.l.info("VER="+t.ra));const R=I[4];null!=R&&(t.Ga=R,t.l.info("SVER="+t.Ga));const F=I[5];null!=F&&"number"==typeof F&&0<F&&(t.L=r=1.5*F,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const K=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var u=r.i;u.g||-1==K.indexOf("spdy")&&-1==K.indexOf("quic")&&-1==K.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(C(u,u.h),u.h=null))}if(r.F){const le=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.Da=le,Rn(r.I,r.F,le))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=yf(r,r.J?r.pa:null,r.Y),l.K){x(r.i,l);var p=l,_=r.L;_&&p.setTimeout(_),p.B&&(vd(p),Fc(p)),r.g=l}else ry(r);0<t.j.length&&Dd(t)}else"stop"!=I[0]&&"close"!=I[0]||Vc(t,7);else 3==t.H&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Vc(t,7):ty(t):"noop"!=I[0]&&t.h&&t.h.Aa(I),t.A=0)}ao()}catch{}}function xa(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Vo(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Uc(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Vo(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function ki(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Vo(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(He=rf.prototype).setTimeout=function(n){this.P=n},He.nb=function(n){n=n.target;const e=this.M;e&&3==lo(n)?e.l():this.Pa(n)},He.Pa=function(n){try{if(n==this.g)e:{const S=lo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>S)&&(3!=S||$o||this.g&&(this.h.h||this.g.ja()||oI(this.g)))){this.J||4!=S||7==e||ao(),vd(this);var t=this.g.da();this.ca=t;t:if(T_(this)){var r=oI(this.g);n="";var s=r.length,u=4==lo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ds(this),Na(this);var l="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function D_(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,S,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bo(p)){var I=p;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Oi(12),ds(this),Na(this);break e}Lu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uf(this,t)}this.S?(b_(this,S,l),$o&&this.i&&3==S&&(Xh(this.U,this.V,"tick",this.mb),this.V.start())):(Lu(this.j,this.m,l,null),uf(this,l)),4==S&&ds(this),this.i&&!this.J&&(4==S?sy(this.l,this):(this.i=!1,Fc(this)))}else(function TS(n){const e={};n=(n.g&&2<=lo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Bo(n[r]))continue;var t=w_(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function Ca(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Oi(12)):(this.o=0,Oi(13)),ds(this),Na(this)}}}catch{}},He.mb=function(){if(this.g){var n=lo(this.g),e=this.g.ja();this.C<e.length&&(vd(this),b_(this,n,e),this.i&&4!=n&&Fc(this))}},He.cancel=function(){this.J=!0,ds(this)},He.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ld(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(ao(),Oi(17)),ds(this),this.o=2,Na(this)):Hp(this,this.Y-n)};var zp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hs(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof hs){this.h=n.h,Pa(this,n.j),this.s=n.s,this.g=n.g,lf(this,n.m),this.l=n.l;var e=n.i,t=new Fs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Go(this,t),this.o=n.o}else n&&(e=String(n).match(zp))?(this.h=!1,Pa(this,e[1]||"",!0),this.s=Vu(e[2]||""),this.g=Vu(e[3]||"",!0),lf(this,e[4]),this.l=Vu(e[5]||"",!0),Go(this,e[6]||"",!0),this.o=Vu(e[7]||"")):(this.h=!1,this.i=new Fs(null,this.h))}function fs(n){return new hs(n)}function Pa(n,e,t){n.j=t?Vu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function lf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Go(n,e,t){e instanceof Fs?(n.i=e,function Km(n,e){e&&!n.j&&(uo(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(wd(this,r),Oa(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ed(e,C_)),n.i=new Fs(e,n.h))}function Rn(n,e,t){n.i.set(e,t)}function _d(n){return Rn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Vu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ed(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Wm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Wm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}hs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ed(e,Ii,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ed(e,Ii,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ed(t,"/"==t.charAt(0)?Gp:df,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ed(t,nr)),n.join("")};var Ii=/[#\/\?@]/g,df=/[#\?:]/g,Gp=/[#\?]/g,C_=/[#\?@]/g,nr=/#/g;function Fs(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function uo(n){n.g||(n.g=new Map,n.h=0,n.i&&function cf(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function wd(n,e){uo(n),e=Bu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Zr(n,e){return uo(n),e=Bu(n,e),n.g.has(e)}function Oa(n,e,t){wd(n,e),0<t.length&&(n.i=null,n.g.set(Bu(n,e),Pc(t)),n.h+=t.length)}function Bu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function qp(n){this.l=n||v,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ka&&Mt.g.Ka()&&Mt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(He=Fs.prototype).add=function(n,e){uo(this),this.i=null,n=Bu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},He.forEach=function(n,e){uo(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},He.ta=function(){uo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},He.Z=function(n){uo(this);let e=[];if("string"==typeof n)Zr(this,n)&&(e=e.concat(this.g.get(Bu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},He.set=function(n,e){return uo(this),this.i=null,Zr(this,n=Bu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},He.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},He.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var v=10;function h(n){return!!n.h||!!n.g&&n.g.size>=n.j}function g(n){return n.h?1:n.g?n.g.size:0}function E(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function C(n,e){n.g?n.g.add(e):n.h=e}function x(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Pc(n.i)}qp.prototype.cancel=function(){if(this.i=$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Q=class{stringify(n){return Mt.JSON.stringify(n,void 0)}parse(n){return Mt.JSON.parse(n,void 0)}};function Pe(){this.g=new Q}function Be(n,e,t){const r=t||"";try{xa(n,function(s,u){let l=s;Cu(s)&&(l=Zh(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function nt(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function yn(n){this.l=n.fc||null,this.j=n.ob||!1}function Di(n,e){mn.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=ju,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mn(yn,jp),yn.prototype.g=function(){return new Di(this.l,this.j)},yn.prototype.i=function(n){return function(){return n}}({}),Mn(Di,mn);var ju=0;function ka(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function co(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$u(n)}function $u(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(He=Di.prototype).open=function(n,e){if(this.readyState!=ju)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,$u(this)},He.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Mt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},He.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,co(this)),this.readyState=ju},He.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$u(this)),this.g&&(this.readyState=3,$u(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Mt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ka(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},He.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?co(this):$u(this),3==this.readyState&&ka(this)}},He.Za=function(n){this.g&&(this.response=this.responseText=n,co(this))},He.Ya=function(n){this.g&&(this.response=n,co(this))},He.ka=function(){this.g&&co(this)},He.setRequestHeader=function(n,e){this.v.append(n,e)},He.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},He.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var hf=Mt.JSON.parse;function wn(n){mn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Wp,this.L=this.M=!1}Mn(wn,mn);var Wp="",Zm=/^https?$/i,Kp=["POST","PUT"];function Qm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ff(n),Id(n)}function ff(n){n.F||(n.F=!0,ln(n,"complete"),ln(n,"error"))}function Zp(n){if(n.h&&typeof jh<"u"&&(!n.C[1]||4!=lo(n)||2!=n.da()))if(n.v&&4==lo(n))Ho(n.La,0,n);else if(ln(n,"readystatechange"),4==lo(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(zp)[1]||null;!s&&Mt.self&&Mt.self.location&&(s=Mt.self.location.protocol.slice(0,-1)),r=!Zm.test(s?s.toLowerCase():"")}t=r}if(t)ln(n,"complete"),ln(n,"success");else{n.m=6;try{var u=2<lo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",ff(n)}}finally{Id(n)}}}function Id(n,e){if(n.g){Xm(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||ln(n,"ready");try{t.onreadystatechange=r}catch{}}}function Xm(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function lo(n){return n.g?n.g.readyState:0}function oI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Wp:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Jm(n){let e="";return Pu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ey(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Jm(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Rn(n,e,t))}function qo(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function M_(n){this.Ga=0,this.j=[],this.l=new Jh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qo("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qo("baseRetryDelayMs",5e3,n),this.hb=qo("retryDelaySeedMs",1e4,n),this.eb=qo("forwardChannelMaxRetries",2,n),this.xa=qo("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new qp(n&&n.concurrentRequestLimit),this.Ja=new Pe,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ty(n){if(bS(n),3==n.H){var e=n.W++,t=fs(n.I);if(Rn(t,"SID",n.K),Rn(t,"RID",e),Rn(t,"TYPE","terminate"),pf(n,t),(e=new rf(n,n.l,e)).L=2,e.v=_d(fs(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon)try{t=Mt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=aI(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Fc(e)}oy(n)}function ny(n){n.g&&(gf(n),n.g.cancel(),n.g=null)}function bS(n){ny(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),Yp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function Dd(n){if(!h(n.i)&&!n.m){n.m=!0;var e=n.Na;ku||Vp(),oo||(ku(),oo=!0),Um.add(e,n),n.C=0}}function R_(n,e){var t;t=e?e.m:n.W++;const r=fs(n.I);Rn(r,"SID",n.K),Rn(r,"RID",t),Rn(r,"AID",n.V),pf(n,r),n.o&&n.s&&ey(r,n.o,n.s),t=new rf(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=N_(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),C(n.i,t),qm(t,r,e)}function pf(n,e){n.na&&Pu(n.na,function(t,r){Rn(e,r,t)}),n.h&&xa({},function(t,r){Rn(e,r,t)})}function N_(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Gn(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let I=s[_].g;const S=s[_].map;if(I-=u,0>I)u=Math.max(0,s[_].g-100),p=!1;else try{Be(S,l,"req"+I+"_")}catch{r&&r(S)}}if(p){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function ry(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;ku||Vp(),oo||(ku(),oo=!0),Um.add(e,n),n.A=0}}function iy(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Uu(Gn(n.Ma,n),Qp(n,n.A)),n.A++,0))}function gf(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function mf(n){n.g=new rf(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=fs(n.wa);Rn(e,"RID","rpc"),Rn(e,"SID",n.K),Rn(e,"AID",n.V),Rn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Rn(e,"TO",n.qa),Rn(e,"TYPE","xmlhttp"),pf(n,e),n.o&&n.s&&ey(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=_d(fs(e)),t.s=null,t.S=!0,af(t,n)}function Yp(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function sy(n,e){var t=null;if(n.g==e){Yp(n),gf(n),n.g=null;var r=2}else{if(!E(n.i,e))return;t=e.F,x(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;ln(r=tf(),new Bp(r,t)),Dd(n)}else ry(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function SS(n,e){return!(g(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Uu(Gn(n.Na,n,e),Qp(n,n.C)),n.C++,0)))}(n,e)||2==r&&iy(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Vc(n,5);break;case 4:Vc(n,10);break;case 3:Vc(n,6);break;default:Vc(n,2)}}function Qp(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Vc(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Gn(n.pb,n);t||(t=new hs("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||Pa(t,"https"),_d(t)),function rt(n,e){const t=new Jh;if(Mt.Image){const r=new Image;r.onload=Nc(nt,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Nc(nt,t,r,"TestLoadImage: error",!1,e),r.onabort=Nc(nt,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Nc(nt,t,r,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Oi(2);n.H=0,n.h&&n.h.za(e),oy(n),bS(n)}function oy(n){if(n.H=0,n.ma=[],n.h){const e=$(n.i);(0!=e.length||0!=n.j.length)&&(Gh(n.ma,e),Gh(n.ma,n.j),n.i.i.length=0,Pc(n.j),n.j.length=0),n.h.ya()}}function yf(n,e,t){var r=t instanceof hs?fs(t):new hs(t);if(""!=r.g)e&&(r.g=e+"."+r.g),lf(r,r.m);else{var s=Mt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new hs(null);r&&Pa(u,r),e&&(u.g=e),s&&lf(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Rn(r,t,e),Rn(r,"VER",n.ra),pf(n,r),r}function aI(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new wn(t&&n.Ha&&!n.va?new yn({ob:!0}):n.va)).Oa(n.J),e}function x_(){}function ay(){if(Ps&&!(10<=Number(Wh)))throw Error("Environmental error: no available transport.")}function Us(n,e){mn.call(this),this.g=new M_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Bo(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bo(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Td(this)}function uI(n){$p.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function P_(){pd.call(this),this.status=1}function Td(n){this.g=n}function Vs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Bc(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function In(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(He=wn.prototype).Oa=function(n){this.M=n},He.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():zm.g(),this.C=function hd(n){return n.h||(n.h=n.i())}(this.u?this.u:zm),this.g.onreadystatechange=Gn(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Qm(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Mt.FormData&&n instanceof Mt.FormData,!(0<=sd(Kp,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Xm(this),0<this.B&&((this.L=function Ym(n){return Ps&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gn(this.ua,this)):this.A=Ho(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Qm(this,u)}},He.ua=function(){typeof jh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ln(this,"timeout"),this.abort(8))},He.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ln(this,"complete"),ln(this,"abort"),Id(this))},He.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Id(this,!0)),wn.$.N.call(this)},He.La=function(){this.s||(this.G||this.v||this.l?Zp(this):this.kb())},He.kb=function(){Zp(this)},He.isActive=function(){return!!this.g},He.da=function(){try{return 2<lo(this)?this.g.status:-1}catch{return-1}},He.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},He.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),hf(e)}},He.Ia=function(){return this.m},He.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(He=M_.prototype).ra=8,He.H=1,He.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new rf(this,this.l,n);let u=this.s;if(this.U&&(u?(u=Aa(u),b(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=N_(this,s,e),Rn(t=fs(this.I),"RID",n),Rn(t,"CVER",22),this.F&&Rn(t,"X-HTTP-Session-Id",this.F),pf(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(Jm(u)))+"&"+e:this.o&&ey(t,this.o,u)),C(this.i,s),this.bb&&Rn(t,"TYPE","init"),this.P?(Rn(t,"$req",e),Rn(t,"SID","null"),s.aa=!0,qm(s,t,null)):qm(s,t,e),this.H=2}}else 3==this.H&&(n?R_(this,n):0==this.j.length||h(this.i)||R_(this))},He.Ma=function(){if(this.u=null,mf(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Uu(Gn(this.jb,this),n)}},He.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Oi(10),ny(this),mf(this))},He.ib=function(){null!=this.v&&(this.v=null,ny(this),iy(this),Oi(19))},He.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Oi(2)):(this.l.info("Failed to ping google.com"),Oi(1))},He.isActive=function(){return!!this.h&&this.h.isActive(this)},(He=x_.prototype).Ba=function(){},He.Aa=function(){},He.za=function(){},He.ya=function(){},He.isActive=function(){return!0},He.Va=function(){},ay.prototype.g=function(n,e){return new Us(n,e)},Mn(Us,mn),Us.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Oi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=yf(n,null,n.Y),Dd(n)},Us.prototype.close=function(){ty(this.g)},Us.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Zh(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Dd(e)},Us.prototype.N=function(){this.g.h=null,delete this.j,ty(this.g),delete this.g,Us.$.N.call(this)},Mn(uI,$p),Mn(P_,pd),Mn(Td,x_),Td.prototype.Ba=function(){ln(this.g,"a")},Td.prototype.Aa=function(n){ln(this.g,new uI(n))},Td.prototype.za=function(n){ln(this.g,new P_)},Td.prototype.ya=function(){ln(this.g,"b")},Mn(Vs,function uy(){this.blockSize=-1}),Vs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Vs.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)Bc(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){Bc(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){Bc(this,r),s=0;break}}this.h=s,this.i+=e},Vs.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var CS={};function cI(n){return-128<=n&&128>n?function so(n,e){var t=CS;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new In([0|e],0>e?-1:0)}):new In([0|n],0>n?-1:0)}function La(n){if(isNaN(n)||!isFinite(n))return Wo;if(0>n)return li(La(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=O_;return new In(e,0)}var O_=4294967296,Wo=cI(0),vf=cI(1),ly=cI(16777216);function Fa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Bs(n){return-1==n.h}function li(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new In(t,~n.h).add(vf)}function Xp(n,e){return n.add(li(e))}function dy(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Jp(n,e){this.g=n,this.h=e}function hy(n,e){if(Fa(e))throw Error("division by zero");if(Fa(n))return new Jp(Wo,Wo);if(Bs(n))return e=hy(li(n),e),new Jp(li(e.g),li(e.h));if(Bs(e))return e=hy(n,li(e)),new Jp(li(e.g),e.h);if(30<n.g.length){if(Bs(n)||Bs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=vf,r=e;0>=r.X(n);)t=lI(t),r=lI(r);var s=_f(t,1),u=_f(r,1);for(r=_f(r,2),t=_f(t,2);!Fa(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=_f(r,1),t=_f(t,1)}return e=Xp(n,s.R(e)),new Jp(s,e)}for(s=Wo;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=La(t)).R(e);Bs(l)||0<l.X(n);)l=(u=La(t-=r)).R(e);Fa(u)&&(u=vf),s=s.add(u),n=Xp(n,l)}return new Jp(s,n)}function lI(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new In(t,n.h)}function _f(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new In(s,n.h)}(He=In.prototype).ea=function(){if(Bs(this))return-li(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:O_+r)*e,e*=O_}return n},He.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Fa(this))return"0";if(Bs(this))return"-"+li(this).toString(n);for(var e=La(Math.pow(n,6)),t=this,r="";;){var s=hy(t,e).g,u=((0<(t=Xp(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Fa(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},He.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},He.X=function(n){return Bs(n=Xp(this,n))?-1:Fa(n)?0:1},He.abs=function(){return Bs(this)?li(this):this},He.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new In(t,-2147483648&t[t.length-1]?-1:0)},He.R=function(n){if(Fa(this)||Fa(n))return Wo;if(Bs(this))return Bs(n)?li(this).R(li(n)):li(li(this).R(n));if(Bs(n))return li(this.R(li(n)));if(0>this.X(ly)&&0>n.X(ly))return La(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),p=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=l*_,dy(t,2*r+2*s),t[2*r+2*s+1]+=u*_,dy(t,2*r+2*s+1),t[2*r+2*s+1]+=l*p,dy(t,2*r+2*s+1),t[2*r+2*s+2]+=u*p,dy(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new In(t,0)},He.gb=function(n){return hy(this,n).h},He.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new In(t,this.h&n.h)},He.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new In(t,this.h|n.h)},He.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new In(t,this.h^n.h)},ay.prototype.createWebChannel=ay.prototype.g,Us.prototype.send=Us.prototype.u,Us.prototype.open=Us.prototype.m,Us.prototype.close=Us.prototype.close,dd.NO_ERROR=0,dd.TIMEOUT=8,dd.HTTP_ERROR=6,Hm.COMPLETE="complete",fd.EventType=Lc,Lc.OPEN="a",Lc.CLOSE="b",Lc.ERROR="c",Lc.MESSAGE="d",mn.prototype.listen=mn.prototype.O,wn.prototype.listenOnce=wn.prototype.P,wn.prototype.getLastError=wn.prototype.Sa,wn.prototype.getLastErrorCode=wn.prototype.Ia,wn.prototype.getStatus=wn.prototype.da,wn.prototype.getResponseJson=wn.prototype.Wa,wn.prototype.getResponseText=wn.prototype.ja,wn.prototype.send=wn.prototype.ha,wn.prototype.setWithCredentials=wn.prototype.Oa,Vs.prototype.digest=Vs.prototype.l,Vs.prototype.reset=Vs.prototype.reset,Vs.prototype.update=Vs.prototype.j,In.prototype.add=In.prototype.add,In.prototype.multiply=In.prototype.R,In.prototype.modulo=In.prototype.gb,In.prototype.compare=In.prototype.X,In.prototype.toNumber=In.prototype.ea,In.prototype.toString=In.prototype.toString,In.prototype.getBits=In.prototype.D,In.fromNumber=La,In.fromString=function cy(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return li(cy(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=La(Math.pow(e,8)),r=Wo,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=La(Math.pow(e,u)),r=r.R(u).add(La(l))):r=(r=r.R(t)).add(La(l))}return r};var jc=Ir.createWebChannelTransport=function(){return new ay},eg=Ir.getStatEventTarget=function(){return tf()},k_=Ir.ErrorCode=dd,nR=Ir.EventType=Hm,rR=Ir.Event=Ra,AS=Ir.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},iR=Ir.FetchXmlHttpFactory=yn,L_=Ir.WebChannel=fd,dI=Ir.XhrIo=wn,MS=Ir.Md5=Vs,Ef=Ir.Integer=In;const hI="@firebase/firestore";class di{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}di.UNAUTHENTICATED=new di(null),di.GOOGLE_CREDENTIALS=new di("google-credentials-uid"),di.FIRST_PARTY=new di("first-party-uid"),di.MOCK_USER=new di("mock-user");let $c="9.23.0";const Li=new io.Yd("@firebase/firestore");function bd(){return Li.logLevel}function Fe(n,...e){if(Li.logLevel<=io.in.DEBUG){const t=e.map(pI);Li.debug(`Firestore (${$c}): ${n}`,...t)}}function Tr(n,...e){if(Li.logLevel<=io.in.ERROR){const t=e.map(pI);Li.error(`Firestore (${$c}): ${n}`,...t)}}function Ko(n,...e){if(Li.logLevel<=io.in.WARN){const t=e.map(pI);Li.warn(`Firestore (${$c}): ${n}`,...t)}}function pI(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${$c}) INTERNAL ASSERTION FAILED: `+n;throw Tr(e),new Error(e)}function dt(n,e){n||at()}function et(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Qt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(di.UNAUTHENTICATED))}shutdown(){}}class NS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mI{constructor(e){this.t=e,this.currentUser=di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let l=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Yr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const I=l;e.enqueueRetryable((0,me.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Yr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt("string"==typeof r.accessToken),new gI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new di(e)}}class fy{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=di.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class xS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new fy(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class py{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PS{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt("string"==typeof t.token),this.T=t.token,new py(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function OS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class yI{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=OS(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function Sd(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function vI(n){return n+"\0"}class rr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rr.fromMillis(Date.now())}static fromDate(e){return rr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new rr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new rr(0,0))}static max(){return new vt(new rr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ng{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ng.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ng?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends ng{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const sR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Br extends ng{construct(e,t,r){return new Br(e,t,r)}static isValidIdentifier(e){return sR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Br(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const p=e[s];if("\\"===p){if(s+1===e.length)throw new Me(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Me(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===p?(l=!l,s++):"."!==p||l?(r+=p,s++):(u(),s++)}if(u(),l)throw new Me(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Br(t)}static emptyPath(){return new Br([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(sn.fromString(e))}static fromName(e){return new Ke(sn.fromString(e).popFirst(5))}static empty(){return new Ke(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new sn(e.slice()))}}class an{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Cd(n){return n.fields.find(e=>2===e.kind)}function Hc(n){return n.fields.filter(e=>2!==e.kind)}an.UNKNOWN_ID=-1;class wf{constructor(e,t){this.fieldPath=e,this.kind=t}}class rg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rg(0,Fi.min())}}function U_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=vt.fromTimestamp(1e9===r?new rr(t+1,0):new rr(t,r));return new Fi(s,Ke.empty(),e)}function V_(n){return new Fi(n.readTime,n.key,-1)}class Fi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fi(vt.min(),Ke.empty(),-1)}static max(){return new Fi(vt.max(),Ke.empty(),-1)}}function wI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}const gy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class II{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ua(n){return my.apply(this,arguments)}function my(){return my=(0,me.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==gy)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),my.apply(this,arguments)}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let s=0,u=0,l=!1;e.forEach(p=>{++s,p.next(()=>{++u,l&&u===s&&t()},_=>r(_))}),l=!0,u===s&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(s=>s?ie.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,s)=>{const u=e.length,l=new Array(u);let p=0;for(let _=0;_<u;_++){const I=_;t(e[I]).next(S=>{l[I]=S,++p,p===u&&r(l)},S=>s(S))}})}static doWhile(e,t){return new ie((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Va{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Yr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new zc(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=If(r.target.error);this.v.reject(new zc(e,s))}}static open(e,t,r,s){try{return new Va(t,e.transaction(s,r))}catch(u){throw new zc(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new j_(t)}}class Zo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Zo.S((0,Qt.z$)())&&Tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Ba(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Qt.hl)())return!1;if(Zo.C())return!0;const e=(0,Qt.z$)(),t=Zo.S(e),r=0<t&&t<10,s=Zo.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,me.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new zc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const p=l.target.error;s("VersionError"===p.name?new Me(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Me(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new zc(e,p))},u.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,me.Z)(function*(){const l="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.$(e);const _=Va.open(u.db,e,l?"readonly":"readwrite",r),I=s(_).next(S=>(_.P(),S)).catch(S=>(_.abort(S),ie.reject(S))).toPromise();return I.catch(()=>{}),yield _.R,I}catch(_){const I=_,S="FirebaseError"!==I.name&&p<3;if(Fe("SimpleDb","Transaction failed with error:",I.message,"Retrying:",S),u.close(),!S)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class B_{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ba(this.L.delete())}}class zc extends Me{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gc(n){return"IndexedDbTransactionError"===n.name}class j_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ba(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Ba(this.store.add(e))}get(e){return Ba(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Ba(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Ba(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,p)=>{u.push(p)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ie((u,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{u(p.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ie((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,p)=>p.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new ie((r,s)=>{t.onerror=u=>{const l=If(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(p=>{p?l.continue():r()}):r()}})}W(e,t){const r=[];return new ie((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const p=l.target.result;if(!p)return void s();const _=new B_(p),I=t(p.primaryKey,p.value,_);if(I instanceof ie){const S=I.catch(R=>(_.done(),ie.reject(R)));r.push(S)}_.isDone?s():null===_.K?p.continue():p.continue(_.K)}}).next(()=>ie.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ba(n){return new ie((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=If(r.target.error);t(s)}})}let Yo=!1;function If(n){const e=Zo.S((0,Qt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Yo||(Yo=!0,setTimeout(()=>{throw r},0)),r}}return n}class $_{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Fe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Fe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Gc(r)?Fe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ua(r)}yield t.et(6e4)}))}}class kS{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return ie.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Fe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(p=>{s-=p,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(p=>(Fe("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=V_(u);wI(l,r)>0&&(r=l)}),new Fi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let js=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Df(n){return null==n}function ja(n){return 0===n&&1/n==-1/0}function DI(n){return"number"==typeof n&&Number.isInteger(n)&&!ja(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ui(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yy(e)),e=LS(n.get(t),e);return yy(e)}function LS(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function yy(n){return n+"\x01\x01"}function Qo(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&at(),n.charAt(l+1)){case"\x01":const p=n.substring(u,l);let _;0===s.length?_=p:(s+=p,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:at()}u=l+2}return new sn(r)}const TI=["userId","batchId"];function ig(n,e){return[n,Ui(e)]}function vy(n,e,t){return[n,Ui(e),t]}const oR={},FS=["prefixPath","collectionGroup","readTime","documentId"],US=["prefixPath","collectionGroup","documentId"],VS=["collectionGroup","readTime","prefixPath","documentId"],aR=["canonicalId","targetId"],uR=["targetId","path"],_y=["path","targetId"],BS=["collectionId","parent"],H_=["indexId","uid"],z_=["uid","sequenceNumber"],Tf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],G_=["indexId","uid","orderedDocumentKey"],q_=["userId","collectionPath","documentId"],sg=["userId","collectionPath","largestBatchId"],Ey=["userId","collectionGroup","largestBatchId"],Ad=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],W_=[...Ad,"documentOverlays"],wy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],og=wy,cR=[...og,"indexConfiguration","indexState","indexEntries"];class ag extends II{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function br(n,e){const t=et(n);return Zo.M(t.ht,e)}function bI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Bn{constructor(e,t){this.comparator=e,this.root=t||hi.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bf(this.root,e,this.comparator,!1)}getReverseIterator(){return new bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bf(this.root,e,this.comparator,!0)}}class bf{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hi{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??hi.RED,this.left=s??hi.EMPTY,this.right=u??hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new hi(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return hi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1,hi.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,s){return this}insert(n,e,t){return new hi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CI(this.data.getIterator())}getIteratorFrom(e){return new CI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class CI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ug(n){return n.hasNext()?n.getNext():void 0}class ps{constructor(e){this.fields=e,e.sort(Br.comparator)}static empty(){return new ps([])}unionWith(e){let t=new qn(Br.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class cg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new cg("Invalid base64 string: "+s):s}}(e);return new Qr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Qr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qr.EMPTY_BYTE_STRING=new Qr("");const AI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $a(n){if(dt(!!n),"string"==typeof n){let e=0;const t=AI.exec(n);if(dt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wn(n.seconds),nanos:Wn(n.nanos)}}function Wn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function zu(n){return"string"==typeof n?Qr.fromBase64String(n):Qr.fromUint8Array(n)}function lg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Iy(n){const e=n.mapValue.fields.__previous_value__;return lg(e)?Iy(e):e}function Sf(n){const e=$a(n.mapValue.fields.__local_write_time__.timestampValue);return new rr(e.seconds,e.nanos)}class lR{constructor(e,t,r,s,u,l,p,_,I){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.longPollingOptions=_,this.useFetchStreams=I}}class qc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}const Xo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dy={nullValue:"NULL_VALUE"};function $s(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lg(n)?4:Q_(n)?9007199254740991:10:at()}function gs(n,e){if(n===e)return!0;const t=$s(n);if(t!==$s(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sf(n).isEqual(Sf(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=$a(r.timestampValue),l=$a(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,zu(n.bytesValue).isEqual(zu(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Wn(r.geoPointValue.latitude)===Wn(s.geoPointValue.latitude)&&Wn(r.geoPointValue.longitude)===Wn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Wn(r.integerValue)===Wn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Wn(r.doubleValue),l=Wn(s.doubleValue);return u===l?ja(u)===ja(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Sd(n.arrayValue.values||[],e.arrayValue.values||[],gs);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(bI(u)!==bI(l))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===l[p]||!gs(u[p],l[p])))return!1;return!0}(n,e);default:return at()}var s}function dg(n,e){return void 0!==(n.values||[]).find(t=>gs(t,e))}function Gu(n,e){if(n===e)return 0;const t=$s(n),r=$s(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=Wn(s.integerValue||s.doubleValue),p=Wn(u.integerValue||u.doubleValue);return l<p?-1:l>p?1:l===p?0:isNaN(l)?isNaN(p)?0:-1:1}(n,e);case 3:return MI(n.timestampValue,e.timestampValue);case 4:return MI(Sf(n),Sf(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(s,u){const l=zu(s),p=zu(u);return l.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),p=u.split("/");for(let _=0;_<l.length&&_<p.length;_++){const I=Ut(l[_],p[_]);if(0!==I)return I}return Ut(l.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Ut(Wn(s.latitude),Wn(u.latitude));return 0!==l?l:Ut(Wn(s.longitude),Wn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],p=u.values||[];for(let _=0;_<l.length&&_<p.length;++_){const I=Gu(l[_],p[_]);if(I)return I}return Ut(l.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Xo.mapValue&&u===Xo.mapValue)return 0;if(s===Xo.mapValue)return 1;if(u===Xo.mapValue)return-1;const l=s.fields||{},p=Object.keys(l),_=u.fields||{},I=Object.keys(_);p.sort(),I.sort();for(let S=0;S<p.length&&S<I.length;++S){const R=Ut(p[S],I[S]);if(0!==R)return R;const F=Gu(l[p[S]],_[I[S]]);if(0!==F)return F}return Ut(p.length,I.length)}(n.mapValue,e.mapValue);default:throw at()}}function MI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=$a(n),r=$a(e),s=Ut(t.seconds,r.seconds);return 0!==s?s:Ut(t.nanos,r.nanos)}function Cf(n){return Z_(n)}function Z_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=$a(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?zu(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=Z_(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const p of s)l?l=!1:u+=",",u+=`${p}:${Z_(r.fields[p])}`;return u+"}"}(n.mapValue):at();var e}function Wc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fg(n){return!!n&&"integerValue"in n}function Ty(n){return!!n&&"arrayValue"in n}function by(n){return!!n&&"nullValue"in n}function Y_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sy(n){return!!n&&"mapValue"in n}function pg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Q_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function jS(n){return"nullValue"in n?Dy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wc(qc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function RI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wc(qc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Xo:at()}function NI(n,e){const t=Gu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xI(n,e){const t=Gu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Vi{constructor(e){this.value=e}static empty(){return new Vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pg(t)}setAll(e){let t=Br.emptyPath(),r={},s=[];e.forEach((l,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=p.popLast()}l?r[p.lastSegment()]=pg(l):s.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Sy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Sy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Hu(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Vi(pg(this.value))}}function X_(n){const e=[];return Hu(n.fields,(t,r)=>{const s=new Br([t]);if(Sy(r)){const u=X_(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new ps(e)}class jn{constructor(e,t,r,s,u,l,p){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=p}static newInvalidDocument(e){return new jn(e,0,vt.min(),vt.min(),vt.min(),Vi.empty(),0)}static newFoundDocument(e,t,r,s){return new jn(e,1,t,vt.min(),r,s,0)}static newNoDocument(e,t){return new jn(e,2,t,vt.min(),vt.min(),Vi.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,vt.min(),vt.min(),Vi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fi{constructor(e,t){this.position=e,this.inclusive=t}}function J_(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):Gu(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function $S(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gs(n.position[t],e.position[t]))return!1;return!0}class Kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zc(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Cy{}class tn extends Cy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new n0(e,t,r):"array-contains"===t?new OI(e,r):"in"===t?new r0(e,r):"not-in"===t?new qS(e,r):"array-contains-any"===t?new kI(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new zS(e,r):new GS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Gu(t,this.value)):null!==t&&$s(this.value)===$s(t)&&this.matchesComparison(Gu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Nn extends Cy{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Nn(e,t)}matches(e){return Af(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Af(n){return"and"===n.op}function gg(n){return"or"===n.op}function ho(n){return e0(n)&&Af(n)}function e0(n){for(const e of n.filters)if(e instanceof Nn)return!1;return!0}function t0(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Cf(n.value);if(ho(n))return n.filters.map(e=>t0(e)).join(",");{const e=n.filters.map(t=>t0(t)).join(",");return`${n.op}(${e})`}}function HS(n,e){return n instanceof tn?(t=n,(r=e)instanceof tn&&t.op===r.op&&t.field.isEqual(r.field)&&gs(t.value,r.value)):n instanceof Nn?function(t,r){return r instanceof Nn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&HS(u,r.filters[l]),!0)}(n,e):void at();var t,r}function Xr(n,e){const t=n.filters.concat(e);return Nn.create(t,n.op)}function PI(n){return n instanceof tn?`${(e=n).field.canonicalString()} ${e.op} ${Cf(e.value)}`:n instanceof Nn?function(e){return e.op.toString()+" {"+e.getFilters().map(PI).join(" ,")+"}"}(n):"Filter";var e}class n0 extends tn{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class zS extends tn{constructor(e,t){super(e,"in",t),this.keys=Ay(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class GS extends tn{constructor(e,t){super(e,"not-in",t),this.keys=Ay(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ay(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class OI extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ty(t)&&dg(t.arrayValue,this.value)}}class r0 extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dg(this.value.arrayValue,t)}}class qS extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(dg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dg(this.value.arrayValue,t)}}class kI extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ty(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dg(this.value.arrayValue,r))}}class LI{constructor(e,t=null,r=[],s=[],u=null,l=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=p,this.dt=null}}function s0(n,e=null,t=[],r=[],s=null,u=null,l=null){return new LI(n,e,t,r,s,u,l)}function Md(n){const e=et(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>t0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Cf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Cf(r)).join(",")),e.dt=t}return e.dt}function mg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Zc(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$S(n.startAt,e.startAt)&&$S(n.endAt,e.endAt)}function yg(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function qu(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function Ha(n,e,t){let r=Dy,s=!0;for(const u of qu(n,e)){let l=Dy,p=!0;switch(u.op){case"<":case"<=":l=jS(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,p=!1;break;case"!=":case"not-in":l=Dy}NI({value:r,inclusive:s},{value:l,inclusive:p})<0&&(r=l,s=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];NI({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function Rd(n,e,t){let r=Xo,s=!0;for(const u of qu(n,e)){let l=Xo,p=!0;switch(u.op){case">=":case">":l=RI(u.value),p=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,p=!1;break;case"!=":case"not-in":l=Xo}xI({value:r,inclusive:s},{value:l,inclusive:p})>0&&(r=l,s=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];xI({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class Wu{constructor(e,t=null,r=[],s=[],u=null,l="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=p,this.endAt=_,this.wt=null,this._t=null}}function FI(n,e,t,r,s,u,l,p){return new Wu(n,e,t,r,s,u,l,p)}function Nd(n){return new Wu(n)}function o0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function vg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Yc(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Mf(n){return null!==n.collectionGroup}function Qc(n){const e=et(n);if(null===e.wt){e.wt=[];const t=Yc(e),r=vg(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Kc(t)),e.wt.push(new Kc(Br.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Kc(Br.keyField(),u))}}}return e.wt}function Bi(n){const e=et(n);if(!e._t)if("F"===e.limitType)e._t=s0(e.path,e.collectionGroup,Qc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Qc(e))t.push(new Kc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new fi(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new fi(e.startAt.position,e.startAt.inclusive):null;e._t=s0(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function a0(n,e){e.getFirstInequalityField(),Yc(n);const t=n.filters.concat([e]);return new Wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function My(n,e,t){return new Wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _g(n,e){return mg(Bi(n),Bi(e))&&n.limitType===e.limitType}function UI(n){return`${Md(Bi(n))}|lt:${n.limitType}`}function Ry(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>PI(r)).join(", ")}]`),Df(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Cf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Cf(r)).join(",")),`Target(${t})`}(Bi(n))}; limitType=${n.limitType})`}function Ny(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ke.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Qc(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const p=J_(s,u,l);return s.inclusive?p<=0:p<0}(t.startAt,Qc(t),r)||t.endAt&&!function(s,u,l){const p=J_(s,u,l);return s.inclusive?p>=0:p>0}(t.endAt,Qc(t),r)));var t,r}function VI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function WS(n){return(e,t)=>{let r=!1;for(const s of Qc(n)){const u=dR(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function dR(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(s,u,l){const p=u.data.field(s),_=l.data.field(s);return null!==p&&null!==_?Gu(p,_):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}class za{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hu(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return SI(this.inner)}size(){return this.innerSize}}const BI=new Bn(Ke.comparator);function Hs(){return BI}const Eg=new Bn(Ke.comparator);function xy(...n){let e=Eg;for(const t of n)e=e.insert(t.key,t);return e}function u0(n){let e=Eg;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Jo(){return Rf()}function jI(){return Rf()}function Rf(){return new za(n=>n.toString(),(n,e)=>n.isEqual(e))}const $I=new Bn(Ke.comparator),jt=new qn(Ke.comparator);function qt(...n){let e=jt;for(const t of n)e=e.add(t);return e}const HI=new qn(Ut);function Xc(){return HI}function c0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function zI(n){return{integerValue:""+n}}function wg(n,e){return DI(e)?zI(e):c0(n,e)}class Ku{constructor(){this._=void 0}}function l0(n,e,t){return n instanceof Jc?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&lg(s)&&(s=Iy(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Zu?Py(n,e):n instanceof el?Oy(n,e):function(r,s){const u=d0(r,s),l=GI(u)+GI(r.gt);return fg(u)&&fg(r.gt)?zI(l):c0(r.serializer,l)}(n,e)}function Ig(n,e,t){return n instanceof Zu?Py(n,e):n instanceof el?Oy(n,e):t}function d0(n,e){return n instanceof Nf?fg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Jc extends Ku{}class Zu extends Ku{constructor(e){super(),this.elements=e}}function Py(n,e){const t=qI(e);for(const r of n.elements)t.some(s=>gs(s,r))||t.push(r);return{arrayValue:{values:t}}}class el extends Ku{constructor(e){super(),this.elements=e}}function Oy(n,e){let t=qI(e);for(const r of n.elements)t=t.filter(s=>!gs(s,r));return{arrayValue:{values:t}}}class Nf extends Ku{constructor(e,t){super(),this.serializer=e,this.gt=t}}function GI(n){return Wn(n.integerValue||n.doubleValue)}function qI(n){return Ty(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xf{constructor(e,t){this.field=e,this.transform=t}}class ZS{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ky(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Dg{}function h0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Of(n.key,ir.none()):new Pf(n.key,n.data,ir.none());{const t=n.data,r=Vi.empty();let s=new qn(Br.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new tl(n.key,r,new ps(s.toArray()),ir.none())}}function YS(n,e,t){n instanceof Pf?function(r,s,u){const l=r.value.clone(),p=f0(r.fieldTransforms,s,u.transformResults);l.setAll(p),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof tl?function(r,s,u){if(!ky(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=f0(r.fieldTransforms,s,u.transformResults),p=s.data;p.setAll(Ly(r)),p.setAll(l),s.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Tg(n,e,t,r){return n instanceof Pf?function(s,u,l,p){if(!ky(s.precondition,u))return l;const _=s.value.clone(),I=KI(s.fieldTransforms,p,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof tl?function(s,u,l,p){if(!ky(s.precondition,u))return l;const _=KI(s.fieldTransforms,p,u),I=u.data;return I.setAll(Ly(s)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,ky(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function zs(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=d0(r.transform,s||null);null!=u&&(null===t&&(t=Vi.empty()),t.set(r.field,u))}return t||null}function WI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Sd(t,r,(s,u)=>function KS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Zu&&r instanceof Zu||t instanceof el&&r instanceof el?Sd(t.elements,r.elements,gs):t instanceof Nf&&r instanceof Nf?gs(t.gt,r.gt):t instanceof Jc&&r instanceof Jc);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Pf extends Dg{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class tl extends Dg{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Ly(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function f0(n,e,t){const r=new Map;dt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,p=e.data.field(u.field);r.set(u.field,Ig(l,p,t[s]))}return r}function KI(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,l0(u,l,e))}return r}class Of extends Dg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p0 extends Dg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fy{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&YS(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jI();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let p=this.applyToLocalView(l,u.mutatedFields);p=t.has(s.key)?null:p;const _=h0(l,p);null!==_&&r.set(s.key,_),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&Sd(this.mutations,e.mutations,(t,r)=>WI(t,r))&&Sd(this.baseMutations,e.baseMutations,(t,r)=>WI(t,r))}}class g0{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){dt(e.mutations.length===r.length);let s=$I;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new g0(e,t,r,s)}}class m0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class QS{constructor(e,t){this.count=e,this.unchangedNames=t}}var zr,un;function ZI(n){switch(n){default:return at();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function YI(n){if(void 0===n)return Tr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case zr.OK:return ue.OK;case zr.CANCELLED:return ue.CANCELLED;case zr.UNKNOWN:return ue.UNKNOWN;case zr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case zr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case zr.INTERNAL:return ue.INTERNAL;case zr.UNAVAILABLE:return ue.UNAVAILABLE;case zr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case zr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case zr.NOT_FOUND:return ue.NOT_FOUND;case zr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case zr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case zr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case zr.ABORTED:return ue.ABORTED;case zr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case zr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case zr.DATA_LOSS:return ue.DATA_LOSS;default:return at()}}(un=zr||(zr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class fo{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return kf}static getOrCreateInstance(){return null===kf&&(kf=new fo),kf}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let kf=null;function QI(){return new TextEncoder}const XI=new Ef([4294967295,4294967295],0);function JI(n){const e=QI().encode(n),t=new MS;return t.update(e),new Uint8Array(t.digest())}function v0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ef([t,r],0),new Ef([s,u],0)]}class Uy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nl(`Invalid padding: ${t}`);if(r<0)throw new nl(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new nl(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new nl(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ef.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(Ef.fromNumber(r)));return 1===s.compare(XI)&&(s=new Ef([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=JI(e),[r,s]=v0(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new Uy(u,s,t);return r.forEach(p=>l.insert(p)),l}insert(e){if(0===this.It)return;const t=JI(e),[r,s]=v0(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xd{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Vy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xd(vt.min(),s,new Bn(Ut),Hs(),qt())}}class Vy{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vy(r,t,qt(),qt(),qt())}}class bg{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class _0{constructor(e,t){this.targetId=e,this.Vt=t}}class E0{constructor(e,t,r=Qr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class w0{constructor(){this.St=0,this.Dt=eD(),this.Ct=Qr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=qt(),t=qt(),r=qt();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:at()}}),new Vy(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=eD()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class I0{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Hs(),this.zt=Ga(),this.Wt=new Bn(Ut)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(yg(l))if(0===s){const p=new Ke(l.path);this.Yt(r,p,jn.newNoDocument(p,vt.min()))}else dt(1===s);else{const p=this.ie(r);if(p!==s){const _=this.re(e,p);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=fo.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(I,S,R){var F,B,K,le,Se,Qe;const ot={localCacheCount:S,existenceFilterCount:R.count},it=R.unchangedNames;return it&&(ot.bloomFilter={applied:0===I,hashCount:null!==(F=it?.hashCount)&&void 0!==F?F:0,bitmapLength:null!==(le=null===(K=null===(B=it?.bits)||void 0===B?void 0:B.bitmap)||void 0===K?void 0:K.length)&&void 0!==le?le:0,padding:null!==(Qe=null===(Se=it?.bits)||void 0===Se?void 0:Se.padding)&&void 0!==Qe?Qe:0}),ot}(_,p,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:p=0}=r;let _,I;try{_=zu(u).toUint8Array()}catch(S){if(S instanceof cg)return Ko("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw S}try{I=new Uy(_,l,p)}catch(S){return Ko(S instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",S),1}return 0===I.It?1:s!==t-this.oe(e.targetId,I)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),p=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(p)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const p=this.se(l);if(p){if(u.current&&yg(p.target)){const _=new Ke(p.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,jn.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=qt();this.zt.forEach((u,l)=>{let p=!0;l.forEachWhile(_=>{const I=this.se(_);return!I||"TargetPurposeLimboResolution"===I.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new xd(e,t,this.Wt,this.jt,r);return this.jt=Hs(),this.zt=Ga(),this.Wt=new Bn(Ut),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new w0,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new qn(Ut),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new w0),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Ga(){return new Bn(Ke.comparator)}function eD(){return new Bn(Ke.comparator)}const XS={asc:"ASCENDING",desc:"DESCENDING"},D0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JS={and:"AND",or:"OR"};class tD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function T0(n,e){return n.useProto3Json||Df(e)?e:{value:e}}function Yu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lf(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nD(n,e){return Yu(n,e.toTimestamp())}function sr(n){return dt(!!n),vt.fromTimestamp(function(e){const t=$a(e);return new rr(t.seconds,t.nanos)}(n))}function rD(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function iD(n){const e=sn.fromString(n);return dt(fD(e)),e}function Ff(n,e){return rD(n.databaseId,e.path)}function ea(n,e){const t=iD(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(S0(t))}function b0(n,e){return rD(n.databaseId,e)}function sD(n){const e=iD(n);return 4===e.length?sn.emptyPath():S0(e)}function Uf(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function S0(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Vf(n,e,t){return{name:Ff(n,e),fields:t.value.mapValue.fields}}function oD(n,e,t){const r=ea(n,e.name),s=sr(e.updateTime),u=e.createTime?sr(e.createTime):vt.min(),l=new Vi({mapValue:{fields:e.fields}}),p=jn.newFoundDocument(r,s,u,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function Sg(n,e){let t;if(e instanceof Pf)t={update:Vf(n,e.key,e.value)};else if(e instanceof Of)t={delete:Ff(n,e.key)};else if(e instanceof tl)t={update:Vf(n,e.key,e.data),updateMask:By(e.fieldMask)};else{if(!(e instanceof p0))return at();t={verify:Ff(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Jc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof el)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nf)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:nD(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:at()),t;var s}function C0(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?ir.updateTime(sr(s.updateTime)):void 0!==s.exists?ir.exists(s.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let p=null;"setToServerValue"in l?(dt("REQUEST_TIME"===l.setToServerValue),p=new Jc):"appendMissingElements"in l?p=new Zu(l.appendMissingElements.values||[]):"removeAllFromArray"in l?p=new el(l.removeAllFromArray.values||[]):"increment"in l?p=new Nf(u,l.increment):at();const _=Br.fromServerFormat(l.fieldPath);return new xf(_,p)}(n,s)):[];var s;if(e.update){const s=ea(n,e.update.name),u=new Vi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ps((e.updateMask.fieldPaths||[]).map(I=>Br.fromServerFormat(I)));return new tl(s,u,l,t,r)}return new Pf(s,u,t,r)}if(e.delete){const s=ea(n,e.delete);return new Of(s,t)}if(e.verify){const s=ea(n,e.verify);return new p0(s,t)}return at()}function cD(n,e){return{documents:[b0(n,e.path)]}}function A0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=b0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=b0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return hD(Nn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:Qu((S=I).field),direction:tC(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=T0(n,e.limit);var p,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function lD(n){let e=sD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){dt(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const R=dD(S);return R instanceof Nn&&ho(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new Kc(Pd((R=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let p=null;t.limit&&(p=function(S){let R;return R="object"==typeof S?S.value:S,Df(R)?null:R}(t.limit));let _=null;var S;t.startAt&&(_=new fi((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new fi(S.values||[],!S.before)}(t.endAt)),FI(e,s,l,u,p,"F",_,I)}function dD(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Pd(e.unaryFilter.field);return tn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Pd(e.unaryFilter.field);return tn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pd(e.unaryFilter.field);return tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Pd(e.unaryFilter.field);return tn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(n):void 0!==n.fieldFilter?tn.create(Pd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Nn.create(e.compositeFilter.filters.map(t=>dD(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return at()}}(e.compositeFilter.op))}(n):at();var e}function tC(n){return XS[n]}function nC(n){return D0[n]}function rC(n){return JS[n]}function Qu(n){return{fieldPath:n.canonicalString()}}function Pd(n){return Br.fromServerFormat(n.fieldPath)}function hD(n){return n instanceof tn?function(e){if("=="===e.op){if(Y_(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NAN"}};if(by(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Y_(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NOT_NAN"}};if(by(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qu(e.field),op:nC(e.op),value:e.value}}}(n):n instanceof Nn?function(e){const t=e.getFilters().map(r=>hD(r));return 1===t.length?t[0]:{compositeFilter:{op:rC(e.op),filters:t}}}(n):at()}function By(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Xu{constructor(e,t,r,s,u=vt.min(),l=vt.min(),p=Qr.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p,this.expectedCount=_}withSequenceNumber(e){return new Xu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class pD{constructor(e){this.fe=e}}function gD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ff(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Yu(s,u.version.toTimestamp()),createTime:Yu(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Od(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:Od(e.version)}}var s,u;return r}function jy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Od(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rl(n){const e=new rr(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function il(n,e){const t=(e.baseMutations||[]).map(u=>C0(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>C0(n.fe,u)),s=rr.fromMillis(e.localWriteTimeMs);return new Fy(e.batchId,s,t,r)}function Ag(n){const e=rl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rl(n.lastLimboFreeSnapshotVersion):vt.min();let r;var s;return void 0!==n.query.documents?(dt(1===(s=n.query).documents.length),r=Bi(Nd(sD(s.documents[0])))):r=Bi(lD(n.query)),new Xu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qr.fromBase64String(n.resumeToken))}function sC(n,e){const t=Od(e.snapshotVersion),r=Od(e.lastLimboFreeSnapshotVersion);let s;s=yg(e.target)?cD(n.fe,e.target):A0(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Md(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function $y(n){const e=lD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?My(e,e.limit,"L"):e}function Hy(n,e){return new m0(e.largestBatchId,C0(n.fe,e.overlayMutation))}function oC(n,e){const t=e.path.lastSegment();return[n,Ui(e.path.popLast()),t]}function Mg(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Od(r.readTime),documentKey:Ui(r.documentKey.path),largestBatchId:r.largestBatchId}}class aC{getBundleMetadata(e,t){return mD(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:rl(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return mD(e).put({bundleId:(r=t).id,createTime:Od(sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return zy(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:$y(s.bundledQuery),readTime:rl(s.readTime)};var s})}saveNamedQuery(e,t){return zy(e).put({name:(r=t).name,readTime:Od(sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function mD(n){return br(n,"bundles")}function zy(n){return br(n,"namedQueries")}class Gy{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Gy(e,t.uid||"")}getOverlay(e,t){return ms(e).get(oC(this.userId,t)).next(r=>r?Hy(this.serializer,r):null)}getOverlays(e,t){const r=Jo();return ie.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const p=new m0(t,l);s.push(this.we(e,p))}),ie.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(Ui(l.getCollectionPath())));const u=[];return s.forEach(l=>{const p=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(ms(e).J("collectionPathOverlayIndex",p))}),ie.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Jo(),u=Ui(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return ms(e).j("collectionPathOverlayIndex",l).next(p=>{for(const _ of p){const I=Hy(this.serializer,_);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Jo();let l;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ms(e).X({index:"collectionGroupOverlayIndex",range:p},(_,I,S)=>{const R=Hy(this.serializer,I);u.size()<s||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):S.done()}).next(()=>u)}we(e,t){return ms(e).put(function(r,s,u){const[l,p,_]=oC(s,u.mutation.key);return{userId:s,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Sg(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function ms(n){return br(n,"documentOverlays")}class ta{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Wn(e.integerValue));else if("doubleValue"in e){const r=Wn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),ja(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(zu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?Q_(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):at()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),Ke.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function ji(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function sl(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=ji(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}ta.Ve=new ta;class qy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=sl(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=sl(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class po{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class M0{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class qa{constructor(){this.je=new qy,this.ze=new po(this.je),this.We=new M0(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class go{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new go(this.indexId,this.documentKey,this.arrayValue,r)}}function Gs(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=kd(n.arrayValue,e.arrayValue),0!==t?t:(t=kd(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function kd(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Bf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){dt(e.collectionGroup===this.collectionId);const t=Cd(e);if(void 0!==t&&!this.en(t))return!1;const r=Hc(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const p=r[u];if(!this.nn(this.Ze,p)||!this.sn(this.Ye[l++],p))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ld(n){var e,t;if(dt(n instanceof tn||n instanceof Nn),n instanceof tn){if(n instanceof r0){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>tn.create(n.field,"==",u)))||[];return Nn.create(s,"or")}return n}const r=n.filters.map(s=>Ld(s));return Nn.create(r,n.op)}function jf(n){if(0===n.getFilters().length)return[];const e=Wy(Ld(n));return dt(R0(e)),ol(e)||al(e)?[e]:e.getFilters()}function ol(n){return n instanceof tn}function al(n){return n instanceof Nn&&ho(n)}function R0(n){return ol(n)||al(n)||function(e){if(e instanceof Nn&&gg(e)){for(const t of e.getFilters())if(!ol(t)&&!al(t))return!1;return!0}return!1}(n)}function Wy(n){if(dt(n instanceof tn||n instanceof Nn),n instanceof tn)return n;if(1===n.filters.length)return Wy(n.filters[0]);const e=n.filters.map(r=>Wy(r));let t=Nn.create(e,n.op);return t=Rg(t),R0(t)?t:(dt(t instanceof Nn),dt(Af(t)),dt(t.filters.length>1),t.filters.reduce((r,s)=>Ky(r,s)))}function Ky(n,e){let t;return dt(n instanceof tn||n instanceof Nn),dt(e instanceof tn||e instanceof Nn),t=n instanceof tn?e instanceof tn?Nn.create([n,e],"and"):N0(n,e):e instanceof tn?N0(e,n):function(r,s){if(dt(r.filters.length>0&&s.filters.length>0),Af(r)&&Af(s))return Xr(r,s.getFilters());const u=gg(r)?r:s,l=gg(r)?s:r,p=u.filters.map(_=>Ky(_,l));return Nn.create(p,"or")}(n,e),Rg(t)}function N0(n,e){if(Af(e))return Xr(e,n.getFilters());{const t=e.filters.map(r=>Ky(n,r));return Nn.create(t,"or")}}function Rg(n){if(dt(n instanceof tn||n instanceof Nn),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return Rg(e[0]);if(e0(n))return n;const t=e.map(s=>Rg(s)),r=[];return t.forEach(s=>{s instanceof tn?r.push(s):s instanceof Nn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:Nn.create(r,n.op)}class yD{constructor(){this.rn=new Zy}addToCollectionParentIndex(e,t){return this.rn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Fi.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class Zy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new qn(sn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qn(sn.comparator)).toArray()}}const Ng=new Uint8Array(0);class vD{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Zy,this.un=new za(r=>Md(r),(r,s)=>mg(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:Ui(s)};return Yy(e).put(u)}return ie.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[vI(t),""],!1,!0);return Yy(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Qo(l.parent))}return r})}addFieldIndex(e,t){const r=x0(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=Qy(e);return u.next(p=>{l.put(Mg(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=x0(e),s=Qy(e),u=xg(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=xg(e);let s=!0;const u=new Map;return ie.forEach(this.cn(t),l=>this.an(e,l).next(p=>{s&&(s=!!p),u.set(l,p)})).next(()=>{if(s){let l=qt();const p=[];return ie.forEach(u,(_,I)=>{var S;Fe("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${Md(t)}`);const R=function(it,ut){const Ft=Cd(ut);if(void 0===Ft)return null;for(const $t of qu(it,Ft.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(I,_),F=function(it,ut){const Ft=new Map;for(const $t of Hc(ut))for(const vn of qu(it,$t.fieldPath))switch(vn.op){case"==":case"in":Ft.set($t.fieldPath.canonicalString(),vn.value);break;case"not-in":case"!=":return Ft.set($t.fieldPath.canonicalString(),vn.value),Array.from(Ft.values())}return null}(I,_),B=function(it,ut){const Ft=[];let $t=!0;for(const vn of Hc(ut)){const ts=0===vn.kind?Ha(it,vn.fieldPath,it.startAt):Rd(it,vn.fieldPath,it.startAt);Ft.push(ts.value),$t&&($t=ts.inclusive)}return new fi(Ft,$t)}(I,_),K=function(it,ut){const Ft=[];let $t=!0;for(const vn of Hc(ut)){const ts=0===vn.kind?Rd(it,vn.fieldPath,it.endAt):Ha(it,vn.fieldPath,it.endAt);Ft.push(ts.value),$t&&($t=ts.inclusive)}return new fi(Ft,$t)}(I,_),le=this.hn(_,I,B),Se=this.hn(_,I,K),Qe=this.ln(_,I,F),ot=this.fn(_.indexId,R,le,B.inclusive,Se,K.inclusive,Qe);return ie.forEach(ot,it=>r.H(it,t.limit).next(ut=>{ut.forEach(Ft=>{const $t=Ke.fromSegments(Ft.documentKey);l.has($t)||(l=l.add($t),p.push($t))})}))}).next(()=>p)}return ie.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:jf(Nn.create(e.filters,"and")).map(r=>s0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),S=[];for(let R=0;R<_;++R){const F=t?this.dn(t[R/I]):Ng,B=this.wn(e,F,r[R%I],s),K=this._n(e,F,u[R%I],l),le=p.map(Se=>this.wn(e,F,Se,!0));S.push(...this.createRange(B,K,le))}return S}wn(e,t,r,s){const u=new go(e,Ke.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new go(e,Ke.empty(),t,r);return s?u.Je():u}an(e,t){const r=new Bf(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const p of u)r.tn(p)&&(!l||p.fields.length>l.fields.length)&&(l=p);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return ie.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(p){let _=new qn(Br.comparator),I=!1;for(const S of p.filters)for(const R of S.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?I=!0:_=_.add(R.field));for(const S of p.orderBy)S.field.isKeyField()||(_=_.add(S.field));return _.size+(I?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new qa;for(const s of Hc(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);ta.Ve._e(u,l)}return r.Qe()}dn(e){const t=new qa;return ta.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new qa;return ta.Ve._e(Wc(this.databaseId,t),r.He(function(s){const u=Hc(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new qa);let u=0;for(const l of Hc(e)){const p=r[u++];for(const _ of s)if(this.yn(t,l.fieldPath)&&Ty(p))s=this.pn(s,l,p);else{const I=_.He(l.kind);ta.Ve._e(p,I)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const p of s){const _=new qa;_.seed(p.Qe()),ta.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=x0(e),s=Qy(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ie.forEach(u,p=>s.get([p.indexId,this.uid]).next(_=>{l.push(function(I,S){const R=S?new rg(S.sequenceNumber,new Fi(rl(S.readTime),new Ke(Qo(S.documentKey)),S.largestBatchId)):rg.empty(),F=I.fields.map(([B,K])=>new wf(Br.fromServerFormat(B),K));return new an(I.indexId,I.collectionGroup,F,R)}(p,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Ut(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=x0(e),u=Qy(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ie.forEach(p,_=>u.put(Mg(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ie.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ie.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(p=>(r.set(s.collectionGroup,p),ie.forEach(p,_=>this.En(e,s,_).next(I=>{const S=this.An(u,_);return I.isEqual(S)?ie.resolve():this.vn(e,u,_,I,S)}))))})}Rn(e,t,r,s){return xg(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return xg(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=xg(e);let u=new qn(Gs);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,p)=>{u=u.add(new go(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}An(e,t){let r=new qn(Gs);const s=this.mn(t,e);if(null==s)return r;const u=Cd(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Ty(l))for(const p of l.arrayValue.values||[])r=r.add(new go(t.indexId,e.key,this.dn(p),s))}else r=r.add(new go(t.indexId,e.key,Ng,s));return r}vn(e,t,r,s,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(p,_,I,S,R){const F=p.getIterator(),B=_.getIterator();let K=ug(F),le=ug(B);for(;K||le;){let Se=!1,Qe=!1;if(K&&le){const ot=I(K,le);ot<0?Qe=!0:ot>0&&(Se=!0)}else null!=K?Qe=!0:Se=!0;Se?(S(le),le=ug(B)):Qe?(R(K),K=ug(F)):(K=ug(F),le=ug(B))}}(s,u,Gs,p=>{l.push(this.Rn(e,t,r,p))},p=>{l.push(this.Pn(e,t,r,p))}),ie.waitFor(l)}Tn(e){let t=1;return Qy(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,p)=>Gs(l,p)).filter((l,p,_)=>!p||0!==Gs(l,_[p-1]));const s=[];s.push(e);for(const l of r){const p=Gs(l,e),_=Gs(l,t);if(0===p)s[0]=e.Je();else if(p>0&&_<0)s.push(l),s.push(l.Je());else if(_>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,Ng,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,Ng,[]]))}return u}bn(e,t){return Gs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(_D)}getMinOffset(e,t){return ie.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||at())).next(_D)}}function Yy(n){return br(n,"collectionParents")}function xg(n){return br(n,"indexEntries")}function x0(n){return br(n,"indexConfiguration")}function Qy(n){return br(n,"indexState")}function _D(n){dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;wI(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Fi(e.readTime,e.documentKey,t)}const ED={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qi(e,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wD(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let p=0;const _=r.X({range:l},(S,R,F)=>(p++,F.delete()));u.push(_.next(()=>{dt(1===p)}));const I=[];for(const S of t.mutations){const R=vy(e,S.key.path,t.batchId);u.push(s.delete(R)),I.push(S.key)}return ie.waitFor(u).next(()=>I)}function P0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}Qi.DEFAULT_COLLECTION_PERCENTILE=10,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qi.DEFAULT=new Qi(41943040,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qi.DISABLED=new Qi(-1,0,0);class Xy{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Xy(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=cl(e),l=ul(e);return l.add({}).next(p=>{dt("number"==typeof p);const _=new Fy(p,t,r,s),I=function(F,B,K){const le=K.baseMutations.map(Qe=>Sg(F.fe,Qe)),Se=K.mutations.map(Qe=>Sg(F.fe,Qe));return{userId:B,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:le,mutations:Se}}(this.serializer,this.userId,_),S=[];let R=new qn((F,B)=>Ut(F.canonicalString(),B.canonicalString()));for(const F of s){const B=vy(this.userId,F.key.path,p);R=R.add(F.key.path.popLast()),S.push(l.put(I)),S.push(u.put(B,oR))}return R.forEach(F=>{S.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.Vn[p]=_.keys()}),ie.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return ul(e).get(t).next(r=>r?(dt(r.userId===this.userId),il(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ie.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ul(e).X({index:"userMutationsIndex",range:s},(l,p,_)=>{p.userId===this.userId&&(dt(p.batchId>=r),u=il(this.serializer,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ul(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).j("userMutationsIndex",t).next(r=>r.map(s=>il(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ig(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return cl(e).X({range:s},(l,p,_)=>{const[I,S,R]=l,F=Qo(S);if(I===this.userId&&t.path.isEqual(F))return ul(e).get(R).next(B=>{if(!B)throw at();dt(B.userId===this.userId),u.push(il(this.serializer,B))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Ut);const s=[];return t.forEach(u=>{const l=ig(this.userId,u.path),p=IDBKeyRange.lowerBound(l),_=cl(e).X({range:p},(I,S,R)=>{const[F,B,K]=I,le=Qo(B);F===this.userId&&u.path.isEqual(le)?r=r.add(K):R.done()});s.push(_)}),ie.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=ig(this.userId,r),l=IDBKeyRange.lowerBound(u);let p=new qn(Ut);return cl(e).X({range:l},(_,I,S)=>{const[R,F,B]=_,K=Qo(F);R===this.userId&&r.isPrefixOf(K)?K.length===s&&(p=p.add(B)):S.done()}).next(()=>this.Dn(e,p))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(ul(e).get(u).next(l=>{if(null===l)throw at();dt(l.userId===this.userId),r.push(il(this.serializer,l))}))}),ie.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return wD(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ie.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ie.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return cl(e).X({range:r},(u,l,p)=>{if(u[0]===this.userId){const _=Qo(u[1]);s.push(_)}else p.done()}).next(()=>{dt(0===s.length)})})}containsKey(e,t){return ID(e,this.userId,t)}xn(e){return $f(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ID(n,e,t){const r=ig(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return cl(n).X({range:u,Y:!0},(p,_,I)=>{const[S,R,F]=p;S===e&&R===s&&(l=!0),I.done()}).next(()=>l)}function ul(n){return br(n,"mutations")}function cl(n){return br(n,"documentMutations")}function $f(n){return br(n,"mutationQueues")}class Ju{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Ju(0)}static Mn(){return new Ju(-1)}}class Jy{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Ju(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>vt.fromTimestamp(new rr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fd(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(dt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Fd(e).X((l,p)=>{const _=Ag(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>ie.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Fd(e).X((r,s)=>{const u=Ag(s);t(u)})}$n(e){return Hf(e).get("targetGlobalKey").next(t=>(dt(null!==t),t))}On(e,t){return Hf(e).put("targetGlobalKey",t)}Fn(e,t){return Fd(e).put(sC(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Md(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Fd(e).X({range:s,index:"queryTargetsIndex"},(l,p,_)=>{const I=Ag(p);mg(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=ec(e);return t.forEach(l=>{const p=Ui(l.path);s.push(u.put({targetId:r,path:p})),s.push(this.referenceDelegate.addReference(e,r,l))}),ie.waitFor(s)}removeMatchingKeys(e,t,r){const s=ec(e);return ie.forEach(t,u=>{const l=Ui(u.path);return ie.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ec(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ec(e);let u=qt();return s.X({range:r,Y:!0},(l,p,_)=>{const I=Qo(l[1]),S=new Ke(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ui(t.path),s=IDBKeyRange.bound([r],[vI(r)],!1,!0);let u=0;return ec(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,p],_,I)=>{0!==l&&(u++,I.done())}).next(()=>u>0)}le(e,t){return Fd(e).get(t).next(r=>r?Ag(r):null)}}function Fd(n){return br(n,"targets")}function Hf(n){return br(n,"targetGlobal")}function ec(n){return br(n,"targetDocuments")}function DD([n,e],[t,r]){const s=Ut(n,t);return 0===s?Ut(e,r):s}class Pg{constructor(e){this.Ln=e,this.buffer=new qn(DD),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();DD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class TD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Gc(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ua(r)}yield t.Qn(3e5)}))}}class uC{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ie.resolve(js.ct);const r=new Pg(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(ED)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ED):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,p,_,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),s=this.params.maximumSequenceNumbersToCollect):s=R,l=Date.now(),this.nthSequenceNumber(e,s))).next(R=>(r=R,p=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(I=Date.now(),bd()<=io.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${s} in `+(p-l)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${R} documents in `+(I-_)+`ms\nTotal Duration: ${I-S}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:R})))}}class cC{constructor(e,t){this.db=e,this.garbageCollector=function bD(n,e){return new uC(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return zf(e,r)}removeReference(e,t,r){return zf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return zf(e,t)}Xn(e,t){return function(r,s){let u=!1;return $f(r).Z(l=>ID(r,l,s).next(p=>(p&&(u=!0),ie.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,p)=>{if(p<=t){const _=this.Xn(e,l).next(I=>{if(!I)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),ec(e).delete([0,Ui(l.path)])))});s.push(_)}}).next(()=>ie.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return zf(e,t)}Yn(e,t){const r=ec(e);let s,u=js.ct;return r.X({index:"documentTargetsIndex"},([l,p],{path:_,sequenceNumber:I})=>{0===l?(u!==js.ct&&t(new Ke(Qo(s)),u),u=I,s=_):u=js.ct}).next(()=>{u!==js.ct&&t(new Ke(Qo(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zf(n,e){return ec(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ui(e.path),sequenceNumber:r}));var r}class Og{constructor(){this.changes=new za(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ev{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return tc(e).put(r)}removeEntry(e,t,r){return tc(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],jy(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=jn.newInvalidDocument(t);return tc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kg(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:jn.newInvalidDocument(t)};return tc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(kg(t))},(s,u)=>{r={document:this.ts(t,u),size:P0(u)}}).next(()=>r)}getEntries(e,t){let r=Hs();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=Hs(),s=new Bn(Ke.comparator);return this.ns(e,t,(u,l)=>{const p=this.ts(u,l);r=r.insert(u,p),s=s.insert(u,P0(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return ie.resolve();let s=new qn(CD);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(kg(s.first()),kg(s.last())),l=s.getIterator();let p=l.getNext();return tc(e).X({index:"documentKeyIndex",range:u},(_,I,S)=>{const R=Ke.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;p&&CD(p,R)<0;)r(p,null),p=l.getNext();p&&p.isEqual(R)&&(r(p,I),p=l.hasNext()?l.getNext():null),p?S.G(kg(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),jy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tc(e).j(IDBKeyRange.bound(l,p,!0)).next(_=>{let I=Hs();for(const S of _){const R=this.ts(Ke.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);R.isFoundDocument()&&(Ny(t,R)||s.has(R.key))&&(I=I.insert(R.key,R))}return I})}getAllFromCollectionGroup(e,t,r,s){let u=Hs();const l=O0(t,r),p=O0(t,Fi.max());return tc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,p,!0)},(_,I,S)=>{const R=this.ts(Ke.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(R.key,R),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new dC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return SD(e).get("remoteDocumentGlobalKey").next(t=>(dt(!!t),t))}Zn(e,t){return SD(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function iC(n,e){let t;if(e.document)t=oD(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),s=rl(e.noDocument.readTime);t=jn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Ke.fromSegments(e.unknownDocument.path),s=rl(e.unknownDocument.version);t=jn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new rr(r[0],r[1]);return vt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return jn.newInvalidDocument(e)}}function lC(n){return new ev(n)}class dC extends Og{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new za(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new qn((u,l)=>Ut(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const p=this.us.get(u);if(t.push(this.os.removeEntry(e,u,p.readTime)),l.isValidDocument()){const _=gD(this.os.serializer,l);s=s.add(u.path.popLast());const I=P0(_);r+=I-p.size,t.push(this.os.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=gD(this.os.serializer,l.convertToNoDocument(vt.min()));t.push(this.os.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ie.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function SD(n){return br(n,"remoteDocumentGlobal")}function tc(n){return br(n,"remoteDocumentsV14")}function kg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function O0(n,e){const t=e.documentKey.path.toArray();return[n,jy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function CD(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Ut(t[u],r[u]),s)return s;return s=Ut(t.length,r.length),s||(s=Ut(t[t.length-2],r[r.length-2]),s||Ut(t[t.length-1],r[r.length-1]))}class hC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class k0{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Tg(r.mutation,s,ps.empty(),rr.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const s=Jo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=xy();return u.forEach((p,_)=>{l=l.insert(p,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Jo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,p)=>{t.set(l,p)})})}computeViews(e,t,r,s){let u=Hs();const l=Rf(),p=Rf();return t.forEach((_,I)=>{const S=r.get(I.key);s.has(I.key)&&(void 0===S||S.mutation instanceof tl)?u=u.insert(I.key,I):void 0!==S?(l.set(I.key,S.mutation.getFieldMask()),Tg(S.mutation,I,S.mutation.getFieldMask(),rr.now())):l.set(I.key,ps.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((I,S)=>l.set(I,S)),t.forEach((I,S)=>{var R;return p.set(I,new hC(S,null!==(R=l.get(I))&&void 0!==R?R:null))}),p))}recalculateAndSaveOverlays(e,t){const r=Rf();let s=new Bn((l,p)=>l-p),u=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const p of l)p.keys().forEach(_=>{const I=t.get(_);if(null===I)return;let S=r.get(_)||ps.empty();S=p.applyToLocalView(I,S),r.set(_,S);const R=(s.get(p.batchId)||qt()).add(_);s=s.insert(p.batchId,R)})}).next(()=>{const l=[],p=s.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),I=_.key,S=_.value,R=jI();S.forEach(F=>{if(!u.has(F)){const B=h0(t.get(F),r.get(F));null!==B&&R.set(F,B),u=u.add(F)}}),l.push(this.documentOverlayCache.saveOverlays(e,I,R))}return ie.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Mf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ie.resolve(Jo());let p=-1,_=u;return l.next(I=>ie.forEach(I,(S,R)=>(p<R.largestBatchId&&(p=R.largestBatchId),u.get(S)?ie.resolve():this.remoteDocumentCache.getEntry(e,S).next(F=>{_=_.insert(S,F)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,_,I,qt())).next(S=>({batchId:p,changes:u0(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let s=xy();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=xy();return this.indexManager.getCollectionParents(e,s).next(l=>ie.forEach(l,p=>{const _=(I=t,S=p.child(s),new Wu(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(I=>{I.forEach((S,R)=>{u=u.insert(S,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((p,_)=>{const I=_.getKey();null===u.get(I)&&(u=u.insert(I,jn.newInvalidDocument(I)))});let l=xy();return u.forEach((p,_)=>{const I=s.get(p);void 0!==I&&Tg(I.mutation,_,ps.empty(),rr.now()),Ny(t,_)&&(l=l.insert(p,_))}),l})}}class AD{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ie.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:sr(r.createTime)}),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:$y(r.bundledQuery),readTime:sr(r.readTime)}),ie.resolve();var r}}class MD{constructor(){this.overlays=new Bn(Ke.comparator),this.ls=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Jo();return ie.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=Jo(),u=t.length+1,l=new Ke(t.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const _=p.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Bn((I,S)=>I-S);const l=this.overlays.getIterator();for(;l.hasNext();){const I=l.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=u.get(I.largestBatchId);null===S&&(S=Jo(),u=u.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const p=Jo(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,S)=>p.set(I,S)),!(p.size()>=s)););return ie.resolve(p)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new m0(t,r));let u=this.ls.get(t);void 0===u&&(u=qt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class L0{constructor(){this.fs=new qn(pi.ds),this.ws=new qn(pi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new pi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new pi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ke(new sn([])),r=new pi(t,e),s=new pi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ke(new sn([])),r=new pi(t,e),s=new pi(t,e+1);let u=qt();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new pi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ke.comparator(e.key,t.key)||Ut(e.As,t.As)}static _s(e,t){return Ut(e.As,t.As)||Ke.comparator(e.key,t.key)}}class fC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new qn(pi.ds)}checkEmpty(e){return ie.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new Fy(u,t,r,s);this.mutationQueue.push(l);for(const p of s)this.Rs=this.Rs.add(new pi(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pi(t,0),s=new pi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const p=this.Ps(l.As);u.push(p)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qn(Ut);return t.forEach(s=>{const u=new pi(s,0),l=new pi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],p=>{r=r.add(p.As)})}),ie.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const l=new pi(new Ke(u),0);let p=new qn(Ut);return this.Rs.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(p=p.add(_.As)),!0)},l),ie.resolve(this.Vs(p))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){dt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ie.forEach(t.mutations,s=>{const u=new pi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new pi(t,0),s=this.Rs.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ie.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class RD{constructor(e){this.Ds=e,this.docs=new Bn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=Hs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():jn.newInvalidDocument(s))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Hs();const l=t.path,p=new Ke(l.child("")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:I,value:{document:S}}=_.getNext();if(!l.isPrefixOf(I.path))break;I.path.length>l.length+1||wI(V_(S),r)<=0||(s.has(S.key)||Ny(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,t,r,s){at()}Cs(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new F0(this)}getSize(e){return ie.resolve(this.size)}}class F0 extends Og{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class U0{constructor(e){this.persistence=e,this.xs=new za(t=>Md(t),mg),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new L0,this.targetCount=0,this.Ms=Ju.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ie.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Ju(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Fn(t),ie.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),s++)}),ie.waitFor(u).next(()=>s)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.ks.containsKey(t))}}class V0{constructor(e,t){this.$s={},this.overlays={},this.Os=new js(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new U0(this),this.indexManager=new yD,this.remoteDocumentCache=new RD(r=>this.referenceDelegate.Ls(r)),this.serializer=new pD(t),this.qs=new AD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new fC(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const s=new tv(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return ie.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class tv extends II{constructor(e){super(),this.currentSequenceNumber=e}}class Ud{constructor(e){this.persistence=e,this.Qs=new L0,this.js=null}static zs(e){return new Ud(e)}get Ws(){if(this.js)return this.js;throw at()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.Ws,r=>{const s=Ke.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,vt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ie.or([()=>ie.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class ND{constructor(e){this.serializer=e}O(e,t,r,s){const u=new Va("createOrUpgrade",t);var p;r<1&&s>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TI,{unique:!0}),p.createObjectStore("documentMutations"),xD(e),function(p){p.createObjectStore("remoteDocuments")}(e));let l=ie.resolve();return r<3&&s>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),xD(e)),l=l.next(()=>function(p){const _=p.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(p,_){return _.store("mutations").j().next(I=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TI,{unique:!0});const S=_.store("mutations"),R=I.map(F=>S.put(F));return ie.waitFor(R)})}(e,u))),l=l.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:q_});_.createIndex("collectionPathOverlayIndex",sg,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Ey,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:FS});_.createIndex("documentKeyIndex",US),_.createIndex("collectionGroupIndex",VS)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:H_}).createIndex("sequenceNumberIndex",z_,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:Tf}).createIndex("documentKeyIndex",G_,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=P0(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>ie.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(p=>ie.forEach(p,_=>{dt(_.userId===u.userId);const I=il(this.serializer,_);return wD(e,u.userId,I).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,p)=>{const _=new sn(l),I=[0,Ui(_)];u.push(t.get(I).next(S=>S?ie.resolve():t.put({targetId:0,path:Ui(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ie.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:BS});const r=t.store("collectionParents"),s=new Zy,u=l=>{if(s.add(l)){const p=l.lastSegment(),_=l.popLast();return r.put({collectionId:p,parent:Ui(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,p)=>{const _=new sn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,p,_],I)=>{const S=Qo(p);return u(S.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=Ag(s),l=sC(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const p=t.store("remoteDocumentsV14"),_=(I=l,I.document?new Ke(sn.fromString(I.document.name).popFirst(5)):I.noDocument?Ke.fromSegments(I.noDocument.path):I.unknownDocument?Ke.fromSegments(I.unknownDocument.path):at()).path.toArray();var I;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(p.put(S))}).next(()=>ie.waitFor(s))}si(e,t){const r=t.store("mutations"),s=lC(this.serializer),u=new V0(Ud.zs,this.serializer.fe);return r.j().next(l=>{const p=new Map;return l.forEach(_=>{var I;let S=null!==(I=p.get(_.userId))&&void 0!==I?I:qt();il(this.serializer,_).keys().forEach(R=>S=S.add(R)),p.set(_.userId,S)}),ie.forEach(p,(_,I)=>{const S=new di(I),R=Gy.de(this.serializer,S),F=u.getIndexManager(S),B=Xy.de(S,this.serializer,F,u.referenceDelegate);return new k0(s,B,R,F).recalculateAndSaveOverlaysForDocumentKeys(new ag(t,js.ct),_).next()})})}}function xD(n){n.createObjectStore("targetDocuments",{keyPath:uR}).createIndex("documentTargetsIndex",_y,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aR,{unique:!0}),n.createObjectStore("targetGlobal")}const B0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class j0{constructor(e,t,r,s,u,l,p,_,I,S,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=p,this.ri=I,this.oi=S,this.ui=R,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=F=>Promise.resolve(),!j0.D())throw new Me(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cC(this,s),this.di=t+"main",this.serializer=new pD(_),this.wi=new Zo(this.di,this.ui,new ND(this.serializer)),this.Bs=new Jy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lC(this.serializer),this.qs=new aC,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===S&&Tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,B0);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new js(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,me.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Gc(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Vd(e).get("owner").next(t=>ie.resolve(this.Ri(t)))}Pi(e){return qf(e).delete(this.clientId)}bi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=br(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),p=u.filter(_=>-1===l.indexOf(_));return ie.forEach(p,_=>s.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ie.resolve(!0):Vd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,B0);return!1}}return!(!this.networkEnabled||!this.inForeground)||qf(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ag(t,js.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>qf(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return Xy.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vD(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Gy.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?cR:14===l?og:13===l?wy:12===l?W_:11===l?Ad:void at();var l;let p;return this.wi.runTransaction(e,s,u,_=>(p=new ag(_,this.Os?this.Os.next():js.ct),"readwrite-primary"===t?this.Ti(p).next(I=>!!I||this.Ei(p)).next(I=>{if(!I)throw Tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Me(ue.FAILED_PRECONDITION,gy);return r(p)}).next(I=>this.vi(p).next(()=>I)):this.Oi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Oi(e){return Vd(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ue.FAILED_PRECONDITION,B0)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vd(e).put("owner",t)}static D(){return Zo.D()}Ai(e){const t=Vd(e);return t.get("owner").next(r=>this.Ri(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ie.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Qt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Tr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vd(n){return br(n,"owner")}function qf(n){return br(n,"clientMetadata")}function nv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class rv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=qt(),s=qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new rv(e,t.fromCache,r,s)}}class PD{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(o0(t))return ie.resolve(null);let r=Bi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=My(t,null,"F"),r=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=qt(...u);return this.Ui.getDocuments(e,l).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const I=this.ji(t,p);return this.zi(t,I,l,_.readTime)?this.Ki(e,My(t,null,"F")):this.Wi(e,I,t,_)}))})))}Gi(e,t,r,s){return o0(t)||s.isEqual(vt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(bd()<=io.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ry(t)),this.Wi(e,l,t,U_(s,-1)))})}ji(e,t){let r=new qn(WS(e));return t.forEach((s,u)=>{Ny(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return bd()<=io.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Ry(t)),this.Ui.getDocumentsMatchingQuery(e,t,Fi.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class pC{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new Bn(Ut),this.Yi=new za(u=>Md(u),mg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k0(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function $0(n,e,t,r){return new pC(n,e,t,r)}function iv(n,e){return sv.apply(this,arguments)}function sv(){return sv=(0,me.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],p=[];let _=qt();for(const I of s){l.push(I.batchId);for(const S of I.mutations)_=_.add(S.key)}for(const I of u){p.push(I.batchId);for(const S of I.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(r,_).next(I=>({er:I,removedBatchIds:l,addedBatchIds:p}))})})}),sv.apply(this,arguments)}function z0(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function G0(n,e,t){let r=qt(),s=qt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Hs();return t.forEach((p,_)=>{const I=u.get(p);_.isFoundDocument()!==I.isFoundDocument()&&(s=s.add(p)),_.isNoDocument()&&_.version.isEqual(vt.min())?(e.removeEntry(p,_.readTime),l=l.insert(p,_)):!I.isValidDocument()||_.version.compareTo(I.version)>0||0===_.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(_),l=l.insert(p,_)):Fe("LocalStore","Ignoring outdated watch update for ",p,". Current version:",I.version," Watch version:",_.version)}),{nr:l,sr:s}})}function OD(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bd(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,ie.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new Xu(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function jd(n,e,t){return q0.apply(this,arguments)}function q0(){return q0=(0,me.Z)(function*(n,e,t){const r=et(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Gc(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),q0.apply(this,arguments)}function ov(n,e,t){const r=et(n);let s=vt.min(),u=qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(p,_,I){const S=et(p),R=S.Yi.get(I);return void 0!==R?ie.resolve(S.Ji.get(R)):S.Bs.getTargetData(_,I)}(r,l,Bi(e)).next(p=>{if(p)return s=p.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,p.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:vt.min(),t?u:qt())).next(p=>(av(r,VI(e),p),{documents:p,ir:u})))}function kD(n,e){const t=et(n),r=et(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function W0(n,e){const t=et(n),r=t.Xi.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,U_(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(av(t,e,s),s))}function av(n,e,t){let r=n.Xi.get(e)||vt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function uv(){return uv=(0,me.Z)(function*(n,e,t,r){const s=et(n);let u=qt(),l=Hs();for(const I of t){const S=e.rr(I.metadata.name);I.document&&(u=u.add(S));const R=e.ur(I);R.setReadTime(e.cr(I.metadata.readTime)),l=l.insert(S,R)}const p=s.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Bd(s,(I=r,Bi(Nd(sn.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>G0(I,p,l).next(S=>(p.apply(I),S)).next(S=>s.Bs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>s.Bs.addMatchingKeys(I,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(I,S.nr,S.sr)).next(()=>S.nr)))}),uv.apply(this,arguments)}function FD(n,e){return cv.apply(this,arguments)}function cv(){return cv=(0,me.Z)(function*(n,e,t=qt()){const r=yield Bd(n,Bi($y(e.bundledQuery))),s=et(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=sr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const p=r.withResumeToken(Qr.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(p.targetId,p),s.Bs.updateTargetData(u,p).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),cv.apply(this,arguments)}function K0(n,e){return`firestore_clients_${n}_${e}`}function Z0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function lv(n,e){return`firestore_targets_${n}_${e}`}class Lg{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Me(s.error.code,s.error.message))),l?new Lg(e,t,s.state,u):(Tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ll{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Me(r.error.code,r.error.message))),u?new ll(e,r.state,s):(Tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class na{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Xc();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=DI(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new na(e,u):(Tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Y0{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Y0(t.clientId,t.onlineState):(Tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Q0{constructor(){this.activeTargetIds=Xc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fg{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Bn(Ut),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=K0(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Q0),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(K0(e.persistenceKey,s));if(u){const l=na.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(lv(this.persistenceKey,e));if(r){const s=ll.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lv(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=js.ct;if(null!=u)try{const p=JSON.parse(u);dt("number"==typeof p),l=p}catch(p){Tr("SharedClientState","Failed to read sequence number from WebStorage",p)}return l}(r.newValue);s!==js.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new Lg(this.currentUser,e,t,r),u=Z0(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=Z0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=lv(this.persistenceKey,e),u=new ll(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return na.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return Lg.ar(new di(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return ll.ar(s,t)}br(e){return Y0.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],p=[];return u.forEach(_=>{s.has(_)||l.push(_)}),s.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Wr(l,p).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Xc();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class dl{constructor(){this.Hr=new Q0,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Q0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class X0{Yr(e){}shutdown(){}}class UD{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Wf=null;function VD(){return null===Wf?Wf=268435456+Math.round(2147483648*Math.random()):Wf++,"0x"+Wf.toString(16)}const hR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mC{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const $i="WebChannelConnection";class BD extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=VD(),p=this.To(e,t);Fe("RestConnection",`Sending RPC '${e}' ${l}:`,p,r);const _={};return this.Eo(_,s,u),this.Ao(e,p,_,r).then(I=>(Fe("RestConnection",`Received RPC '${e}' ${l}: `,I),I),I=>{throw Ko("RestConnection",`RPC '${e}' ${l} failed with error: `,I,"url: ",p,"request:",r),I})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+$c,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${hR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=VD();return new Promise((l,p)=>{const _=new dI;_.setWithCredentials(!0),_.listenOnce(nR.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case k_.NO_ERROR:const S=_.getResponseJson();Fe($i,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),l(S);break;case k_.TIMEOUT:Fe($i,`RPC '${e}' ${u} timed out`),p(new Me(ue.DEADLINE_EXCEEDED,"Request time out"));break;case k_.HTTP_ERROR:const R=_.getStatus();if(Fe($i,`RPC '${e}' ${u} failed with status:`,R,"response text:",_.getResponseText()),R>0){let F=_.getResponseJson();Array.isArray(F)&&(F=F[0]);const B=F?.error;if(B&&B.status&&B.message){const K=function(le){const Se=le.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Se)>=0?Se:ue.UNKNOWN}(B.status);p(new Me(K,B.message))}else p(new Me(ue.UNKNOWN,"Server responded with status "+_.getStatus()))}else p(new Me(ue.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Fe($i,`RPC '${e}' ${u} completed.`)}});const I=JSON.stringify(s);Fe($i,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",I,r,15)})}Ro(e,t,r){const s=VD(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=jc(),p=eg(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},I=this.longPollingOptions.timeoutSeconds;void 0!==I&&(_.longPollingTimeout=Math.round(1e3*I)),this.useFetchStreams&&(_.xmlHttpFactory=new iR({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const S=u.join("");Fe($i,`Creating RPC '${e}' stream ${s}: ${S}`,_);const R=l.createWebChannel(S,_);let F=!1,B=!1;const K=new mC({ro:Se=>{B?Fe($i,`Not sending because RPC '${e}' stream ${s} is closed:`,Se):(F||(Fe($i,`Opening RPC '${e}' stream ${s} transport.`),R.open(),F=!0),Fe($i,`RPC '${e}' stream ${s} sending:`,Se),R.send(Se))},oo:()=>R.close()}),le=(Se,Qe,ot)=>{Se.listen(Qe,it=>{try{ot(it)}catch(ut){setTimeout(()=>{throw ut},0)}})};return le(R,L_.EventType.OPEN,()=>{B||Fe($i,`RPC '${e}' stream ${s} transport opened.`)}),le(R,L_.EventType.CLOSE,()=>{B||(B=!0,Fe($i,`RPC '${e}' stream ${s} transport closed`),K.wo())}),le(R,L_.EventType.ERROR,Se=>{B||(B=!0,Ko($i,`RPC '${e}' stream ${s} transport errored:`,Se),K.wo(new Me(ue.UNAVAILABLE,"The operation could not be completed")))}),le(R,L_.EventType.MESSAGE,Se=>{var Qe;if(!B){const ot=Se.data[0];dt(!!ot);const ut=ot.error||(null===(Qe=ot[0])||void 0===Qe?void 0:Qe.error);if(ut){Fe($i,`RPC '${e}' stream ${s} received error:`,ut);const Ft=ut.status;let $t=function(ts){const nu=zr[ts];if(void 0!==nu)return YI(nu)}(Ft),vn=ut.message;void 0===$t&&($t=ue.INTERNAL,vn="Unknown error status: "+Ft+" with message "+ut.message),B=!0,K.wo(new Me($t,vn)),R.close()}else Fe($i,`RPC '${e}' stream ${s} received:`,ot),K._o(ot)}}),le(p,rR.STAT_EVENT,Se=>{Se.stat===AS.PROXY?Fe($i,`RPC '${e}' stream ${s} detected buffering proxy`):Se.stat===AS.NOPROXY&&Fe($i,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{K.fo()},0),K}}function jD(){return typeof window<"u"?window:null}function Sr(){return typeof document<"u"?document:null}function Kf(n){return new tD(n,!0)}class J0{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class $D{constructor(e,t,r,s,u,l,p,_){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new J0(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,me.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,me.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Tr(t.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new Me(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,me.Z)(function*(){e.state=0,e.start()}))}tu(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HD extends $D{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function uD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:at(),s=e.targetChange.targetIds||[],u=function(_,I){return _.useProto3Json?(dt(void 0===I||"string"==typeof I),Qr.fromBase64String(I||"")):(dt(void 0===I||I instanceof Uint8Array),Qr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,p=l&&function(_){const I=void 0===_.code?ue.UNKNOWN:YI(_.code);return new Me(I,_.message||"")}(l);t=new E0(r,s,u,p||null)}else if("documentChange"in e){const r=e.documentChange,s=ea(n,r.document.name),u=sr(r.document.updateTime),l=r.document.createTime?sr(r.document.createTime):vt.min(),p=new Vi({mapValue:{fields:r.document.fields}}),_=jn.newFoundDocument(s,u,l,p);t=new bg(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=ea(n,r.document),u=r.readTime?sr(r.readTime):vt.min(),l=jn.newNoDocument(s,u);t=new bg([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=ea(n,r.document);t=new bg([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return at();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new QS(s,u);t=new _0(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return vt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?sr(u.readTime):vt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Uf(this.serializer),t.addTarget=function(s,u){let l;const p=u.target;if(l=yg(p)?{documents:cD(s,p)}:{query:A0(s,p)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=Lf(s,u.resumeToken);const _=T0(s,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(vt.min())>0){l.readTime=Yu(s,u.snapshotVersion.toTimestamp());const _=T0(s,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function eC(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Uf(this.serializer),t.removeTarget=e,this.Wo(t)}}class yC extends $D{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Cg(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(r,s){let u=sr(r.updateTime?r.updateTime:s);return u.isEqual(vt.min())&&(u=sr(s)),new ZS(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=sr(e.commitTime);return this.listener.cu(r,t)}return dt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Uf(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Sg(this.serializer,r))};this.Wo(t)}}class zD extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Me(ue.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(ue.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class vC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Tr(t),this.mu=!1):Fe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class _C{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(p=>{r.enqueueAndForget((0,me.Z)(function*(){var _;gi(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,me.Z)(function*(I){const S=et(I);S.vu.add(4),yield $d(S),S.bu.set("Unknown"),S.vu.delete(4),yield Zf(S)}),function(I){return _.apply(this,arguments)})(l))}))}),this.bu=new vC(r,s)}}function Zf(n){return eE.apply(this,arguments)}function eE(){return eE=(0,me.Z)(function*(n){if(gi(n))for(const e of n.Ru)yield e(!0)}),eE.apply(this,arguments)}function $d(n){return qD.apply(this,arguments)}function qD(){return qD=(0,me.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),qD.apply(this,arguments)}function Ug(n,e){const t=et(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),yo(t)?tE(t):qd(t).Ko()&&mo(t,e))}function Hd(n,e){const t=et(n),r=qd(t);t.Au.delete(e),r.Ko()&&WD(t,e),0===t.Au.size&&(r.Ko()?r.jo():gi(t)&&t.bu.set("Unknown"))}function mo(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qd(n).su(e)}function WD(n,e){n.Vu.qt(e),qd(n).iu(e)}function tE(n){n.Vu=new I0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),qd(n).start(),n.bu.gu()}function yo(n){return gi(n)&&!qd(n).Uo()&&n.Au.size>0}function gi(n){return 0===et(n).vu.size}function vo(n){n.Vu=void 0}function KD(n){return dv.apply(this,arguments)}function dv(){return dv=(0,me.Z)(function*(n){n.Au.forEach((e,t)=>{mo(n,e)})}),dv.apply(this,arguments)}function EC(n,e){return nE.apply(this,arguments)}function nE(){return nE=(0,me.Z)(function*(n,e){vo(n),yo(n)?(n.bu.Iu(e),tE(n)):n.bu.set("Unknown")}),nE.apply(this,arguments)}function wC(n,e,t){return rE.apply(this,arguments)}function rE(){return rE=(0,me.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof E0&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(s,u){const l=u.cause;for(const p of u.targetIds)s.Au.has(p)&&(yield s.remoteSyncer.rejectListen(p,l),s.Au.delete(p),s.Vu.removeTarget(p))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Yf(n,r)}else if(e instanceof bg?n.Vu.Ht(e):e instanceof _0?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(vt.min()))try{const r=yield z0(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const I=s.Au.get(_);I&&s.Au.set(_,I.withResumeToken(p.resumeToken,u))}}),l.targetMismatches.forEach((p,_)=>{const I=s.Au.get(p);if(!I)return;s.Au.set(p,I.withResumeToken(Qr.EMPTY_BYTE_STRING,I.snapshotVersion)),WD(s,p);const S=new Xu(I.target,p,_,I.sequenceNumber);mo(s,S)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield Yf(n,r)}var r}),rE.apply(this,arguments)}function Yf(n,e,t){return zd.apply(this,arguments)}function zd(){return zd=(0,me.Z)(function*(n,e,t){if(!Gc(e))throw e;n.vu.add(1),yield $d(n),n.bu.set("Offline"),t||(t=()=>z0(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Zf(n)}))}),zd.apply(this,arguments)}function ZD(n,e){return e().catch(t=>Yf(n,t,e))}function Gd(n){return iE.apply(this,arguments)}function iE(){return iE=(0,me.Z)(function*(n){const e=et(n),t=nc(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;IC(e);)try{const s=yield OD(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,YD(e,s)}catch(s){yield Yf(e,s)}sE(e)&&Vg(e)}),iE.apply(this,arguments)}function IC(n){return gi(n)&&n.Eu.length<10}function YD(n,e){n.Eu.push(e);const t=nc(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function sE(n){return gi(n)&&!nc(n).Uo()&&n.Eu.length>0}function Vg(n){nc(n).start()}function DC(n){return hv.apply(this,arguments)}function hv(){return hv=(0,me.Z)(function*(n){nc(n).hu()}),hv.apply(this,arguments)}function QD(n){return fv.apply(this,arguments)}function fv(){return fv=(0,me.Z)(function*(n){const e=nc(n);for(const t of n.Eu)e.uu(t.mutations)}),fv.apply(this,arguments)}function TC(n,e,t){return oE.apply(this,arguments)}function oE(){return oE=(0,me.Z)(function*(n,e,t){const r=n.Eu.shift(),s=g0.from(r,e,t);yield ZD(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Gd(n)}),oE.apply(this,arguments)}function XD(n,e){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,me.Z)(function*(n,e){var t;e&&nc(n).ou&&(yield(t=(0,me.Z)(function*(r,s){if(ZI(u=s.code)&&u!==ue.ABORTED){const l=r.Eu.shift();nc(r).Qo(),yield ZD(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Gd(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),sE(n)&&Vg(n)}),Qf.apply(this,arguments)}function aE(n,e){return pv.apply(this,arguments)}function pv(){return pv=(0,me.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=gi(t);t.vu.add(3),yield $d(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Zf(t)}),pv.apply(this,arguments)}function gv(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,me.Z)(function*(n,e){const t=et(n);e?(t.vu.delete(2),yield Zf(t)):e||(t.vu.add(2),yield $d(t),t.bu.set("Unknown"))}),mv.apply(this,arguments)}function qd(n){return n.Su||(n.Su=function(e,t,r){const s=et(e);return s.fu(),new HD(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:KD.bind(null,n),ao:EC.bind(null,n),nu:wC.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Su.Qo(),yo(n)?tE(n):n.bu.set("Unknown")):(yield n.Su.stop(),vo(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function nc(n){return n.Du||(n.Du=function(e,t,r){const s=et(e);return s.fu(),new yC(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:DC.bind(null,n),ao:XD.bind(null,n),au:QD.bind(null,n),cu:TC.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Du.Qo(),yield Gd(n)):(yield n.Du.stop(),n.Eu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class yv{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,p=new yv(e,t,l,s,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wd(n,e){if(Tr("AsyncQueue",`${e}: ${n}`),Gc(n))return new Me(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Xf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=xy(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new Xf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class JD{constructor(){this.Cu=new Bn(Ke.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):at():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jf{constructor(e,t,r,s,u,l,p,_,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new Jf(e,t,Xf.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_g(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class bC{constructor(){this.Nu=void 0,this.listeners=[]}}class SC{constructor(){this.queries=new za(e=>UI(e),_g),this.onlineState="Unknown",this.ku=new Set}}function uE(n,e){return cE.apply(this,arguments)}function cE(){return cE=(0,me.Z)(function*(n,e){const t=et(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new bC),s)try{u.Nu=yield t.onListen(r)}catch(l){const p=Wd(l,`Initialization of query '${Ry(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&hE(t)}),cE.apply(this,arguments)}function lE(n,e){return dE.apply(this,arguments)}function dE(){return dE=(0,me.Z)(function*(n,e){const t=et(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),dE.apply(this,arguments)}function CC(n,e){const t=et(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const p of l.listeners)p.$u(s)&&(r=!0);l.Nu=s}}r&&hE(t)}function AC(n,e,t){const r=et(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function hE(n){n.ku.forEach(e=>{e.next()})}class fE{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Jf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Jf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class MC{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class eT{constructor(e){this.serializer=e}rr(e){return ea(this.serializer,e)}ur(e){return e.metadata.exists?oD(this.serializer,e.document,!1):jn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return sr(e)}}class RC{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tT(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=sn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new eT(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const p=(t.get(l)||qt()).add(u);t.set(l,p)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function LD(n,e,t,r){return uv.apply(this,arguments)}(e.localStore,new eT(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield FD(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function tT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class nT{constructor(e){this.key=e}}class pE{constructor(e){this.key=e}}class gE{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qt(),this.mutatedKeys=qt(),this.tc=WS(e),this.ec=new Xf(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new JD,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,p=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,I="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,R)=>{const F=s.get(S),B=Ny(this.query,R)?R:null,K=!!F&&this.mutatedKeys.has(F.key),le=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Se=!1;F&&B?F.data.isEqual(B.data)?K!==le&&(r.track({type:3,doc:B}),Se=!0):this.rc(F,B)||(r.track({type:2,doc:B}),Se=!0,(_&&this.tc(B,_)>0||I&&this.tc(B,I)<0)&&(p=!0)):!F&&B?(r.track({type:0,doc:B}),Se=!0):F&&!B&&(r.track({type:1,doc:F}),Se=!0,(_||I)&&(p=!0)),Se&&(B?(l=l.add(B),u=le?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{ec:l,ic:r,zi:p,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((I,S)=>function(R,F){const B=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return B(R)-B(F)}(I.type,S.type)||this.tc(I.doc,S.doc)),this.oc(r);const l=t?this.uc():[],p=0===this.Zu.size&&this.current?1:0,_=p!==this.Xu;return this.Xu=p,0!==u.length||_?{snapshot:new Jf(this.query,e.ec,s,u,e.mutatedKeys,0===p,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new JD,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=qt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new pE(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new nT(r))}),t}hc(e){this.Yu=e.ir,this.Zu=qt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Jf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class rT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iT{constructor(e){this.key=e,this.fc=!1}}class sT{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new za(p=>UI(p),_g),this._c=new Map,this.mc=new Set,this.gc=new Bn(Ke.comparator),this.yc=new Map,this.Ic=new L0,this.Tc={},this.Ec=new Map,this.Ac=Ju.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function oT(n,e){return vv.apply(this,arguments)}function vv(){return vv=(0,me.Z)(function*(n,e){const t=TE(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield Bd(t.localStore,Bi(e)),p=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield _v(t,e,r,"current"===p,l.resumeToken),t.isPrimaryClient&&Ug(t.remoteStore,l)}return s}),vv.apply(this,arguments)}function _v(n,e,t,r,s){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,me.Z)(function*(n,e,t,r,s){n.Rc=(R,F,B)=>{return(K=(0,me.Z)(function*(le,Se,Qe,ot){let it=Se.view.sc(Qe);it.zi&&(it=yield ov(le.localStore,Se.query,!1).then(({documents:$t})=>Se.view.sc($t,it)));const ut=ot&&ot.targetChanges.get(Se.targetId),Ft=Se.view.applyChanges(it,le.isPrimaryClient,ut);return tp(le,Se.targetId,Ft.cc),Ft.snapshot}),function(le,Se,Qe,ot){return K.apply(this,arguments)})(n,R,F,B);var K};const u=yield ov(n.localStore,e,!0),l=new gE(e,u.ir),p=l.sc(u.documents),_=Vy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),I=l.applyChanges(p,n.isPrimaryClient,_);tp(n,t,I.cc);const S=new rT(e,t,l);return n.wc.set(e,S),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),I.snapshot}),Ev.apply(this,arguments)}function aT(n,e){return wv.apply(this,arguments)}function wv(){return wv=(0,me.Z)(function*(n,e){const t=et(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!_g(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield jd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Hd(t.remoteStore,r.targetId),ep(t,r.targetId)}).catch(Ua))):(ep(t,r.targetId),yield jd(t.localStore,r.targetId,!0))}),wv.apply(this,arguments)}function mE(){return mE=(0,me.Z)(function*(n,e,t){const r=bE(n);try{const s=yield function(u,l){const p=et(u),_=rr.now(),I=l.reduce((F,B)=>F.add(B.key),qt());let S,R;return p.persistence.runTransaction("Locally write mutations","readwrite",F=>{let B=Hs(),K=qt();return p.Zi.getEntries(F,I).next(le=>{B=le,B.forEach((Se,Qe)=>{Qe.isValidDocument()||(K=K.add(Se))})}).next(()=>p.localDocuments.getOverlayedDocuments(F,B)).next(le=>{S=le;const Se=[];for(const Qe of l){const ot=zs(Qe,S.get(Qe.key).overlayedDocument);null!=ot&&Se.push(new tl(Qe.key,ot,X_(ot.value.mapValue),ir.exists(!0)))}return p.mutationQueue.addMutationBatch(F,_,Se,l)}).next(le=>{R=le;const Se=le.applyToLocalDocumentSet(S,K);return p.documentOverlayCache.saveOverlays(F,le.batchId,Se)})}).then(()=>({batchId:R.batchId,changes:u0(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,p){let _=u.Tc[u.currentUser.toKey()];_||(_=new Bn(Ut)),_=_.insert(l,p),u.Tc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield Wa(r,s.changes),yield Gd(r.remoteStore)}catch(s){const u=Wd(s,"Failed to persist write");t.reject(u)}}),mE.apply(this,arguments)}function uT(n,e){return fl.apply(this,arguments)}function fl(){return fl=(0,me.Z)(function*(n,e){const t=et(n);try{const r=yield function gC(n,e){const t=et(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const p=[];e.targetChanges.forEach((S,R)=>{const F=s.get(R);if(!F)return;p.push(t.Bs.removeMatchingKeys(u,S.removedDocuments,R).next(()=>t.Bs.addMatchingKeys(u,S.addedDocuments,R)));let B=F.withSequenceNumber(u.currentSequenceNumber);var K,le,Se;null!==e.targetMismatches.get(R)?B=B.withResumeToken(Qr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):S.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(S.resumeToken,r)),s=s.insert(R,B),le=B,Se=S,(0===(K=F).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||Se.addedDocuments.size+Se.modifiedDocuments.size+Se.removedDocuments.size>0)&&p.push(t.Bs.updateTargetData(u,B))});let _=Hs(),I=qt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),p.push(G0(u,l,e.documentUpdates).next(S=>{_=S.nr,I=S.sr})),!r.isEqual(vt.min())){const S=t.Bs.getLastRemoteSnapshotVersion(u).next(R=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(S)}return ie.waitFor(p).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,I)).next(()=>_)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?dt(l.fc):s.removedDocuments.size>0&&(dt(l.fc),l.fc=!1))}),yield Wa(t,r,e)}catch(r){yield Ua(r)}}),fl.apply(this,arguments)}function NC(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const p=l.view.Mu(e);p.snapshot&&s.push(p.snapshot)}),function(u,l){const p=et(u);p.onlineState=l;let _=!1;p.queries.forEach((I,S)=>{for(const R of S.listeners)R.Mu(l)&&(_=!0)}),_&&hE(p)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function yE(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,me.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new Bn(Ke.comparator);l=l.insert(u,jn.newNoDocument(u,vt.min()));const p=qt().add(u),_=new xd(vt.min(),new Map,new Bn(Ut),l,p);yield uT(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),dT(r)}else yield jd(r.localStore,e,!1).then(()=>ep(r,e,t)).catch(Ua)}),cT.apply(this,arguments)}function lT(n,e){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,me.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const s=yield function H0(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,p,_,I){const S=_.batch,R=S.keys();let F=ie.resolve();return R.forEach(B=>{F=F.next(()=>I.getEntry(p,B)).next(K=>{const le=_.docVersions.get(B);dt(null!==le),K.version.compareTo(le)<0&&(S.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),I.addEntry(K)))})}),F.next(()=>l.mutationQueue.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let p=qt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(p=p.add(l.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);gl(t,r,null),_E(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wa(t,s)}catch(s){yield Ua(s)}}),Iv.apply(this,arguments)}function fR(n,e,t){return pl.apply(this,arguments)}function pl(){return pl=(0,me.Z)(function*(n,e,t){const r=et(n);try{const s=yield function(u,l){const p=et(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return p.mutationQueue.lookupMutationBatch(_,l).next(S=>(dt(null!==S),I=S.keys(),p.mutationQueue.removeMutationBatch(_,S))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,I,l)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>p.localDocuments.getDocuments(_,I))})}(r.localStore,e);gl(r,e,t),_E(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wa(r,s)}catch(s){yield Ua(s)}}),pl.apply(this,arguments)}function vE(){return vE=(0,me.Z)(function*(n,e){const t=et(n);gi(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=et(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>l.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=Wd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),vE.apply(this,arguments)}function _E(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function gl(n,e,t){const r=et(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function ep(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||Bg(n,r)})}function Bg(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(Hd(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),dT(n))}function tp(n,e,t){for(const r of t)r instanceof nT?(n.Ic.addReference(r.key,e),ys(n,r)):r instanceof pE?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||Bg(n,r.key)):at()}function ys(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.mc.add(r),dT(n))}function dT(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ke(sn.fromString(e)),r=n.Ac.next();n.yc.set(r,new iT(t)),n.gc=n.gc.insert(t,r),Ug(n.remoteStore,new Xu(Bi(Nd(t.path)),r,"TargetPurposeLimboResolution",js.ct))}}function Wa(n,e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,me.Z)(function*(n,e,t){const r=et(n),s=[],u=[],l=[];var p;r.wc.isEmpty()||(r.wc.forEach((p,_)=>{l.push(r.Rc(_,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I?.fromCache?"not-current":"current"),I){s.push(I);const S=rv.Li(_.targetId,I);u.push(S)}}))}),yield Promise.all(l),r.dc.nu(s),yield(p=(0,me.Z)(function*(_,I){const S=et(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ie.forEach(I,F=>ie.forEach(F.Fi,B=>S.persistence.referenceDelegate.addReference(R,F.targetId,B)).next(()=>ie.forEach(F.Bi,B=>S.persistence.referenceDelegate.removeReference(R,F.targetId,B)))))}catch(R){if(!Gc(R))throw R;Fe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of I){const F=R.targetId;if(!R.fromCache){const B=S.Ji.get(F),le=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);S.Ji=S.Ji.insert(F,le)}}}),function(_,I){return p.apply(this,arguments)})(r.localStore,u))}),Dv.apply(this,arguments)}function PC(n,e){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,me.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield iv(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(p=>{p.reject(new Me(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wa(t,r.er)}var s}),Tv.apply(this,arguments)}function hT(n,e){const t=et(n),r=t.yc.get(e);if(r&&r.fc)return qt().add(r.key);{let s=qt();const u=t._c.get(e);if(!u)return s;for(const l of u){const p=t.wc.get(l);s=s.unionWith(p.view.nc)}return s}}function fT(n,e){return bv.apply(this,arguments)}function bv(){return bv=(0,me.Z)(function*(n,e){const t=et(n),r=yield ov(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&tp(t,e.targetId,s.cc),s}),bv.apply(this,arguments)}function OC(n,e){return EE.apply(this,arguments)}function EE(){return EE=(0,me.Z)(function*(n,e){const t=et(n);return W0(t.localStore,e).then(r=>Wa(t,r))}),EE.apply(this,arguments)}function kC(n,e,t,r){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,me.Z)(function*(n,e,t,r){const s=et(n),u=yield function(l,p){const _=et(l),I=et(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.Sn(S,p).next(R=>R?_.localDocuments.getDocuments(S,R):ie.resolve(null)))}(s.localStore,e);var p;null!==u?("pending"===t?yield Gd(s.remoteStore):"acknowledged"===t||"rejected"===t?(gl(s,e,r||null),_E(s,e),p=e,et(et(s.localStore).mutationQueue).Cn(p)):at(),yield Wa(s,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),Zd.apply(this,arguments)}function wE(){return wE=(0,me.Z)(function*(n,e){const t=et(n);if(TE(t),bE(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield pT(t,r.toArray());t.vc=!0,yield gv(t.remoteStore,!0);for(const u of s)Ug(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(ep(t,l),jd(t.localStore,l,!0))),Hd(t.remoteStore,l)}),yield s,yield pT(t,r),function(u){const l=et(u);l.yc.forEach((p,_)=>{Hd(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Bn(Ke.comparator)}(t),t.vc=!1,yield gv(t.remoteStore,!1)}}),wE.apply(this,arguments)}function pT(n,e,t){return np.apply(this,arguments)}function np(){return np=(0,me.Z)(function*(n,e,t){const r=et(n),s=[],u=[];for(const l of e){let p;const _=r._c.get(l);if(_&&0!==_.length){p=yield Bd(r.localStore,Bi(_[0]));for(const I of _){const S=r.wc.get(I),R=yield fT(r,S);R.snapshot&&u.push(R.snapshot)}}else{const I=yield kD(r.localStore,l);p=yield Bd(r.localStore,I),yield _v(r,IE(I),l,!1,p.resumeToken)}s.push(p)}return r.dc.nu(u),s}),np.apply(this,arguments)}function IE(n){return FI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gT(n){const e=et(n);return et(et(e.localStore).persistence).$i()}function mT(n,e,t,r){return DE.apply(this,arguments)}function DE(){return DE=(0,me.Z)(function*(n,e,t,r){const s=et(n);if(s.vc)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield W0(s.localStore,VI(u[0])),p=xd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Qr.EMPTY_BYTE_STRING);yield Wa(s,l,p);break}case"rejected":yield jd(s.localStore,e,!0),ep(s,e,r);break;default:at()}}),DE.apply(this,arguments)}function jg(n,e,t){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,me.Z)(function*(n,e,t){const r=TE(n);if(r.vc){for(const s of e){if(r._c.has(s)){Fe("SyncEngine","Adding an already active target "+s);continue}const u=yield kD(r.localStore,s),l=yield Bd(r.localStore,u);yield _v(r,IE(u),l.targetId,!1,l.resumeToken),Ug(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield jd(r.localStore,s,!1).then(()=>{Hd(r.remoteStore,s),ep(r,s)}).catch(Ua))}}),Yd.apply(this,arguments)}function TE(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yE.bind(null,e),e.dc.nu=CC.bind(null,e.eventManager),e.dc.Pc=AC.bind(null,e.eventManager),e}function bE(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fR.bind(null,e),e}class rp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.serializer=Kf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $0(this.persistence,new PD,e.initialUser,this.serializer)}createPersistence(e){return new V0(Ud.zs,this.serializer)}createSharedClientState(e){return new dl}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Sv extends rp{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield bE(r.Vc.syncEngine),yield Gd(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return $0(this.persistence,new PD,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new TD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new kS(t,this.persistence);return new $_(e.asyncQueue,r)}createPersistence(e){const t=nv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Qi.withCacheSize(this.cacheSizeBytes):Qi.DEFAULT;return new j0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jD(),Sr(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new dl}}class vT extends Sv{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof Fg&&(r.sharedClientState.syncEngine={jr:kC.bind(null,s),zr:mT.bind(null,s),Wr:jg.bind(null,s),$i:gT.bind(null,s),Qr:OC.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,me.Z)(function*(l){yield function LC(n,e){return wE.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jD();if(!Fg.D(t))throw new Me(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=nv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qd{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>NC(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=PC.bind(null,r.syncEngine),yield gv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new SC}createDatastore(e){const t=Kf(e.databaseInfo.databaseId),r=new BD(e.databaseInfo);return new zD(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=p=>NC(this.syncEngine,p,0),l=UD.D()?new UD:new X0,new _C(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,p,_,I){const S=new sT(r,s,u,l,p,_);return I&&(S.vc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=et(t);Fe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield $d(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _T(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Cv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class pR{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Yr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new MC(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,me.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class gR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,me.Z)(function*(u,l){const p=et(u),_=Uf(p.serializer)+"/documents",I={documents:l.map(B=>Ff(p.serializer,B))},S=yield p.vo("BatchGetDocuments",_,I,l.length),R=new Map;S.forEach(B=>{const K=function aD(n,e){return"found"in e?function(t,r){dt(!!r.found);const s=ea(t,r.found.name),u=sr(r.found.updateTime),l=r.found.createTime?sr(r.found.createTime):vt.min(),p=new Vi({mapValue:{fields:r.found.fields}});return jn.newFoundDocument(s,u,l,p)}(n,e):"missing"in e?function(t,r){dt(!!r.missing),dt(!!r.readTime);const s=ea(t,r.missing),u=sr(r.readTime);return jn.newNoDocument(s,u)}(n,e):at()}(p.serializer,B);R.set(K.key.toString(),K)});const F=[];return l.forEach(B=>{const K=R.get(B.toString());dt(!!K),F.push(K)}),F}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Of(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ke.fromPath(s);e.mutations.push(new p0(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(s,u){const l=et(s),p=Uf(l.serializer)+"/documents",_={writes:u.map(I=>Sg(l.serializer,I))};yield l.Io("Commit",p,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Me(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mR{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new J0(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,me.Z)(function*(){const t=new gR(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!Df(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ZI(t)}return!1}}class yR{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=di.UNAUTHENTICATED,this.clientId=yI.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,me.Z)(function*(p){Fe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Wd(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function $g(n,e){return ip.apply(this,arguments)}function ip(){return ip=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,me.Z)(function*(u){r.isEqual(u)||(yield iv(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),ip.apply(this,arguments)}function SE(n,e){return CE.apply(this,arguments)}function CE(){return CE=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Xd(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>aE(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>aE(e.remoteStore,u)),n._onlineComponents=e}),CE.apply(this,arguments)}function AE(n){return"FirebaseError"===n.name?n.code===ue.FAILED_PRECONDITION||n.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Xd(n){return ME.apply(this,arguments)}function ME(){return ME=(0,me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $g(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!AE(t))throw t;Ko("Error using user provided cache. Falling back to memory cache: "+t),yield $g(n,new rp)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield $g(n,new rp);return n._offlineComponents}),ME.apply(this,arguments)}function Av(n){return RE.apply(this,arguments)}function RE(){return RE=(0,me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield SE(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield SE(n,new Qd))),n._onlineComponents}),RE.apply(this,arguments)}function ET(n){return Xd(n).then(e=>e.persistence)}function NE(n){return Xd(n).then(e=>e.localStore)}function wT(n){return Av(n).then(e=>e.remoteStore)}function Mv(n){return Av(n).then(e=>e.syncEngine)}function sp(n){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,me.Z)(function*(n){const e=yield Av(n),t=e.eventManager;return t.onListen=oT.bind(null,e.syncEngine),t.onUnlisten=aT.bind(null,e.syncEngine),t}),Jd.apply(this,arguments)}function xE(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,u,l,p,_){const I=new Cv({next:R=>{u.enqueueAndForget(()=>lE(s,S));const F=R.docs.has(l);!F&&R.fromCache?_.reject(new Me(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&R.fromCache&&p&&"server"===p.source?_.reject(new Me(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(R)},error:R=>_.reject(R)}),S=new fE(Nd(l.path),I,{includeMetadataChanges:!0,Ku:!0});return uE(s,S)}(yield sp(n),n.asyncQueue,e,t,r)})),r.promise}function PE(n,e,t={}){const r=new Yr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(s,u,l,p,_){const I=new Cv({next:R=>{u.enqueueAndForget(()=>lE(s,S)),R.fromCache&&"server"===p.source?_.reject(new Me(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(R)},error:R=>_.reject(R)}),S=new fE(l,I,{includeMetadataChanges:!0,Ku:!0});return uE(s,S)}(yield sp(n),n.asyncQueue,e,t,r)})),r.promise}function kE(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const bT=new Map;function LE(n,e,t){if(!t)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ST(n,e,t,r){if(!0===e&&!0===r)throw new Me(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Rv(n){if(!Ke.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CT(n){if(Ke.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Hg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hg(n);throw new Me(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AT(n,e){if(e<=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class MT{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ST("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=kE(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Me(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Me(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Me(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zg{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MT(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new RS;switch(t.type){case"firstParty":return new xS(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bT.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),bT.delete(e),t.terminate())}(this),Promise.resolve()}}class Kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ka(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class Ti{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ti(this.firestore,e,this._query)}}class Ka extends Ti{constructor(e,t,r){super(e,t,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new Ke(e))}withConverter(e){return new Ka(this.firestore,e,this._path)}}function FE(n,e,...t){if(n=(0,Qt.m9)(n),LE("collection","path",e),n instanceof zg){const r=sn.fromString(e,...t);return CT(r),new Ka(n,null,r)}{if(!(n instanceof Kn||n instanceof Ka))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return CT(r),new Ka(n.firestore,null,r)}}function Nv(n,e,...t){if(n=(0,Qt.m9)(n),1===arguments.length&&(e=yI.A()),LE("doc","path",e),n instanceof zg){const r=sn.fromString(e,...t);return Rv(r),new Kn(n,null,new Ke(r))}{if(!(n instanceof Kn||n instanceof Ka))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return Rv(r),new Kn(n.firestore,n instanceof Ka?n.converter:null,new Ke(r))}}function xT(n,e){return n=(0,Qt.m9)(n),e=(0,Qt.m9)(e),(n instanceof Kn||n instanceof Ka)&&(e instanceof Kn||e instanceof Ka)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function xv(n,e){return n=(0,Qt.m9)(n),e=(0,Qt.m9)(e),n instanceof Ti&&e instanceof Ti&&n.firestore===e.firestore&&_g(n._query,e._query)&&n.converter===e.converter}class HC{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new J0(this,"async_queue_retry"),this.Xc=()=>{const t=Sr();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Sr();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Sr();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Yr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,me.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Gc(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Tr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=yv.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&at()}verifyOperationInProgress(){}sa(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function UE(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class zC{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ln extends zg{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new HC,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||OT(this),this._firestoreClient.terminate()}}function dr(n){return n._firestoreClient||OT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OT(n){var e,t,r;const s=n._freezeSettings(),u=(p=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new lR(n._databaseId,p,n._persistenceKey,(I=s).host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,kE(I.experimentalLongPollingOptions),I.useFetchStreams));var p,I;n._firestoreClient=new yR(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function kT(n,e,t){const r=new Yr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield $g(n,t),yield SE(n,e),r.resolve()}catch(s){const u=s;if(!AE(u))throw u;Ko("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function FT(n){if(n._initialized||n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Za(Qr.fromBase64String(e))}catch(t){throw new Me(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Za(Qr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ya{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ml{constructor(e){this._methodName=e}}class Gg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const BT=/^__.*__$/;class jT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pf(e,this.data,t,this.fieldTransforms)}}class $T{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function HT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class Pv{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return vl(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(HT(this.ca)&&BT.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class YC{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Kf(e)}ya(e,t,r,s=!1){return new Pv({ca:e,methodName:t,ga:r,path:Br.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yl(n){const e=n._freezeSettings(),t=Kf(n._databaseId);return new YC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $E(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);qE("Data must be an object, but it was:",l,r);const p=qT(r,l);let _,I;if(u.merge)_=new ps(l.fieldMask),I=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const R of u.mergeFields){const F=qg(e,R,t);if(!l.contains(F))throw new Me(ue.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);WE(S,F)||S.push(F)}_=new ps(S),I=l.fieldTransforms.filter(R=>_.covers(R.field))}else _=null,I=l.fieldTransforms;return new jT(new Vi(p),_,I)}class ap extends ml{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ap}}function zT(n,e,t){return new Pv({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class HE extends ml{_toFieldTransform(e){return new xf(e.path,new Jc)}isEqual(e){return e instanceof HE}}class vR extends ml{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=zT(this,e,!0),r=this.pa.map(u=>th(u,t)),s=new Zu(r);return new xf(e.path,s)}isEqual(e){return this===e}}class QC extends ml{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=zT(this,e,!0),r=this.pa.map(u=>th(u,t)),s=new el(r);return new xf(e.path,s)}isEqual(e){return this===e}}class XC extends ml{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Nf(e.serializer,wg(e.serializer,this.Ia));return new xf(e.path,t)}isEqual(e){return this===e}}function zE(n,e,t,r){const s=n.ya(1,e,t);qE("Data must be an object, but it was:",s,r);const u=[],l=Vi.empty();Hu(r,(_,I)=>{const S=Ov(e,_,t);I=(0,Qt.m9)(I);const R=s.da(S);if(I instanceof ap)u.push(S);else{const F=th(I,R);null!=F&&(u.push(S),l.set(S,F))}});const p=new ps(u);return new $T(l,p,s.fieldTransforms)}function GE(n,e,t,r,s,u){const l=n.ya(1,e,t),p=[qg(e,r,t)],_=[s];if(u.length%2!=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(qg(e,u[F])),_.push(u[F+1]);const I=[],S=Vi.empty();for(let F=p.length-1;F>=0;--F)if(!WE(I,p[F])){const B=p[F];let K=_[F];K=(0,Qt.m9)(K);const le=l.da(B);if(K instanceof ap)I.push(B);else{const Se=th(K,le);null!=Se&&(I.push(B),S.set(B,Se))}}const R=new ps(I);return new $T(S,R,l.fieldTransforms)}function GT(n,e,t,r=!1){return th(t,n.ya(r?4:3,e))}function th(n,e){if(WT(n=(0,Qt.m9)(n)))return qE("Unsupported field value:",e,n),qT(n,e);if(n instanceof ml)return function(t,r){if(!HT(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let p=th(l,r.wa(u));null==p&&(p={nullValue:"NULL_VALUE"}),s.push(p),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Qt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wg(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=rr.fromDate(t);return{timestampValue:Yu(r.serializer,s)}}if(t instanceof rr){const s=new rr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Yu(r.serializer,s)}}if(t instanceof Gg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Za)return{bytesValue:Lf(r.serializer,t._byteString)};if(t instanceof Kn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rD(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${Hg(t)}`)}(n,e)}function qT(n,e){const t={};return SI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hu(n,(r,s)=>{const u=th(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function WT(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof rr||n instanceof Gg||n instanceof Za||n instanceof Kn||n instanceof ml)}function qE(n,e,t){if(!WT(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Hg(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function qg(n,e,t){if((e=(0,Qt.m9)(e))instanceof Ya)return e._internalPath;if("string"==typeof e)return Ov(n,e);throw vl("Field path arguments must be of type string or ",n,!1,void 0,t)}const JC=new RegExp("[~\\*/\\[\\]]");function Ov(n,e,t){if(e.search(JC)>=0)throw vl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ya(...e.split("."))._internalPath}catch{throw vl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vl(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${s}`),_+=")"),new Me(ue.INVALID_ARGUMENT,p+n+_)}function WE(n,e){return n.some(t=>t.isEqual(e))}class up{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new KT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class KT extends up{data(){return super.data()}}function Wg(n,e){return"string"==typeof e?Ov(n,e):e instanceof Ya?e._internalPath:e._delegate._internalPath}function KE(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZE{}class Kg extends ZE{}function nh(n,e,...t){let r=[];e instanceof ZE&&r.push(e),r=r.concat(t),function(s){const u=s.filter(p=>p instanceof cp).length,l=s.filter(p=>p instanceof kv).length;if(u>1||u>0&&l>0)throw new Me(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class kv extends Kg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new kv(e,t,r)}_apply(e){const t=this._parse(e);return YT(e._query,t),new Ti(e.firestore,e.converter,a0(e._query,t))}_parse(e){const t=yl(e.firestore);return function(s,u,l,p,_,I,S){let R;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){JE(S,I);const F=[];for(const B of S)F.push(Yg(p,s,B));R={arrayValue:{values:F}}}else R=Yg(p,s,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||JE(S,I),R=GT(l,"where",S,"in"===I||"not-in"===I);return tn.create(_,I,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class cp extends ZE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cp(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Nn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const p of l)YT(u,p),u=a0(u,p)}(e._query,t),new Ti(e.firestore,e.converter,a0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class YE extends Kg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new YE(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Kc(s,u);return function(p,_){if(null===vg(p)){const I=Yc(p);null!==I&&ew(0,I,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ti(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Wu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Lv extends Kg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Lv(e,t,r)}_apply(e){return new Ti(e.firestore,e.converter,My(e._query,this._limit,this._limitType))}}class XE extends Kg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new XE(e,t,r)}_apply(e){const t=ZT(e,this.type,this._docOrFields,this._inclusive);return new Ti(e.firestore,e.converter,(s=t,new Wu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class _l extends Kg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new _l(e,t,r)}_apply(e){const t=ZT(e,this.type,this._docOrFields,this._inclusive);return new Ti(e.firestore,e.converter,(s=t,new Wu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function ZT(n,e,t,r){if(t[0]=(0,Qt.m9)(t[0]),t[0]instanceof up)return function(s,u,l,p,_){if(!p)throw new Me(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const I=[];for(const S of Qc(s))if(S.field.isKeyField())I.push(Wc(u,p.key));else{const R=p.data.field(S.field);if(lg(R))throw new Me(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const F=S.field.canonicalString();throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}I.push(R)}return new fi(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=yl(n.firestore);return function(u,l,p,_,I,S){const R=u.explicitOrderBy;if(I.length>R.length)throw new Me(ue.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let B=0;B<I.length;B++){const K=I[B];if(R[B].field.isKeyField()){if("string"!=typeof K)throw new Me(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof K}`);if(!Mf(u)&&-1!==K.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${K}' contains a slash.`);const le=u.path.child(sn.fromString(K));if(!Ke.isDocumentKey(le))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const Se=new Ke(le);F.push(Wc(l,Se))}else{const le=GT(p,_,K);F.push(le)}}return new fi(F,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function Yg(n,e,t){if("string"==typeof(t=(0,Qt.m9)(t))){if(""===t)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mf(e)&&-1!==t.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!Ke.isDocumentKey(r))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wc(n,new Ke(r))}if(t instanceof Kn)return Wc(n,t._key);throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hg(t)}.`)}function JE(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YT(n,e){if(e.isInequality()){const r=Yc(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=vg(n);null!==u&&ew(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Me(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ew(n,e,t){if(!t.isEqual(e))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class tw{convertValue(e,t="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Hu(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Gg(Wn(e.latitude),Wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Iy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sf(e));default:return null}}convertTimestamp(e){const t=$a(e);return new rr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);dt(fD(r));const s=new qc(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return s.isEqual(t)||Tr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Fv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class QT extends tw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}class rh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qa extends up{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Wg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class lp extends Qa{data(e={}){return super.data(e)}}class Xa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new rh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lp(this._firestore,this._userDataWriter,r.key,r,new rh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new lp(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const p=new lp(r._firestore,r._userDataWriter,l.doc.key,l.doc,new rh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),I=u.indexOf(l.doc.key)),{type:JT(l.type),doc:p,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function JT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function eb(n,e){return n instanceof Qa&&e instanceof Qa?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xa&&e instanceof Xa&&n._firestore===e._firestore&&xv(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class rc extends tw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Za(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function Uv(n,e,t){n=nn(n,Kn);const r=nn(n.firestore,Ln),s=Fv(n.converter,e,t);return ih(r,[$E(yl(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,ir.none())])}function Vv(n,e,t,...r){n=nn(n,Kn);const s=nn(n.firestore,Ln),u=yl(s);let l;return l="string"==typeof(e=(0,Qt.m9)(e))||e instanceof Ya?GE(u,"updateDoc",n._key,e,t,r):zE(u,"updateDoc",n._key,e),ih(s,[l.toMutation(n._key,ir.exists(!0))])}function rb(n,...e){var t,r,s;n=(0,Qt.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||UE(e[l])||(u=e[l],l++);const p={includeMetadataChanges:u.includeMetadataChanges};if(UE(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(s=R.complete)||void 0===s?void 0:s.bind(R)}let _,I,S;if(n instanceof Kn)I=nn(n.firestore,Ln),S=Nd(n._key.path),_={next:R=>{e[l]&&e[l](Xg(I,n,R))},error:e[l+1],complete:e[l+2]};else{const R=nn(n,Ti);I=nn(R.firestore,Ln),S=R._query;const F=new rc(I);_={next:B=>{e[l]&&e[l](new Xa(I,F,R,B))},error:e[l+1],complete:e[l+2]},KE(n._query)}return function(R,F,B,K){const le=new Cv(K),Se=new fE(F,le,B);return R.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return uE(yield sp(R),Se)})),()=>{le.Dc(),R.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return lE(yield sp(R),Se)}))}}(dr(I),S,p,_)}function ih(n,e){return function(t,r){const s=new Yr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function Kd(n,e,t){return mE.apply(this,arguments)}(yield Mv(t),r,s)})),s.promise}(dr(n),e)}function Xg(n,e,t){const r=t.docs.get(e._key),s=new rc(n);return new Qa(n,s,e._key,r,new rh(t.hasPendingWrites,t.fromCache),e.converter)}const AR={maxAttempts:5};class mA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yl(e)}set(e,t,r){this._verifyNotCommitted();const s=ic(e,this._firestore),u=Fv(s.converter,t,r),l=$E(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,ir.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=ic(e,this._firestore);let l;return l="string"==typeof(t=(0,Qt.m9)(t))||t instanceof Ya?GE(this._dataReader,"WriteBatch.update",u._key,t,r,s):zE(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ic(e,this._firestore);return this._mutations=this._mutations.concat(new Of(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ic(n,e){if((n=(0,Qt.m9)(n)).firestore!==e)throw new Me(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class sw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yl(e)}get(e){const t=ic(e,this._firestore),r=new QT(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return at();const u=s[0];if(u.isFoundDocument())return new up(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new up(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const s=ic(e,this._firestore),u=Fv(s.converter,t,r),l=$E(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=ic(e,this._firestore);let l;return l="string"==typeof(t=(0,Qt.m9)(t))||t instanceof Ya?GE(this._dataReader,"Transaction.update",u._key,t,r,s):zE(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=ic(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ic(e,this._firestore),r=new rc(this._firestore);return super.get(e).then(s=>new Qa(this._firestore,r,t._key,s._document,new rh(!1,!1),t.converter))}}function em(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function aw(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function ub(){if(!function K_(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){$c=as.SDK_VERSION,(0,as._registerComponent)(new ro.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Ln(new mI(t.getProvider("auth-internal")),new PS(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Me(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(p.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,as.registerVersion)(hI,"3.13.0",n),(0,as.registerVersion)(hI,"3.13.0","esm2017")}();class El{constructor(e){this._delegate=e}static fromBase64String(e){return ub(),new El(Za.fromBase64String(e))}static fromUint8Array(e){return aw(),new El(Za.fromUint8Array(e))}toBase64(){return ub(),this._delegate.toBase64()}toUint8Array(){return aw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function tm(n){return function PR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class cb{enableIndexedDbPersistence(e,t){return function WC(n,e){FT(n=nn(n,Ln));const t=dr(n);if(t._uninitializedComponentsProvider)throw new Me(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ko("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new Qd;return kT(t,s,new Sv(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function VE(n){FT(n=nn(n,Ln));const e=dr(n);if(e._uninitializedComponentsProvider)throw new Me(ue.FAILED_PRECONDITION,"SDK cache is already specified.");Ko("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Qd;return kT(e,r,new vT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function KC(n){if(n._initialized&&!n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Zo.D())return Promise.resolve();const s=r+"main";yield Zo.delete(s)}),function(r){return t.apply(this,arguments)})(nv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lb{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ko("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function RT(n,e,t,r={}){var s;const u=(n=nn(n,zg))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let p,_;if("string"==typeof r.mockUserToken)p=r.mockUserToken,_=di.MOCK_USER;else{p=(0,Qt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new Me(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new di(I)}n._authCredentials=new NS(new gI(p,_))}}(this._delegate,e,t,r)}enableNetwork(){return function LT(n){return function UC(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ET(n),t=yield wT(n);return e.setNetworkEnabled(!0),function(r){const s=et(r);return s.vu.delete(0),Zf(s)}(t)}))}(dr(n=nn(n,Ln)))}(this._delegate)}disableNetwork(){return function ZC(n){return function DT(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ET(n),t=yield wT(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(s){const u=et(s);u.vu.add(0),yield $d(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(dr(n=nn(n,Ln)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ST("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function eh(n){return function(e){const t=new Yr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function xC(n,e){return vE.apply(this,arguments)}(yield Mv(e),t)})),t.promise}(dr(n=nn(n,Ln)))}(this._delegate)}onSnapshotsInSync(e){return function cA(n,e){return function jC(n,e){const t=new Cv(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield sp(n),s=t,et(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield sp(n),s=t,void et(r).ku.delete(s);var r,s}))}}(dr(n=nn(n,Ln)),UE(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sh(this,FE(this._delegate,e))}catch(t){throw Ji(t,"collection()","Firestore.collection()")}}doc(e){try{return new ra(this,Nv(this._delegate,e))}catch(t){throw Ji(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Hi(this,function NT(n,e){if(n=nn(n,zg),LE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ti(n,null,(t=e,new Wu(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ji(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function MR(n,e,t){n=nn(n,Ln);const r=Object.assign(Object.assign({},AR),t);return function(s){if(s.maxAttempts<1)throw new Me(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const p=new Yr;return s.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const _=yield function IT(n){return Av(n).then(e=>e.datastore)}(s);new mR(s.asyncQueue,_,l,u,p).run()})),p.promise}(dr(n),s=>e(new sw(n,s)),r)}(this._delegate,t=>e(new db(this,t)))}batch(){return dr(this._delegate),new uw(new mA(this._delegate,e=>ih(this._delegate,e)))}loadBundle(e){return function BE(n,e){const t=dr(n=nn(n,Ln)),r=new zC;return function OE(n,e,t,r){const s=function(u,l){let p;return p="string"==typeof u?QI().encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return _T(_,I);if(_ instanceof ArrayBuffer)return _T(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new pR(_,l);var _}(t,Kf(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function FC(n,e,t){const r=et(n);var s;(s=(0,me.Z)(function*(u,l,p){try{const _=yield l.getMetadata();if(yield function(F,B){const K=et(F),le=sr(B.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",Se=>K.qs.getBundleMetadata(Se,B.id)).then(Se=>!!Se&&Se.createTime.compareTo(le)>=0)}(u.localStore,_))return yield l.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(tT(_));const I=new RC(_,u.localStore,l.serializer);let S=yield l.bc();for(;S;){const F=yield I.zu(S);F&&p._updateProgress(F),S=yield l.bc()}const R=yield I.complete();return yield Wa(u,R.Ju,void 0),yield function(F,B){const K=et(F);return K.persistence.runTransaction("Save bundle","readwrite",le=>K.qs.saveBundleMetadata(le,B))}(u.localStore,_),p._completeWith(R.progress),Promise.resolve(R.Hu)}catch(_){return Ko("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var F}),function(u,l,p){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield Mv(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function jE(n,e){return function $C(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const s=et(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield NE(n),e)}))}(dr(n=nn(n,Ln)),e).then(t=>t?new Ti(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Hi(this,t):null)}}class nm extends tw{constructor(e){super(),this.firestore=e}convertBytes(e){return new El(new Za(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ra.forKey(t,this.firestore,null)}}class db{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nm(e)}get(e){const t=wl(e);return this._delegate.get(t).then(r=>new rm(this._firestore,new Qa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=wl(e);return r?(em("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=wl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=wl(e);return this._delegate.delete(t),this}}class uw{constructor(e){this._delegate=e}set(e,t,r){const s=wl(e);return r?(em("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=wl(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=wl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new lp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new im(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sc.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new sc(e,new nm(e),t),s.set(t,u)),u}}sc.INSTANCES=new WeakMap;class ra{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nm(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ra(t,new Kn(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new ra(t,new Kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new sh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sh(this.firestore,FE(this._delegate,e))}catch(t){throw Ji(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Qt.m9)(e))instanceof Kn&&xT(this._delegate,e)}set(e,t){t=em("DocumentReference.set",t);try{return t?Uv(this._delegate,e,t):Uv(this._delegate,e)}catch(r){throw Ji(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Vv(this._delegate,e):Vv(this._delegate,e,t,...r)}catch(s){throw Ji(s,"updateDoc()","DocumentReference.update()")}}delete(){return function aA(n){return ih(nn(n.firestore,Ln),[new Of(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=wA(e),r=hb(e,s=>new rm(this.firestore,new Qa(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return rb(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function sA(n){n=nn(n,Kn);const e=nn(n.firestore,Ln),t=dr(e),r=new rc(e);return function VC(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(s,u,l){try{const p=yield function(_,I){const S=et(_);return S.persistence.runTransaction("read document","readonly",R=>S.localDocuments.getDocument(R,I))}(s,u);p.isFoundDocument()?l.resolve(p):p.isNoDocument()?l.resolve(null):l.reject(new Me(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Wd(p,`Failed to get document '${u} from cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield NE(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Qa(e,r,n._key,s,new rh(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function oA(n){n=nn(n,Kn);const e=nn(n.firestore,Ln);return xE(dr(e),n._key,{source:"server"}).then(t=>Xg(e,n,t))}(this._delegate):function tb(n){n=nn(n,Kn);const e=nn(n.firestore,Ln);return xE(dr(e),n._key).then(t=>Xg(e,n,t))}(this._delegate),t.then(r=>new rm(this.firestore,new Qa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ra(this.firestore,this._delegate.withConverter(e?sc.getInstance(this.firestore,e):null))}}function Ji(n,e,t){return n.message=n.message.replace(e,t),n}function wA(n){for(const e of n)if("object"==typeof e&&!tm(e))return e;return{}}function hb(n,e){var t,r;let s;return s=tm(n[0])?n[0]:tm(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class rm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ra(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return eb(this._delegate,e._delegate)}}class im extends rm{data(e){const t=this._delegate.data(e);return function F_(n,e){n||at()}(void 0!==t),t}}class Hi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nm(e)}where(e,t,r){try{return new Hi(this.firestore,nh(this._delegate,function eA(n,e,t){const r=e,s=Wg("where",n);return kv._create(s,r,t)}(e,t,r)))}catch(s){throw Ji(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Hi(this.firestore,nh(this._delegate,function Zg(n,e="asc"){const t=e,r=Wg("orderBy",n);return YE._create(r,t)}(e,t)))}catch(r){throw Ji(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Hi(this.firestore,nh(this._delegate,function QE(n){return AT("limit",n),Lv._create("limit",n,"F")}(e)))}catch(t){throw Ji(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Hi(this.firestore,nh(this._delegate,function tA(n){return AT("limitToLast",n),Lv._create("limitToLast",n,"L")}(e)))}catch(t){throw Ji(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Hi(this.firestore,nh(this._delegate,function nA(...n){return XE._create("startAt",n,!0)}(...e)))}catch(t){throw Ji(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Hi(this.firestore,nh(this._delegate,function wR(...n){return XE._create("startAfter",n,!1)}(...e)))}catch(t){throw Ji(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Hi(this.firestore,nh(this._delegate,function rA(...n){return _l._create("endBefore",n,!1)}(...e)))}catch(t){throw Ji(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Hi(this.firestore,nh(this._delegate,function iA(...n){return _l._create("endAt",n,!0)}(...e)))}catch(t){throw Ji(t,"endAt()","Query.endAt()")}}isEqual(e){return xv(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function iw(n){n=nn(n,Ti);const e=nn(n.firestore,Ln),t=dr(e),r=new rc(e);return function BC(n,e){const t=new Yr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(s,u,l){try{const p=yield ov(s,u,!0),_=new gE(u,p.ir),I=_.sc(p.documents),S=_.applyChanges(I,!1);l.resolve(S.snapshot)}catch(p){const _=Wd(p,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield NE(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Xa(e,r,n,s))}(this._delegate):"server"===e?.source?function nb(n){n=nn(n,Ti);const e=nn(n.firestore,Ln),t=dr(e),r=new rc(e);return PE(t,n._query,{source:"server"}).then(s=>new Xa(e,r,n,s))}(this._delegate):function rw(n){n=nn(n,Ti);const e=nn(n.firestore,Ln),t=dr(e),r=new rc(e);return KE(n._query),PE(t,n._query).then(s=>new Xa(e,r,n,s))}(this._delegate),t.then(r=>new cw(this.firestore,new Xa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=wA(e),r=hb(e,s=>new cw(this.firestore,new Xa(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return rb(this._delegate,t,r)}withConverter(e){return new Hi(this.firestore,this._delegate.withConverter(e?sc.getInstance(this.firestore,e):null))}}class fb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new im(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Hi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new im(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new fb(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new im(this._firestore,r))})}isEqual(e){return eb(this._delegate,e._delegate)}}class sh extends Hi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ra(this.firestore,e):null}doc(e){try{return new ra(this.firestore,void 0===e?Nv(this._delegate):Nv(this._delegate,e))}catch(t){throw Ji(t,"doc()","CollectionReference.doc()")}}add(e){return function uA(n,e){const t=nn(n.firestore,Ln),r=Nv(n),s=Fv(n.converter,e);return ih(t,[$E(yl(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ra(this.firestore,t))}isEqual(e){return xT(this._delegate,e._delegate)}withConverter(e){return new sh(this.firestore,this._delegate.withConverter(e?sc.getInstance(this.firestore,e):null))}}function wl(n){return nn(n,Kn)}class lw{constructor(...e){this._delegate=new Ya(...e)}static documentId(){return new lw(Br.keyField().canonicalString())}isEqual(e){return(e=(0,Qt.m9)(e))instanceof Ya&&this._delegate._internalPath.isEqual(e._internalPath)}}class oh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function NR(){return new HE("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new oh(e)}static delete(){const e=function RR(){return new ap("deleteField")}();return e._methodName="FieldValue.delete",new oh(e)}static arrayUnion(...e){const t=function Jg(...n){return new vR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new oh(t)}static arrayRemove(...e){const t=function yA(...n){return new QC("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new oh(t)}static increment(e){const t=function ow(n){return new XC("increment",n)}(e);return t._methodName="FieldValue.increment",new oh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const pb={Firestore:lb,GeoPoint:Gg,Timestamp:rr,Blob:El,Transaction:db,WriteBatch:uw,DocumentReference:ra,DocumentSnapshot:rm,Query:Hi,QueryDocumentSnapshot:im,QuerySnapshot:cw,CollectionReference:sh,FieldPath:lw,FieldValue:oh,setLogLevel:function hp(n){!function fI(n){Li.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function gb(n){(function IA(n,e){n.INTERNAL.registerComponent(new ro.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},pb)))})(n,(e,t)=>new lb(e,t,new cb)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(Da.Z);var Ja=P(8645),mb=P(3019),sm=P(3093),bi=P(4664),DA=P(4552);class OR extends Ja.x{constructor(e=1/0,t=1/0,r=DA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)p=_;p&&r.splice(0,p+1)}}}var yb=P(3020);function TA(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,yb.B)({connector:()=>new OR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}const dw=(0,P(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ah=P(6232);function om(n){return n<=0?()=>ah.E:(0,zn.e)((e,t)=>{let r=0;e.subscribe((0,wr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function hw(n){return(0,zn.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function bA(n=LR){return(0,zn.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function LR(){return new dw}var fw=P(2737);function oc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ur((s,u)=>n(s,u,r)):fw.y,om(1),t?hw(e):bA(()=>new dw))}var uh=P(4674);function pw(n,e){return(0,uh.m)(e)?(0,bi.w)(()=>n,e):(0,bi.w)(()=>n)}var gw=P(5137);P(4097);const yw=new Map,Hv={activated:!1,tokenObservers:[]},AA={initialized:!1,enabled:!1};function Cr(n){return yw.get(n)||Object.assign({},Hv)}function zv(){return AA}const vw="https://content-firebaseappcheck.googleapis.com/v1",xA="exchangeDebugToken",vb={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class _w{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Qt.BH,yield function PA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Qt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const mi=new Qt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Eb(n){if(!Cr(n).activated)throw mi.create("use-before-activation",{appName:n.name})}function lm(n,e){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const R=yield s.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,p;try{l=yield fetch(n,u)}catch(R){throw mi.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw mi.create("fetch-status-error",{httpStatus:l.status});try{p=yield l.json()}catch(R){throw mi.create("fetch-parse-error",{originalErrorMessage:R?.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw mi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const I=1e3*Number(_[1]),S=Date.now();return{token:p.token,expireTimeMillis:S+I,issuedAtTimeMillis:S}}),Ew.apply(this,arguments)}function Gv(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${vw}/projects/${t}/apps/${r}:${xA}?key=${s}`,body:{debug_token:e}}}const Il="firebase-app-check-database",Ib=1,ch="firebase-app-check-store";let Wv=null;function Kv(){return Kv=(0,me.Z)(function*(n,e){const r=(yield function LA(){return Wv||(Wv=new Promise((n,e)=>{try{const t=indexedDB.open(Il,Ib);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(mi.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ch,{keyPath:"compositeKey"})}}catch(t){e(mi.create("storage-open",{originalErrorMessage:t?.message}))}}),Wv)}()).transaction(ch,"readwrite"),u=r.objectStore(ch).put({compositeKey:n,value:e});return new Promise((l,p)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var I;p(mi.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})}),Kv.apply(this,arguments)}const fp=new io.Yd("@firebase/app-check");function Yv(n,e){return(0,Qt.hl)()?function FA(n,e){return function Tb(n,e){return Kv.apply(this,arguments)}(function bb(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Qv(){return zv().enabled}function Xv(){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,me.Z)(function*(){const n=zv();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Dl.apply(this,arguments)}const Cb={error:"UNKNOWN_ERROR"};function Ab(n){return Qt.US.encodeString(JSON.stringify(n),!1)}function e_(n){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,me.Z)(function*(n,e=!1){const t=n.app;Eb(t);const r=Cr(t);let u,s=r.token;if(s&&!lh(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(lh(_)?s=_:yield Yv(t,void 0))}if(!e&&s&&lh(s))return{token:s.token};let p,l=!1;if(Qv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=lm(Gv(t,yield Xv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield Yv(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Cr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?fp.warn(_.message):fp.error(_),u=_}return s?u?p=lh(s)?{token:s.token,internalError:u}:Mb(u):(p={token:s.token},r.token=s,yield Yv(t,s)):p=Mb(u),l&&function HA(n,e){const t=Cr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,p),p}),Iw.apply(this,arguments)}function t_(){return t_=(0,me.Z)(function*(n){const e=n.app;Eb(e);const{provider:t}=Cr(e);if(Qv()){const r=yield Xv(),{token:s}=yield lm(Gv(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}}),t_.apply(this,arguments)}function Tw(n,e){const t=Cr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $A(n){const{app:e}=n,t=Cr(e);let r=t.tokenRefresher;r||(r=function KR(n){const{app:e}=n;return new _w((0,me.Z)(function*(){let r;if(r=Cr(e).token?yield e_(n,!0):yield e_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Cr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},vb.RETRIAL_MIN_WAIT,vb.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lh(n){return n.expireTimeMillis-Date.now()>0}function Mb(n){return{token:Ab(Cb),error:n}}class zA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Cr(this.app);for(const t of e)Tw(this.app,t.next);return Promise.resolve()}}const Mw="app-check-internal";!function Ob(){(0,as._registerComponent)(new ro.wA("app-check",n=>function GA(n,e){return new zA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Mw).initialize()})),(0,as._registerComponent)(new ro.wA(Mw,n=>function ZR(n){return{getToken:e=>e_(n,e),getLimitedUseToken:()=>function jA(n){return t_.apply(this,arguments)}(n),addTokenListener:e=>function Dw(n,e,t,r){const{app:s}=n,u=Cr(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&lh(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),$A(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>$A(n))}(n,"INTERNAL",e),removeTokenListener:e=>Tw(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,as.registerVersion)("@firebase/app-check","0.8.0")}();class o_{constructor(){return(0,Vn.vb)("app-check")}}typeof window<"u"&&window;var Ub=P(120);const eM=new y.OlP("angularfire2.auth.use-emulator"),Bb=new y.OlP("angularfire2.auth.settings"),a_=new y.OlP("angularfire2.auth.tenant-id"),xw=new y.OlP("angularfire2.auth.langugage-code"),Pw=new y.OlP("angularfire2.auth.use-device-language"),jb=new y.OlP("angularfire.auth.persistence"),fm=(n,e,t,r,s,u,l,p)=>(0,er.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),l)for(const[I,S]of Object.entries(l))_.settings[I]=S;return p&&_.setPersistence(p),_},[t,r,s,u,l,p]);let $b=(()=>{class n{constructor(t,r,s,u,l,p,_,I,S,R,F,B){const K=new Ja.x,le=(0,wt.of)(void 0).pipe((0,sm.Q)(l.outsideAngular),(0,bi.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8977)))),(0,St.U)(()=>(0,er.on)(t,u,r)),(0,St.U)(Se=>fm(Se,u,p,I,S,R,_,F)),TA({bufferSize:1,refCount:!1}));if(Ts(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,wt.of)(null);else{le.pipe(oc()).subscribe();const Qe=le.pipe((0,bi.w)(ut=>ut.getRedirectResult().then(Ft=>Ft,()=>null)),Vn.iC,TA({bufferSize:1,refCount:!1})),ot=le.pipe((0,bi.w)(ut=>new Ms.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>ut.onAuthStateChanged($t=>Ft.next($t),$t=>Ft.error($t),()=>Ft.complete()))})))),it=le.pipe((0,bi.w)(ut=>new Ms.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>ut.onIdTokenChanged($t=>Ft.next($t),$t=>Ft.error($t),()=>Ft.complete()))}))));this.authState=Qe.pipe(pw(ot),(0,gw.R)(l.outsideAngular),(0,sm.Q)(l.insideAngular)),this.user=Qe.pipe(pw(it),(0,gw.R)(l.outsideAngular),(0,sm.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,bi.w)(ut=>ut?(0,gn.D)(ut.getIdToken()):(0,wt.of)(null))),this.idTokenResult=this.user.pipe((0,bi.w)(ut=>ut?(0,gn.D)(ut.getIdTokenResult()):(0,wt.of)(null))),this.credential=(0,mb.T)(Qe,K,this.authState.pipe(Ur(ut=>!ut))).pipe((0,St.U)(ut=>ut?.user?ut:null),(0,gw.R)(l.outsideAngular),(0,sm.Q)(l.insideAngular))}return(0,er.pX)(this,le,u,{spy:{apply:(Se,Qe,ot)=>{(Se.startsWith("signIn")||Se.startsWith("createUser"))&&ot.then(it=>K.next(it))}}})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(er.Dh),y.LFG(er.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Vn.HU),y.LFG(eM,8),y.LFG(Bb,8),y.LFG(a_,8),y.LFG(xw,8),y.LFG(Pw,8),y.LFG(jb,8),y.LFG(o_,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Ow(n,e){return function Hb(n,e=Uo.z){return new Ms.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function kw(n,e){return Ow(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function Lw(n,e){return kw(n,e).pipe(hn(void 0),Ns(),(0,St.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,p)=>{const _=s.find(S=>S.doc.ref.isEqual(l.ref)),I=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:l}})}),u}))}function zb(n,e,t){return Lw(n,t).pipe(Ia((r,s)=>function hN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function tM(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Gb(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Gb(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Gb(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),(0,Su.x)(),(0,St.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function Gb(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function qb(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class nM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Lw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(hn(void 0),Ns(),Ur(([r,s])=>s.length>0||!r),(0,St.U)(([r,s])=>s),Vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ia((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qb(e);return zb(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return kw(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Vn.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Vn.iC)}add(e){return this.ref.add(e)}doc(e){return new rM(this.ref.doc(e),this.afs)}}class rM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=aM(r,t);return new nM(s,u,this.afs)}snapshotChanges(){return function dN(n,e){return Ow(n,e).pipe(hn(void 0),Ns(),(0,St.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe(Vn.iC)}}class fN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Lw(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ur(t=>t.length>0),Vn.iC):Lw(this.query,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ia((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qb(e);return zb(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return kw(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Vn.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Vn.iC)}}const iM=new y.OlP("angularfire2.enableFirestorePersistence"),sM=new y.OlP("angularfire2.firestore.persistenceSettings"),oM=new y.OlP("angularfire2.firestore.settings"),pN=new y.OlP("angularfire2.firestore.use-emulator");function aM(n,e=(t=>t)){return{query:e(n),ref:n}}let uM=(()=>{class n{constructor(t,r,s,u,l,p,_,I,S,R,F,B,K,le,Se,Qe,ot){this.schedulers=_;const it=(0,er.on)(t,p,r),ut=S;R&&fm(it,p,F,K,le,Se,B,Qe),[this.firestore,this.persistenceEnabled$]=(0,er.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const Ft=p.runOutsideAngular(()=>it.firestore());if(u&&Ft.settings(u),ut&&Ft.useEmulator(...ut),s&&!Ts(l)){const $t=()=>{try{return(0,gn.D)(Ft.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(vn){return typeof console<"u"&&console.warn(vn),(0,wt.of)(!1)}};return[Ft,p.runOutsideAngular($t)]}return[Ft,(0,wt.of)(!1)]},[u,ut,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=aM(s,r),p=this.schedulers.ngZone.run(()=>u);return new nM(p,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new fN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new rM(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(er.Dh),y.LFG(er.xv,8),y.LFG(iM,8),y.LFG(oM,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Vn.HU),y.LFG(sM,8),y.LFG(pN,8),y.LFG($b,8),y.LFG(eM,8),y.LFG(Bb,8),y.LFG(a_,8),y.LFG(xw,8),y.LFG(Pw,8),y.LFG(jb,8),y.LFG(o_,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gN=(()=>{class n{constructor(){Ub.Z.registerVersion("angularfire",Vn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:iM,useValue:!0},{provide:sM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[uM]}),n})();var ia=P(5619);const{isArray:yN}=Array,{getPrototypeOf:i,prototype:o,keys:a}=Object;const{isArray:f}=Array;var A=P(7103);function N(...n){const e=(0,no.yG)(n),t=(0,no.jO)(n),{args:r,keys:s}=function c(n){if(1===n.length){const e=n[0];if(yN(e))return{args:e,keys:null};if(function d(n){return n&&"object"==typeof n&&i(n)===o}(e)){const t=a(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,gn.D)([],e);const u=new Ms.y(function L(n,e,t=fw.y){return r=>{G(e,()=>{const{length:s}=n,u=new Array(s);let l=s,p=s;for(let _=0;_<s;_++)G(e,()=>{const I=(0,gn.D)(n[_],e);let S=!1;I.subscribe((0,wr.x)(r,R=>{u[_]=R,S||(S=!0,p--),p||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>function T(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}(s,l):fw.y));return t?u.pipe(function w(n){return(0,St.U)(e=>function m(n,e){return f(e)?n(...e):n(e)}(n,e))}(t)):u}function G(n,e,t){n?(0,A.f)(t,n,e):e()}var Z=P(4829);function ye(n){return new Ms.y(e=>{(0,Z.Xf)(n()).subscribe(e)})}var Ue=P(8407);function Ye(n,e){const t=(0,uh.m)(n)?n:()=>n,r=s=>s.error(t());return new Ms.y(e?s=>e.schedule(r,0,s):r)}var ft=P(7394);function Re(){return(0,zn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,wr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Lt extends Ms.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,zn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft.w0;const t=this.getSubject();e.add(this.source.subscribe((0,wr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.w0.EMPTY)}return e}refCount(){return Re()(this)}}var bt=P(1631);function dn(n,e){return(0,uh.m)(e)?(0,bt.z)(n,e,1):(0,bt.z)(n,1)}var Dn=P(9397);function es(n){return(0,zn.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,wr.x)(t,void 0,void 0,l=>{u=(0,Z.Xf)(n(l,es(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Tl(n){return n<=0?()=>ah.E:(0,zn.e)((e,t)=>{let r=[];e.subscribe((0,wr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Uw(n){return(0,zn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var hP=P(2420);const Yt="primary",Vw=Symbol("RouteTitle");class pP{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function u_(n){return new pP(n)}function gP(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],p=n[u];if(l.startsWith(":"))s[l.substring(1)]=p;else if(l!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function bl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!vN(n[s],e[s]))return!1;return!0}function vN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function _N(n){return n.length>0?n[n.length-1]:null}function pp(n){return function mN(n){return!!n&&(n instanceof Ms.y||(0,uh.m)(n.lift)&&(0,uh.m)(n.subscribe))}(n)?n:(0,y.QGY)(n)?(0,gn.D)(Promise.resolve(n)):(0,wt.of)(n)}const yP={exact:function IN(n,e,t){if(!pm(n.segments,e.segments)||!Wb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!IN(n.children[r],e.children[r],t))return!1;return!0},subset:DN},EN={exact:function vP(n,e){return bl(n,e)},subset:function _P(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vN(n[t],e[t]))},ignored:()=>!0};function wN(n,e,t){return yP[t.paths](n.root,e.root,t.matrixParams)&&EN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function DN(n,e,t){return TN(n,e,e.segments,t)}function TN(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!pm(s,t)||e.hasChildren()||!Wb(s,t,r))}if(n.segments.length===t.length){if(!pm(n.segments,t)||!Wb(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!DN(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(pm(n.segments,s)&&Wb(n.segments,s,r)&&n.children[Yt])&&TN(n.children[Yt],e,u,r)}}function Wb(n,e,t){return e.every((r,s)=>EN[t](n[s].parameters,r.parameters))}class c_{constructor(e=new Fn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=u_(this.queryParams)),this._queryParamMap}toString(){return IP.serialize(this)}}class Fn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kb(this)}}class Bw{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=u_(this.parameters)),this._parameterMap}toString(){return CN(this)}}function pm(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let jw=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return new lM},providedIn:"root"}),e})();class lM{parse(e){const t=new PP(e);return new c_(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${$w(e.root,!0)}`,r=function bP(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Zb(t)}=${Zb(s)}`).join("&"):`${Zb(t)}=${Zb(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),s="string"==typeof e.fragment?`#${function DP(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${s}`}}const IP=new lM;function Kb(n){return n.segments.map(e=>CN(e)).join("/")}function $w(n,e){if(!n.hasChildren())return Kb(n);if(e){const t=n.children[Yt]?$w(n.children[Yt],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==Yt&&r.push(`${s}:${$w(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function wP(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===Yt&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==Yt&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===Yt?[$w(n.children[Yt],!1)]:[`${s}:${$w(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${Kb(n)}/${t[0]}`:`${Kb(n)}/(${t.join("//")})`}}function bN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zb(n){return bN(n).replace(/%3B/gi,";")}function dM(n){return bN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yb(n){return decodeURIComponent(n)}function SN(n){return Yb(n.replace(/\+/g,"%20"))}function CN(n){return`${dM(n.path)}${function TP(n){return Object.keys(n).map(e=>`;${dM(e)}=${dM(n[e])}`).join("")}(n.parameters)}`}const SP=/^[^\/()?;#]+/;function hM(n){const e=n.match(SP);return e?e[0]:""}const CP=/^[^\/()?;=#]+/,MP=/^[^=?&#]+/,NP=/^[^&#]+/;class PP{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fn([],{}):new Fn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Yt]=new Fn(e,t)),r}parseSegment(){const e=hM(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(e),new Bw(Yb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function AP(n){const e=n.match(CP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=hM(this.remaining);s&&(r=s,this.capture(r))}e[Yb(t)]=Yb(r)}parseQueryParam(e){const t=function RP(n){const e=n.match(MP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function xP(n){const e=n.match(NP);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=SN(t),u=SN(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=hM(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new y.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Yt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Yt]:new Fn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new y.vHH(4011,!1)}}function AN(n){return n.segments.length>0?new Fn([],{[Yt]:n}):n}function MN(n){const e={};for(const r of Object.keys(n.children)){const u=MN(n.children[r]);if(r===Yt&&0===u.segments.length&&u.hasChildren())for(const[l,p]of Object.entries(u.children))e[l]=p;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function OP(n){if(1===n.numberOfChildren&&n.children[Yt]){const e=n.children[Yt];return new Fn(n.segments.concat(e.segments),e.children)}return n}(new Fn(n.segments,e))}function gm(n){return n instanceof c_}function RN(n){let e;const s=AN(function t(u){const l={};for(const _ of u.children){const I=t(_);l[_.outlet]=I}const p=new Fn(u.url,l);return u===n&&(e=p),p}(n.root));return e??s}function NN(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return fM(s,s,s,t,r);const u=function LP(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new PN(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Object.entries(u.outlets).forEach(([_,I])=>{p[_]="string"==typeof I?I.split("/"):I}),[...s,{outlets:p}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&s.push(p))}),s):[...s,u]},[]);return new PN(t,e,r)}(e);if(u.toRoot())return fM(s,s,new Fn([],{}),t,r);const l=function FP(n,e,t){if(n.isAbsolute)return new Xb(e,!0,0);if(!t)return new Xb(e,!1,NaN);if(null===t.parent)return new Xb(t,!0,0);const r=Qb(n.commands[0])?0:1;return function UP(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new y.vHH(4005,!1);s=r.segments.length}return new Xb(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),p=l.processChildren?zw(l.segmentGroup,l.index,u.commands):ON(l.segmentGroup,l.index,u.commands);return fM(s,l.segmentGroup,p,t,r)}function Qb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Hw(n){return"object"==typeof n&&null!=n&&n.outlets}function fM(n,e,t,r,s){let l,u={};r&&Object.entries(r).forEach(([_,I])=>{u[_]=Array.isArray(I)?I.map(S=>`${S}`):`${I}`}),l=n===e?t:xN(n,e,t);const p=AN(MN(l));return new c_(p,u,s)}function xN(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:xN(u,e,t)}),new Fn(n.segments,r)}class PN{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qb(r[0]))throw new y.vHH(4003,!1);const s=r.find(Hw);if(s&&s!==_N(r))throw new y.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xb{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ON(n,e,t){if(n||(n=new Fn([],{})),0===n.segments.length&&n.hasChildren())return zw(n,e,t);const r=function BP(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],p=t[r];if(Hw(p))break;const _=`${p}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!LN(_,I,l))return u;r+=2}else{if(!LN(_,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Fn(n.segments.slice(0,r.pathIndex),{});return u.children[Yt]=new Fn(n.segments.slice(r.pathIndex),n.children),zw(u,0,s)}return r.match&&0===s.length?new Fn(n.segments,{}):r.match&&!n.hasChildren()?pM(n,e,t):r.match?zw(n,0,s):pM(n,e,t)}function zw(n,e,t){if(0===t.length)return new Fn(n.segments,{});{const r=function VP(n){return Hw(n[0])?n[0].outlets:{[Yt]:n}}(t),s={};if(Object.keys(r).some(u=>u!==Yt)&&n.children[Yt]&&1===n.numberOfChildren&&0===n.children[Yt].segments.length){const u=zw(n.children[Yt],e,t);return new Fn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=ON(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(s[u]=l)}),new Fn(n.segments,s)}}function pM(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Hw(u)){const _=jP(u.outlets);return new Fn(r,_)}if(0===s&&Qb(t[0])){r.push(new Bw(n.segments[e].path,kN(t[0]))),s++;continue}const l=Hw(u)?u.outlets[Yt]:`${u}`,p=s<t.length-1?t[s+1]:null;l&&p&&Qb(p)?(r.push(new Bw(l,kN(p))),s+=2):(r.push(new Bw(l,{})),s++)}return new Fn(r,{})}function jP(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=pM(new Fn([],{}),0,r))}),e}function kN(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function LN(n,e,t){return n==t.path&&bl(e,t.parameters)}const Gw="imperative";class Sl{constructor(e,t){this.id=e,this.url=t}}class Jb extends Sl{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gp extends Sl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qw extends Sl{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class l_ extends Sl{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class eS extends Sl{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class FN extends Sl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $P extends Sl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HP extends Sl{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zP extends Sl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GP extends Sl{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qP{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class WP{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class KP{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZP{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YP{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QP{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UN{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gM{}class mM{constructor(e){this.url=e}}class XP{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ww,this.attachRef=null}}let Ww=(()=>{var n;class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,s){const u=this.getOrCreateContext(r);u.outlet=s,this.contexts.set(r,u)}onChildOutletDestroyed(r){const s=this.getContext(r);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let s=this.getContext(r);return s||(s=new XP,this.contexts.set(r,s)),s}getContext(r){return this.contexts.get(r)||null}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class VN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=yM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=yM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=vM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return vM(e,this._root).map(t=>t.value)}}function yM(n,e){if(n===e.value)return e;for(const t of e.children){const r=yM(n,t);if(r)return r}return null}function vM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=vM(n,t);if(r.length)return r.unshift(e),r}return[]}class dh{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function d_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class BN extends VN{constructor(e,t){super(e),this.snapshot=t,_M(this,e)}toString(){return this.snapshot.toString()}}function jN(n,e){const t=function JP(n,e){const l=new tS([],{},{},"",{},Yt,e,null,{});return new HN("",new dh(l,[]))}(0,e),r=new ia.X([new Bw("",{})]),s=new ia.X({}),u=new ia.X({}),l=new ia.X({}),p=new ia.X(""),_=new h_(r,s,l,p,u,Yt,e,t.root);return _.snapshot=t.root,new BN(new dh(_,[]),t)}class h_{constructor(e,t,r,s,u,l,p,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=l,this.component=p,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,St.U)(I=>I[Vw]))??(0,wt.of)(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>u_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>u_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function $N(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function e1(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class tS{get title(){return this.data?.[Vw]}constructor(e,t,r,s,u,l,p,_,I){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=p,this.routeConfig=_,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=u_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=u_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class HN extends VN{constructor(e,t){super(t),this.url=e,_M(this,t)}toString(){return zN(this._root)}}function _M(n,e){e.value._routerState=n,e.children.forEach(t=>_M(n,t))}function zN(n){const e=n.children.length>0?` { ${n.children.map(zN).join(", ")} } `:"";return`${n.value}${e}`}function EM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,bl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),bl(e.params,t.params)||n.paramsSubject.next(t.params),function mP(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!bl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),bl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function wM(n,e){const t=bl(n.params,e.params)&&function EP(n,e){return pm(n,e)&&n.every((t,r)=>bl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||wM(n.parent,e.parent))}let GN=(()=>{var n;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Yt,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(Ww),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb),this.inputBinder=(0,y.f3M)(nS,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){const{firstChange:s,previousValue:u}=r.name;if(s)return;this.isTrackedInParentContexts(u)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(u)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,!1);this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,s){this.activated=r,this._activatedRoute=s,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,s){if(this.isActivated)throw new y.vHH(4013,!1);this._activatedRoute=r;const u=this.location,p=r.snapshot.component,_=this.parentContexts.getOrCreateContext(this.name).children,I=new t1(r,_,u.injector);this.activated=u.createComponent(p,{index:u.length,injector:I,environmentInjector:s??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275dir=y.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]}),e})();class t1{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===h_?this.route:e===Ww?this.childContexts:this.parent.get(e,t)}}const nS=new y.OlP("");let qN=(()=>{var n;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){const{activatedRoute:s}=r,u=N([s.queryParams,s.params,s.data]).pipe((0,bi.w)(([l,p,_],I)=>(_={...l,...p,..._},0===I?(0,wt.of)(_):Promise.resolve(_)))).subscribe(l=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==s||null===s.component)return void this.unsubscribeFromRouteData(r);const p=(0,y.qFp)(s.component);if(p)for(const{templateName:_}of p.inputs)r.activatedComponentRef.setInput(_,l[_]);else this.unsubscribeFromRouteData(r)});this.outletDataSubscriptions.set(r,u)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();function Kw(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function r1(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Kw(n,r,s);return Kw(n,r)})}(n,e,t);return new dh(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(p=>Kw(n,p)),l}}const r=function i1(n){return new h_(new ia.X(n.url),new ia.X(n.params),new ia.X(n.queryParams),new ia.X(n.fragment),new ia.X(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Kw(n,u));return new dh(r,s)}}const IM="ngNavigationCancelingError";function WN(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=gm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=KN(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function KN(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[IM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ZN(n){return n&&n[IM]}let YN=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(r,s){1&r&&y._UZ(0,"router-outlet")},dependencies:[GN],encapsulation:2}),e})();function DM(n){const e=n.children&&n.children.map(DM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=YN),t}function uc(n){return n.outlet||Yt}function Zw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class h1{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),EM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=d_(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=d_(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=d_(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=d_(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new QP(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ZP(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(EM(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const p=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(p.contexts),l.attachRef=p.componentRef,l.route=p.route.value,l.outlet&&l.outlet.attach(p.componentRef,p.route.value),EM(p.route.value),this.activateChildRoutes(e,null,l.children)}else{const p=Zw(s.snapshot);l.attachRef=null,l.route=s,l.injector=p,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class QN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class rS{constructor(e,t){this.component=e,this.route=t}}function f1(n,e,t){const r=n._root;return Yw(r,e?e._root:null,t,[r.value])}function f_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,y.Z0I)(n)?e.get(n):n:r}function Yw(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=d_(e);return n.children.forEach(l=>{(function g1(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function m1(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!pm(n.url,e.url);case"pathParamsOrQueryParamsChange":return!pm(n.url,e.url)||!bl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wM(n,e)||!bl(n.queryParams,e.queryParams);default:return!wM(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new QN(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Yw(n,e,u.component?p?p.children:null:t,r,s),_&&p&&p.outlet&&p.outlet.isActivated&&s.canDeactivateChecks.push(new rS(p.outlet.component,l))}else l&&Qw(e,p,s),s.canActivateChecks.push(new QN(r)),Yw(n,null,u.component?p?p.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,p])=>Qw(p,t.getContext(l),s)),s}function Qw(n,e,t){const r=d_(n),s=n.value;Object.entries(r).forEach(([u,l])=>{Qw(l,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new rS(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Xw(n){return"function"==typeof n}function XN(n){return n instanceof dw||"EmptyError"===n?.name}const iS=Symbol("INITIAL_VALUE");function p_(){return(0,bi.w)(n=>N(n.map(e=>e.pipe(om(1),hn(iS)))).pipe((0,St.U)(e=>{for(const t of e)if(!0!==t){if(t===iS)return iS;if(!1===t||t instanceof c_)return t}return!0}),Ur(e=>e!==iS),om(1)))}function JN(n){return(0,Ue.z)((0,Dn.b)(e=>{if(gm(e))throw WN(0,e)}),(0,St.U)(e=>!0===e))}class sS{constructor(e){this.segmentGroup=e||null}}class ex{constructor(e){this.urlTree=e}}function g_(n){return Ye(new sS(n))}function tx(n){return Ye(new ex(n))}class L1{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new y.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return(0,wt.of)(r);if(s.numberOfChildren>1||!s.children[Yt])return Ye(new y.vHH(4e3,!1));s=s.children[Yt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new c_(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&u.startsWith(":")){const p=u.substring(1);r[s]=t[p]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Object.entries(t.children).forEach(([p,_])=>{l[p]=this.createSegmentGroup(e,_,r,s)}),new Fn(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new y.vHH(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const TM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function F1(n,e,t,r,s){const u=bM(n,e,t);return u.matched?(r=function o1(n,e){return n.providers&&!n._injector&&(n._injector=(0,y.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function P1(n,e,t,r){const s=e.canMatch;if(!s||0===s.length)return(0,wt.of)(!0);const u=s.map(l=>{const p=f_(l,n);return pp(function I1(n){return n&&Xw(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))});return(0,wt.of)(u).pipe(p_(),JN())}(r,e,t).pipe((0,St.U)(l=>!0===l?u:{...TM}))):(0,wt.of)(u)}function bM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...TM}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||gP)(t,n,e);if(!s)return{...TM};const u={};Object.entries(s.posParams??{}).forEach(([p,_])=>{u[p]=_.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function nx(n,e,t,r){return t.length>0&&function B1(n,e,t){return t.some(r=>oS(n,e,r)&&uc(r)!==Yt)}(n,t,r)?{segmentGroup:new Fn(e,V1(r,new Fn(t,n.children))),slicedSegments:[]}:0===t.length&&function j1(n,e,t){return t.some(r=>oS(n,e,r))}(n,t,r)?{segmentGroup:new Fn(n.segments,U1(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Fn(n.segments,n.children),slicedSegments:t}}function U1(n,e,t,r,s){const u={};for(const l of r)if(oS(n,t,l)&&!s[uc(l)]){const p=new Fn([],{});u[uc(l)]=p}return{...s,...u}}function V1(n,e){const t={};t[Yt]=e;for(const r of n)if(""===r.path&&uc(r)!==Yt){const s=new Fn([],{});t[uc(r)]=s}return t}function oS(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class G1{constructor(e,t,r,s,u,l,p){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=p,this.allowRedirects=!0,this.applyRedirects=new L1(this.urlSerializer,this.urlTree)}noMatchError(e){return new y.vHH(4002,!1)}recognize(){const e=nx(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Yt).pipe(es(t=>{if(t instanceof ex)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof sS?this.noMatchError(t):t}),(0,St.U)(t=>{const r=new tS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Yt,this.rootComponentType,null,{}),s=new dh(r,t),u=new HN("",s),l=function kP(n,e,t=null,r=null){return NN(RN(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Yt).pipe(es(r=>{throw r instanceof sS?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=$N(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0)}processChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,gn.D)(s).pipe(dn(u=>{const l=r.children[u],p=function l1(n,e){const t=n.filter(r=>uc(r)===e);return t.push(...n.filter(r=>uc(r)!==e)),t}(t,u);return this.processSegmentGroup(e,p,l,u)}),Ia((u,l)=>(u.push(...l),u)),hw(null),function Fw(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ur((s,u)=>n(s,u,r)):fw.y,Tl(1),t?hw(e):bA(()=>new dw))}(),(0,bt.z)(u=>{if(null===u)return g_(r);const l=rx(u);return function q1(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,wt.of)(l)}))}processSegment(e,t,r,s,u,l){return(0,gn.D)(t).pipe(dn(p=>this.processSegmentAgainstRoute(p._injector??e,t,p,r,s,u,l).pipe(es(_=>{if(_ instanceof sS)return(0,wt.of)(null);throw _}))),oc(p=>!!p),es(p=>{if(XN(p))return function H1(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?(0,wt.of)([]):g_(r);throw p}))}processSegmentAgainstRoute(e,t,r,s,u,l,p){return function $1(n,e,t,r){return!!(uc(n)===r||r!==Yt&&oS(e,t,n))&&("**"===n.path||bM(e,n,t).matched)}(r,s,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,l,p):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,l):g_(s):g_(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?tx(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,bt.z)(l=>{const p=new Fn(l,{});return this.processSegment(e,t,p,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:p,consumedSegments:_,remainingSegments:I,positionalParamSegments:S}=bM(t,s,u);if(!p)return g_(t);const R=this.applyRedirects.applyRedirectCommands(_,s.redirectTo,S);return s.redirectTo.startsWith("/")?tx(R):this.applyRedirects.lineralizeSegments(s,R).pipe((0,bt.z)(F=>this.processSegment(e,r,t,F.concat(I),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u,l){let p;if("**"===r.path){const _=s.length>0?_N(s).parameters:{},I=new tS(s,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ix(r),uc(r),r.component??r._loadedComponent??null,r,sx(r));p=(0,wt.of)({snapshot:I,consumedSegments:[],remainingSegments:[]}),t.children={}}else p=F1(t,r,s,e).pipe((0,St.U)(({matched:_,consumedSegments:I,remainingSegments:S,parameters:R})=>_?{snapshot:new tS(I,R,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ix(r),uc(r),r.component??r._loadedComponent??null,r,sx(r)),consumedSegments:I,remainingSegments:S}:null));return p.pipe((0,bi.w)(_=>null===_?g_(t):this.getChildConfig(e=r._injector??e,r,s).pipe((0,bi.w)(({routes:I})=>{const S=r._loadedInjector??e,{snapshot:R,consumedSegments:F,remainingSegments:B}=_,{segmentGroup:K,slicedSegments:le}=nx(t,F,B,I);if(0===le.length&&K.hasChildren())return this.processChildren(S,I,K).pipe((0,St.U)(Qe=>null===Qe?null:[new dh(R,Qe)]));if(0===I.length&&0===le.length)return(0,wt.of)([new dh(R,[])]);const Se=uc(r)===u;return this.processSegment(S,I,K,le,Se?Yt:u,!0).pipe((0,St.U)(Qe=>[new dh(R,Qe)]))}))))}getChildConfig(e,t,r){return t.children?(0,wt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,wt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function x1(n,e,t,r){const s=e.canLoad;if(void 0===s||0===s.length)return(0,wt.of)(!0);const u=s.map(l=>{const p=f_(l,n);return pp(function v1(n){return n&&Xw(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))});return(0,wt.of)(u).pipe(p_(),JN())}(e,t,r).pipe((0,bt.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Dn.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function k1(n){return Ye(KN(!1,3))}())):(0,wt.of)({routes:[],injector:e})}}function W1(n){const e=n.value.routeConfig;return e&&""===e.path}function rx(n){const e=[],t=new Set;for(const r of n){if(!W1(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=rx(r.children);e.push(new dh(r.value,s))}return e.filter(r=>!t.has(r))}function ix(n){return n.data||{}}function sx(n){return n.resolve||{}}function ox(n){return"string"==typeof n.title||null===n.title}function SM(n){return(0,bi.w)(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,St.U)(()=>e)):(0,wt.of)(e)})}const m_=new y.OlP("ROUTES");let CM=(()=>{var n;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return(0,wt.of)(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const s=pp(r.loadComponent()).pipe((0,St.U)(ax),(0,Dn.b)(l=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=l}),Uw(()=>{this.componentLoaders.delete(r)})),u=new Lt(s,()=>new Ja.x).pipe(Re());return this.componentLoaders.set(r,u),u}loadChildren(r,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return(0,wt.of)({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);const l=this.loadModuleFactoryOrRoutes(s.loadChildren).pipe((0,St.U)(_=>{this.onLoadEndListener&&this.onLoadEndListener(s);let I,S;return Array.isArray(_)?S=_:(I=_.create(r).injector,S=I.get(m_,[],y.XFs.Self|y.XFs.Optional).flat()),{routes:S.map(DM),injector:I}}),Uw(()=>{this.childrenLoaders.delete(s)})),p=new Lt(l,()=>new Ja.x).pipe(Re());return this.childrenLoaders.set(s,p),p}loadModuleFactoryOrRoutes(r){return pp(r()).pipe((0,St.U)(ax),(0,bt.z)(s=>s instanceof y.YKP||Array.isArray(s)?(0,wt.of)(s):(0,gn.D)(this.compiler.compileModuleAsync(s))))}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function ax(n){return function eO(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let aS=(()=>{var n;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ja.x,this.transitionAbortSubject=new Ja.x,this.configLoader=(0,y.f3M)(CM),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(jw),this.rootContexts=(0,y.f3M)(Ww),this.inputBindingEnabled=null!==(0,y.f3M)(nS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,wt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=u=>this.events.next(new WP(u)),this.configLoader.onLoadStartListener=u=>this.events.next(new qP(u))}complete(){this.transitions?.complete()}handleNavigationRequest(r){const s=++this.navigationId;this.transitions?.next({...this.transitions.value,...r,id:s})}setupNavigations(r,s,u){return this.transitions=new ia.X({id:0,currentUrlTree:s,currentRawUrl:s,currentBrowserUrl:s,extractedUrl:r.urlHandlingStrategy.extract(s),urlAfterRedirects:r.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Gw,restoredState:null,currentSnapshot:u.snapshot,targetSnapshot:null,currentRouterState:u,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ur(l=>0!==l.id),(0,St.U)(l=>({...l,extractedUrl:r.urlHandlingStrategy.extract(l.rawUrl)})),(0,bi.w)(l=>{this.currentTransition=l;let p=!1,_=!1;return(0,wt.of)(l).pipe((0,Dn.b)(I=>{this.currentNavigation={id:I.id,initialUrl:I.rawUrl,extractedUrl:I.extractedUrl,trigger:I.source,extras:I.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,bi.w)(I=>{const S=I.currentBrowserUrl.toString(),R=!r.navigated||I.extractedUrl.toString()!==S||S!==I.currentUrlTree.toString();if(!R&&"reload"!==(I.extras.onSameUrlNavigation??r.onSameUrlNavigation)){const B="";return this.events.next(new l_(I.id,this.urlSerializer.serialize(I.rawUrl),B,0)),I.resolve(null),ah.E}if(r.urlHandlingStrategy.shouldProcessUrl(I.rawUrl))return(0,wt.of)(I).pipe((0,bi.w)(B=>{const K=this.transitions?.getValue();return this.events.next(new Jb(B.id,this.urlSerializer.serialize(B.extractedUrl),B.source,B.restoredState)),K!==this.transitions?.getValue()?ah.E:Promise.resolve(B)}),function K1(n,e,t,r,s,u){return(0,bt.z)(l=>function z1(n,e,t,r,s,u,l="emptyOnly"){return new G1(n,e,t,r,s,l,u).recognize()}(n,e,t,r,l.extractedUrl,s,u).pipe((0,St.U)(({state:p,tree:_})=>({...l,targetSnapshot:p,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,r.paramsInheritanceStrategy),(0,Dn.b)(B=>{l.targetSnapshot=B.targetSnapshot,l.urlAfterRedirects=B.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:B.urlAfterRedirects};const K=new FN(B.id,this.urlSerializer.serialize(B.extractedUrl),this.urlSerializer.serialize(B.urlAfterRedirects),B.targetSnapshot);this.events.next(K)}));if(R&&r.urlHandlingStrategy.shouldProcessUrl(I.currentRawUrl)){const{id:B,extractedUrl:K,source:le,restoredState:Se,extras:Qe}=I,ot=new Jb(B,this.urlSerializer.serialize(K),le,Se);this.events.next(ot);const it=jN(0,this.rootComponentType).snapshot;return this.currentTransition=l={...I,targetSnapshot:it,urlAfterRedirects:K,extras:{...Qe,skipLocationChange:!1,replaceUrl:!1}},(0,wt.of)(l)}{const B="";return this.events.next(new l_(I.id,this.urlSerializer.serialize(I.extractedUrl),B,1)),I.resolve(null),ah.E}}),(0,Dn.b)(I=>{const S=new $P(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot);this.events.next(S)}),(0,St.U)(I=>(this.currentTransition=l={...I,guards:f1(I.targetSnapshot,I.currentSnapshot,this.rootContexts)},l)),function T1(n,e){return(0,bt.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?(0,wt.of)({...t,guardsResult:!0}):function b1(n,e,t,r){return(0,gn.D)(n).pipe((0,bt.z)(s=>function N1(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,wt.of)(!0);const l=u.map(p=>{const _=Zw(e)??s,I=f_(p,_);return pp(function w1(n){return n&&Xw(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):_.runInContext(()=>I(n,e,t,r))).pipe(oc())});return(0,wt.of)(l).pipe(p_())}(s.component,s.route,t,e,r)),oc(s=>!0!==s,!0))}(l,r,s,n).pipe((0,bt.z)(p=>p&&function y1(n){return"boolean"==typeof n}(p)?function S1(n,e,t,r){return(0,gn.D)(e).pipe(dn(s=>cr(function A1(n,e){return null!==n&&e&&e(new KP(n)),(0,wt.of)(!0)}(s.route.parent,r),function C1(n,e){return null!==n&&e&&e(new YP(n)),(0,wt.of)(!0)}(s.route,r),function R1(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function p1(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ye(()=>{const p=l.guards.map(_=>{const I=Zw(l.node)??t,S=f_(_,I);return pp(function E1(n){return n&&Xw(n.canActivateChild)}(S)?S.canActivateChild(r,n):I.runInContext(()=>S(r,n))).pipe(oc())});return(0,wt.of)(p).pipe(p_())}));return(0,wt.of)(u).pipe(p_())}(n,s.path,t),function M1(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,wt.of)(!0);const s=r.map(u=>ye(()=>{const l=Zw(e)??t,p=f_(u,l);return pp(function _1(n){return n&&Xw(n.canActivate)}(p)?p.canActivate(e,n):l.runInContext(()=>p(e,n))).pipe(oc())}));return(0,wt.of)(s).pipe(p_())}(n,s.route,t))),oc(s=>!0!==s,!0))}(r,u,n,e):(0,wt.of)(p)),(0,St.U)(p=>({...t,guardsResult:p})))})}(this.environmentInjector,I=>this.events.next(I)),(0,Dn.b)(I=>{if(l.guardsResult=I.guardsResult,gm(I.guardsResult))throw WN(0,I.guardsResult);const S=new HP(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects),I.targetSnapshot,!!I.guardsResult);this.events.next(S)}),Ur(I=>!!I.guardsResult||(this.cancelNavigationTransition(I,"",3),!1)),SM(I=>{if(I.guards.canActivateChecks.length)return(0,wt.of)(I).pipe((0,Dn.b)(S=>{const R=new zP(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(R)}),(0,bi.w)(S=>{let R=!1;return(0,wt.of)(S).pipe(function Z1(n,e){return(0,bt.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return(0,wt.of)(t);let u=0;return(0,gn.D)(s).pipe(dn(l=>function Y1(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!ox(s)&&(u[Vw]=s.title),function Q1(n,e,t,r){const s=function X1(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return(0,wt.of)({});const u={};return(0,gn.D)(s).pipe((0,bt.z)(l=>function J1(n,e,t,r){const s=Zw(e)??r,u=f_(n,s);return pp(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(oc(),(0,Dn.b)(p=>{u[l]=p}))),Tl(1),function cM(n){return(0,St.U)(()=>n)}(u),es(l=>XN(l)?ah.E:Ye(l)))}(u,n,e,r).pipe((0,St.U)(l=>(n._resolvedData=l,n.data=$N(n,t).resolve,s&&ox(s)&&(n.data[Vw]=s.title),null)))}(l.route,r,n,e)),(0,Dn.b)(()=>u++),Tl(1),(0,bt.z)(l=>u===s.length?(0,wt.of)(t):ah.E))})}(r.paramsInheritanceStrategy,this.environmentInjector),(0,Dn.b)({next:()=>R=!0,complete:()=>{R||this.cancelNavigationTransition(S,"",2)}}))}),(0,Dn.b)(S=>{const R=new GP(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(R)}))}),SM(I=>{const S=R=>{const F=[];R.routeConfig?.loadComponent&&!R.routeConfig._loadedComponent&&F.push(this.configLoader.loadComponent(R.routeConfig).pipe((0,Dn.b)(B=>{R.component=B}),(0,St.U)(()=>{})));for(const B of R.children)F.push(...S(B));return F};return N(S(I.targetSnapshot.root)).pipe(hw(),om(1))}),SM(()=>this.afterPreactivation()),(0,St.U)(I=>{const S=function n1(n,e,t){const r=Kw(n,e._root,t?t._root:void 0);return new BN(r,e)}(r.routeReuseStrategy,I.targetSnapshot,I.currentRouterState);return this.currentTransition=l={...I,targetRouterState:S},l}),(0,Dn.b)(()=>{this.events.next(new gM)}),((n,e,t,r)=>(0,St.U)(s=>(new h1(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,r.routeReuseStrategy,I=>this.events.next(I),this.inputBindingEnabled),om(1),(0,Dn.b)({next:I=>{p=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gp(I.id,this.urlSerializer.serialize(I.extractedUrl),this.urlSerializer.serialize(I.urlAfterRedirects))),r.titleStrategy?.updateTitle(I.targetRouterState.snapshot),I.resolve(!0)},complete:()=>{p=!0}}),function fP(n){return(0,zn.e)((e,t)=>{(0,Z.Xf)(n).subscribe((0,wr.x)(t,()=>t.complete(),hP.Z)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe((0,Dn.b)(I=>{throw I}))),Uw(()=>{p||_||this.cancelNavigationTransition(l,"",1),this.currentNavigation?.id===l.id&&(this.currentNavigation=null)}),es(I=>{if(_=!0,ZN(I))this.events.next(new qw(l.id,this.urlSerializer.serialize(l.extractedUrl),I.message,I.cancellationCode)),function s1(n){return ZN(n)&&gm(n.url)}(I)?this.events.next(new mM(I.url)):l.resolve(!1);else{this.events.next(new eS(l.id,this.urlSerializer.serialize(l.extractedUrl),I,l.targetSnapshot??void 0));try{l.resolve(r.errorHandler(I))}catch(S){l.reject(S)}}return ah.E}))}))}cancelNavigationTransition(r,s,u){const l=new qw(r.id,this.urlSerializer.serialize(r.extractedUrl),s,u);this.events.next(l),r.resolve(!1)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function ux(n){return n!==Gw}let cx=(()=>{var n;class e{buildTitle(r){let s,u=r.root;for(;void 0!==u;)s=this.getResolvedTitleForRoute(u)??s,u=u.children.find(l=>l.outlet===Yt);return s}getResolvedTitleForRoute(r){return r.data[Vw]}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(tO)},providedIn:"root"}),e})(),tO=(()=>{var n;class e extends cx{constructor(r){super(),this.title=r}updateTitle(r){const s=this.buildTitle(r);void 0!==s&&this.title.setTitle(s)}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(be))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),nO=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(iO)},providedIn:"root"}),e})();class rO{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let iO=(()=>{var n;class e extends rO{}return(n=e).\u0275fac=function(){let t;return function(s){return(t||(t=y.n5z(n)))(s||n)}}(),n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const uS=new y.OlP("",{providedIn:"root",factory:()=>({})});let sO=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(oO)},providedIn:"root"}),e})(),oO=(()=>{var n;class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,s){return r}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var Jw=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Jw||{});function lx(n,e){n.events.pipe(Ur(t=>t instanceof gp||t instanceof qw||t instanceof eS||t instanceof l_),(0,St.U)(t=>t instanceof gp||t instanceof l_?Jw.COMPLETE:t instanceof qw&&(0===t.code||1===t.code)?Jw.REDIRECTING:Jw.FAILED),Ur(t=>t!==Jw.REDIRECTING),om(1)).subscribe(()=>{e()})}function aO(n){throw n}function uO(n,e,t){return e.parse("/")}const cO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let eu=(()=>{var n;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this._events=new Ja.x,this.options=(0,y.f3M)(uS,{optional:!0})||{},this.pendingTasks=(0,y.f3M)(y.HDt),this.errorHandler=this.options.errorHandler||aO,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||uO,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(sO),this.routeReuseStrategy=(0,y.f3M)(nO),this.titleStrategy=(0,y.f3M)(cx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,y.f3M)(m_,{optional:!0})?.flat()??[],this.navigationTransitions=(0,y.f3M)(aS),this.urlSerializer=(0,y.f3M)(jw),this.location=(0,y.f3M)(ze),this.componentInputBindingEnabled=!!(0,y.f3M)(nS,{optional:!0}),this.eventsSubscription=new ft.w0,this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new c_,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=jN(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(r=>{this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const r=this.navigationTransitions.events.subscribe(s=>{try{const{currentTransition:u}=this.navigationTransitions;if(null===u)return void(dx(s)&&this._events.next(s));if(s instanceof Jb)ux(u.source)&&(this.browserUrlTree=u.extractedUrl);else if(s instanceof l_)this.rawUrlTree=u.rawUrl;else if(s instanceof FN){if("eager"===this.urlUpdateStrategy){if(!u.extras.skipLocationChange){const l=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);this.setBrowserUrl(l,u)}this.browserUrlTree=u.urlAfterRedirects}}else if(s instanceof gM)this.currentUrlTree=u.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),this.routerState=u.targetRouterState,"deferred"===this.urlUpdateStrategy&&(u.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,u),this.browserUrlTree=u.urlAfterRedirects);else if(s instanceof qw)0!==s.code&&1!==s.code&&(this.navigated=!0),(3===s.code||2===s.code)&&this.restoreHistory(u);else if(s instanceof mM){const l=this.urlHandlingStrategy.merge(s.url,u.currentRawUrl),p={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ux(u.source)};this.scheduleNavigation(l,Gw,null,p,{resolve:u.resolve,reject:u.reject,promise:u.promise})}s instanceof eS&&this.restoreHistory(u,!0),s instanceof gp&&(this.navigated=!0),dx(s)&&this._events.next(s)}catch(u){this.navigationTransitions.transitionAbortSubject.next(u)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const r=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Gw,r)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const s="popstate"===r.type?"popstate":"hashchange";"popstate"===s&&setTimeout(()=>{this.navigateToSyncWithBrowser(r.url,s,r.state)},0)}))}navigateToSyncWithBrowser(r,s,u){const l={replaceUrl:!0},p=u?.navigationId?u:null;if(u){const I={...u};delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(l.state=I)}const _=this.parseUrl(r);this.scheduleNavigation(_,s,p,l)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(DM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,s={}){const{relativeTo:u,queryParams:l,fragment:p,queryParamsHandling:_,preserveFragment:I}=s,S=I?this.currentUrlTree.fragment:p;let F,R=null;switch(_){case"merge":R={...this.currentUrlTree.queryParams,...l};break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=l||null}null!==R&&(R=this.removeEmptyProps(R));try{F=RN(u?u.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof r[0]||!r[0].startsWith("/"))&&(r=[]),F=this.currentUrlTree.root}return NN(F,r,R,S??null)}navigateByUrl(r,s={skipLocationChange:!1}){const u=gm(r)?r:this.parseUrl(r),l=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(l,Gw,null,s)}navigate(r,s={skipLocationChange:!1}){return function dO(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new y.vHH(4008,!1)}(r),this.navigateByUrl(this.createUrlTree(r,s),s)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let s;try{s=this.urlSerializer.parse(r)}catch(u){s=this.malformedUriErrorHandler(u,this.urlSerializer,r)}return s}isActive(r,s){let u;if(u=!0===s?{...cO}:!1===s?{...lO}:s,gm(r))return wN(this.currentUrlTree,r,u);const l=this.parseUrl(r);return wN(this.currentUrlTree,l,u)}removeEmptyProps(r){return Object.keys(r).reduce((s,u)=>{const l=r[u];return null!=l&&(s[u]=l),s},{})}scheduleNavigation(r,s,u,l,p){if(this.disposed)return Promise.resolve(!1);let _,I,S;p?(_=p.resolve,I=p.reject,S=p.promise):S=new Promise((F,B)=>{_=F,I=B});const R=this.pendingTasks.add();return lx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(R))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:r,extras:l,resolve:_,reject:I,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(F=>Promise.reject(F))}setBrowserUrl(r,s){const u=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(u)||s.extras.replaceUrl){const p={...s.extras.state,...this.generateNgRouterState(s.id,this.browserPageId)};this.location.replaceState(u,"",p)}else{const l={...s.extras.state,...this.generateNgRouterState(s.id,this.browserPageId+1)};this.location.go(u,"",l)}}restoreHistory(r,s=!1){if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-this.browserPageId;0!==l?this.location.historyGo(l):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===l&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,s){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:s}:{navigationId:r}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function dx(n){return!(n instanceof gM||n instanceof mM)}class hx{}let pO=(()=>{var n;class e{constructor(r,s,u,l,p){this.router=r,this.injector=u,this.preloadingStrategy=l,this.loader=p}setUpPreloading(){this.subscription=this.router.events.pipe(Ur(r=>r instanceof gp),dn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,s){const u=[];for(const l of s){l.providers&&!l._injector&&(l._injector=(0,y.MMx)(l.providers,r,`Route: ${l.path}`));const p=l._injector??r,_=l._loadedInjector??p;(l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent)&&u.push(this.preloadConfig(p,l)),(l.children||l._loadedRoutes)&&u.push(this.processRoutes(_,l.children??l._loadedRoutes))}return(0,gn.D)(u).pipe((0,Rs.J)())}preloadConfig(r,s){return this.preloadingStrategy.preload(s,()=>{let u;u=s.loadChildren&&void 0===s.canLoad?this.loader.loadChildren(r,s):(0,wt.of)(null);const l=u.pipe((0,bt.z)(p=>null===p?(0,wt.of)(void 0):(s._loadedRoutes=p.routes,s._loadedInjector=p.injector,this.processRoutes(p.injector??r,p.routes))));if(s.loadComponent&&!s._loadedComponent){const p=this.loader.loadComponent(s);return(0,gn.D)([l,p]).pipe((0,Rs.J)())}return l})}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(eu),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(hx),y.LFG(CM))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const MM=new y.OlP("");let fx=(()=>{var n;class e{constructor(r,s,u,l,p={}){this.urlSerializer=r,this.transitions=s,this.viewportScroller=u,this.zone=l,this.options=p,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},p.scrollPositionRestoration=p.scrollPositionRestoration||"disabled",p.anchorScrolling=p.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Jb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof gp?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof l_&&0===r.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof UN&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,s){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new UN(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(n=e).\u0275fac=function(r){y.$Z()},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();function hh(n,e){return{\u0275kind:n,\u0275providers:e}}function gx(){const n=(0,y.f3M)(y.zs3);return e=>{const t=n.get(y.z2F);if(e!==t.components[0])return;const r=n.get(eu),s=n.get(mx);1===n.get(RM)&&r.initialNavigation(),n.get(yx,null,y.XFs.Optional)?.setUpPreloading(),n.get(MM,null,y.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const mx=new y.OlP("",{factory:()=>new Ja.x}),RM=new y.OlP("",{providedIn:"root",factory:()=>1}),yx=new y.OlP("");function vO(n){return hh(0,[{provide:yx,useExisting:pO},{provide:hx,useExisting:n}])}const vx=new y.OlP("ROUTER_FORROOT_GUARD"),EO=[ze,{provide:jw,useClass:lM},eu,Ww,{provide:h_,useFactory:function px(n){return n.routerState.root},deps:[eu]},CM,[]];function wO(){return new y.PXZ("Router",eu)}let _x=(()=>{var n;class e{constructor(r){}static forRoot(r,s){return{ngModule:e,providers:[EO,[],{provide:m_,multi:!0,useValue:r},{provide:vx,useFactory:bO,deps:[[eu,new y.FiY,new y.tp0]]},{provide:uS,useValue:s||{}},s?.useHash?{provide:Ve,useClass:xe}:{provide:Ve,useClass:Ze},{provide:MM,useFactory:()=>{const n=(0,y.f3M)(gr),e=(0,y.f3M)(y.R0b),t=(0,y.f3M)(uS),r=(0,y.f3M)(aS),s=(0,y.f3M)(jw);return t.scrollOffset&&n.setOffset(t.scrollOffset),new fx(s,r,n,e,t)}},s?.preloadingStrategy?vO(s.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:wO},s?.initialNavigation?SO(s):[],s?.bindToComponentInputs?hh(8,[qN,{provide:nS,useExisting:qN}]).\u0275providers:[],[{provide:Ex,useFactory:gx},{provide:y.tb,multi:!0,useExisting:Ex}]]}}static forChild(r){return{ngModule:e,providers:[{provide:m_,multi:!0,useValue:r}]}}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(vx,8))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),e})();function bO(n){return"guarded"}function SO(n){return["disabled"===n.initialNavigation?hh(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const e=(0,y.f3M)(eu);return()=>{e.setUpLocationChangeListener()}}},{provide:RM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?hh(2,[{provide:RM,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:e=>{const t=e.get(Oe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(eu),u=e.get(mx);lx(s,()=>{r(!0)}),e.get(aS).afterPreactivation=()=>(r(!0),u.closed?(0,wt.of)(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const Ex=new y.OlP(""),AO=[];let MO=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[_x.forRoot(AO),_x]}),e})(),RO=(()=>{var n;class e{constructor(r){this.firestore=r,this.firestoreCollection=r.collection("todos")}addTodo(r){return this.firestoreCollection.add({title:r,isCompleted:!1})}updateStatus(r,s){return this.firestoreCollection.doc(r).update({isCompleted:s})}deleteTask(r){return this.firestoreCollection.doc(r).delete()}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(uM))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function NO(n,e){if(1&n){const t=y.EpF();y.TgZ(0,"li",18)(1,"input",19),y.NdJ("change",function(){const u=y.CHM(t).$implicit,l=y.oxw();return y.KtG(l.onStatusChange(u.id,!u.isCompleted))}),y.qZA(),y._uU(2),y.TgZ(3,"button",20),y.NdJ("click",function(){const u=y.CHM(t).$implicit,l=y.oxw();return y.KtG(l.onDelete(u.id))}),y._UZ(4,"i",21),y.qZA()()}if(2&n){const t=e.$implicit;y.xp6(1),y.Q6J("checked",t.isCompleted),y.xp6(1),y.hij(" ",t.title," ")}}let xO=(()=>{var n;class e{constructor(r){this.todoService=r,this.todoList=[],this.selectedTab="all"}ngOnInit(){this.todoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(r=>{this.todoList=r.sort((s,u)=>s.isCompleted-u.isCompleted)})}onClick(r){r.value&&(this.todoService.addTodo(r.value),r.value="")}onStatusChange(r,s){this.todoService.updateStatus(r,s)}onDelete(r){this.todoService.deleteTask(r)}selectTab(r){this.selectedTab=r}get filteredTodoList(){return"all"===this.selectedTab?this.todoList:"active"===this.selectedTab?this.todoList.filter(r=>!r.isCompleted):"completed"===this.selectedTab?this.todoList.filter(r=>r.isCompleted):[]}}return(n=e).\u0275fac=function(r){return new(r||n)(y.Y36(RO))},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-todo"]],decls:24,vars:7,consts:[[1,"container","py-2","h-100","mt-5",2,"width","100%"],[1,"justify-content-center","align-items-center","h-100"],[1,"card"],[1,"card-body","p-5"],[1,"d-flex","justify-content-center","align-items-center","mb-4"],[1,"form-outline","flex-fill"],["type","text","placeholder","New task...",1,"form-control"],["titleInput",""],[1,"btn","btn-info","ms-2",2,"color","white",3,"click"],["id","ex1","role","tablist",1,"nav","nav-tabs","mb-4","pb-2"],["role","presentation",1,"nav-item"],["role","tab","aria-controls","all","aria-selected","true",1,"nav-link",3,"click"],["role","tab","aria-controls","active","aria-selected","false",1,"nav-link",3,"click"],["role","tab","aria-controls","completed","aria-selected","false",1,"nav-link",3,"click"],[1,"tab-content"],["role","tabpanel",1,"tab-pane","fade","show","active"],[1,"list-group","mb-0"],["class","list-group-item d-flex align-items-center border-0 mb-2 rounded","style","background-color: #f4f6f7;",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","align-items-center","border-0","mb-2","rounded",2,"background-color","#f4f6f7"],["type","checkbox","value","","aria-label","...",1,"form-check-input","me-2",3,"checked","change"],[1,"btn","ms-auto",3,"click"],[1,"custom-icon","fa","fa-times-circle","text-danger"]],template:function(r,s){if(1&r){const u=y.EpF();y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),y._UZ(6,"input",6,7),y.qZA(),y.TgZ(8,"button",8),y.NdJ("click",function(){y.CHM(u);const p=y.MAs(7);return y.KtG(s.onClick(p))}),y._uU(9,"Add"),y.qZA()(),y.TgZ(10,"ul",9)(11,"li",10)(12,"a",11),y.NdJ("click",function(){return s.selectTab("all")}),y._uU(13,"All"),y.qZA()(),y.TgZ(14,"li",10)(15,"a",12),y.NdJ("click",function(){return s.selectTab("active")}),y._uU(16,"Active"),y.qZA()(),y.TgZ(17,"li",10)(18,"a",13),y.NdJ("click",function(){return s.selectTab("completed")}),y._uU(19,"Completed"),y.qZA()()(),y.TgZ(20,"div",14)(21,"div",15)(22,"ul",16),y.YNc(23,NO,5,2,"li",17),y.qZA()()()()()()()}2&r&&(y.xp6(12),y.ekj("active","all"===s.selectedTab),y.xp6(3),y.ekj("active","active"===s.selectedTab),y.xp6(3),y.ekj("active","completed"===s.selectedTab),y.xp6(5),y.Q6J("ngForOf",s.filteredTodoList))},dependencies:[uu],styles:[".custom-icon[_ngcontent-%COMP%]{font-size:20px}"]}),e})(),PO=(()=>{var n;class e{constructor(){this.title="todoList_with_firebase"}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(r,s){1&r&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2),y._UZ(3,"app-todo"),y.qZA()()())},dependencies:[xO]}),e})();const OO_firebaseConfig={apiKey:"AIzaSyCgJ-QQagaAlAtEJ6BQGmlDFfR8s2nGVIY",authDomain:"todo-app-9d3d8.firebaseapp.com",projectId:"todo-app-9d3d8",storageBucket:"todo-app-9d3d8.appspot.com",messagingSenderId:"497920574302",appId:"1:497920574302:web:16aaf19a76c8135fd905cf"};class wx{}class kO{}const fh="*";function Ix(n,e=null){return{type:2,steps:n,options:e}}function Dx(n){return{type:6,styles:n,offset:null}}class eI{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Tx{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const u=this.players.length;0==u?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==u&&this._onFinish()}),l.onDestroy(()=>{++r==u&&this._onDestroy()}),l.onStart(()=>{++s==u&&this._onStart()})}),this.totalTime=this.players.reduce((l,p)=>Math.max(l,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function bx(n){return new y.vHH(3e3,!1)}function mp(n){switch(n.length){case 0:return new eI;case 1:return n[0];default:return new Tx(n)}}function Sx(n,e,t=new Map,r=new Map){const s=[],u=[];let l=-1,p=null;if(e.forEach(_=>{const I=_.get("offset"),S=I==l,R=S&&p||new Map;_.forEach((F,B)=>{let K=B,le=F;if("offset"!==B)switch(K=n.normalizePropertyName(K,s),le){case"!":le=t.get(B);break;case fh:le=r.get(B);break;default:le=n.normalizeStyleValue(B,K,le,s)}R.set(K,le)}),S||u.push(R),p=R,l=I}),s.length)throw function ik(n){return new y.vHH(3502,!1)}();return u}function xM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&PM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&PM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&PM(t,"destroy",n)))}}function PM(n,e,t){const u=OM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(u._data=l),u}function OM(n,e,t,r,s="",u=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:u,disabled:!!l}}function sa(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Cx(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const mk=(()=>typeof document>"u"?null:document.documentElement)();function kM(n){const e=n.parentNode||n.host||null;return e===mk?null:e}let mm=null,Ax=!1;function Mx(n,e){for(;e;){if(e===n)return!0;e=kM(e)}return!1}function Rx(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let Nx=(()=>{var n;class e{validateStyleProperty(r){return function vk(n){mm||(mm=function _k(){return typeof document<"u"?document.body:null}()||{},Ax=!!mm.style&&"WebkitAppearance"in mm.style);let e=!0;return mm.style&&!function yk(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in mm.style,!e&&Ax&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in mm.style)),e}(r)}matchesElement(r,s){return!1}containsElement(r,s){return Mx(r,s)}getParentElement(r){return kM(r)}query(r,s,u){return Rx(r,s,u)}computeStyle(r,s,u){return u||""}animate(r,s,u,l,p,_=[],I){return new eI(u,l)}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})(),LM=(()=>{class e{}return e.NOOP=new Nx,e})();const Ek=1e3,FM="ng-enter",cS="ng-leave",lS="ng-trigger",dS=".ng-trigger",Px="ng-animating",UM=".ng-animating";function ph(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:VM(parseFloat(e[1]),e[2])}function VM(n,e){return"s"===e?n*Ek:n}function hS(n,e,t){return n.hasOwnProperty("duration")?n:function Ik(n,e,t){let s,u=0,l="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(bx()),{duration:0,delay:0,easing:""};s=VM(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(u=VM(parseFloat(_),p[4]));const I=p[5];I&&(l=I)}else s=n;if(!t){let p=!1,_=e.length;s<0&&(e.push(function LO(){return new y.vHH(3100,!1)}()),p=!0),u<0&&(e.push(function FO(){return new y.vHH(3101,!1)}()),p=!0),p&&e.splice(_,0,bx())}return{duration:s,delay:u,easing:l}}(n,e,t)}function tI(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Ox(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function yp(n,e=new Map,t){if(t)for(let[r,s]of t)e.set(r,s);for(let[r,s]of n)e.set(r,s);return e}function Cl(n,e,t){e.forEach((r,s)=>{const u=jM(s);t&&!t.has(s)&&t.set(s,n.style[u]),n.style[u]=r})}function ym(n,e){e.forEach((t,r)=>{const s=jM(r);n.style[s]=""})}function nI(n){return Array.isArray(n)?1==n.length?n[0]:Ix(n):n}const BM=new RegExp("{{\\s*(.+?)\\s*}}","g");function Lx(n){let e=[];if("string"==typeof n){let t;for(;t=BM.exec(n);)e.push(t[1]);BM.lastIndex=0}return e}function rI(n,e,t){const r=n.toString(),s=r.replace(BM,(u,l)=>{let p=e[l];return null==p&&(t.push(function VO(n){return new y.vHH(3003,!1)}()),p=""),p.toString()});return s==r?n:s}function fS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const bk=/-+([a-z0-9])/g;function jM(n){return n.replace(bk,(...e)=>e[1].toUpperCase())}function oa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function BO(n){return new y.vHH(3004,!1)}()}}function Fx(n,e){return window.getComputedStyle(n)[e]}const pS="*";function Ak(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Mk(n,e,t){if(":"==n[0]){const _=function Rk(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function ek(n){return new y.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function JO(n){return new y.vHH(3015,!1)}()),e;const s=r[1],u=r[2],l=r[3];e.push(Ux(s,l));"<"==u[0]&&!(s==pS&&l==pS)&&e.push(Ux(l,s))}(r,t,e)):t.push(n),t}const gS=new Set(["true","1"]),mS=new Set(["false","0"]);function Ux(n,e){const t=gS.has(n)||mS.has(n),r=gS.has(e)||mS.has(e);return(s,u)=>{let l=n==pS||n==s,p=e==pS||e==u;return!l&&t&&"boolean"==typeof s&&(l=s?gS.has(n):mS.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?gS.has(e):mS.has(e)),l&&p}}const Nk=new RegExp("s*:selfs*,?","g");function $M(n,e,t,r){return new xk(n).build(e,t,r)}class xk{constructor(e){this._driver=e}build(e,t,r){const s=new kk(t);return this._resetContextStyleTimingState(s),oa(this,nI(e),s)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const u=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function $O(){return new y.vHH(3006,!1)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,I=_.name;I.toString().split(/\s*,\s*/).forEach(S=>{_.name=S,u.push(this.visitState(_,t))}),_.name=I}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,s+=_.depCount,l.push(_)}else t.errors.push(function HO(){return new y.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:l,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,l=s||{};r.styles.forEach(p=>{p instanceof Map&&p.forEach(_=>{Lx(_).forEach(I=>{l.hasOwnProperty(I)||u.add(I)})})}),u.size&&(fS(u.values()),t.errors.push(function zO(n,e){return new y.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=oa(this,nI(e.animation),t);return{type:1,matchers:Ak(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:vm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>oa(this,r,t)),options:vm(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const u=e.steps.map(l=>{t.currentTime=r;const p=oa(this,l,t);return s=Math.max(s,t.currentTime),p});return t.currentTime=s,{type:3,steps:u,options:vm(e.options)}}visitAnimate(e,t){const r=function Fk(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return HM(hS(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=HM(0,0,"");return u.dynamic=!0,u.strValue=t,u}const s=hS(t,e);return HM(s.duration,s.delay,s.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,u=e.styles?e.styles:Dx({});if(5==u.type)s=this.visitKeyframes(u,t);else{let l=e.styles,p=!1;if(!l){p=!0;const I={};r.easing&&(I.easing=r.easing),l=Dx(I)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(l,t);_.isEmptyStep=p,s=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],s=Array.isArray(e.styles)?e.styles:[e.styles];for(let p of s)"string"==typeof p?p===fh?r.push(p):t.errors.push(new y.vHH(3002,!1)):r.push(Ox(p));let u=!1,l=null;return r.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(l=p.get("easing"),p.delete("easing")),!u))for(let _ of p.values())if(_.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((p,_)=>{const I=t.collectedStyles.get(t.currentQuerySelector),S=I.get(_);let R=!0;S&&(u!=s&&u>=S.startTime&&s<=S.endTime&&(t.errors.push(function qO(n,e,t,r,s){return new y.vHH(3010,!1)}()),R=!1),u=S.startTime),R&&I.set(_,{startTime:u,endTime:s}),t.options&&function Tk(n,e,t){const r=e.params||{},s=Lx(n);s.length&&s.forEach(u=>{r.hasOwnProperty(u)||t.push(function UO(n){return new y.vHH(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function WO(){return new y.vHH(3011,!1)}()),r;let u=0;const l=[];let p=!1,_=!1,I=0;const S=e.steps.map(Qe=>{const ot=this._makeStyleAst(Qe,t);let it=null!=ot.offset?ot.offset:function Lk(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ot.styles),ut=0;return null!=it&&(u++,ut=ot.offset=it),_=_||ut<0||ut>1,p=p||ut<I,I=ut,l.push(ut),ot});_&&t.errors.push(function KO(){return new y.vHH(3012,!1)}()),p&&t.errors.push(function ZO(){return new y.vHH(3200,!1)}());const R=e.steps.length;let F=0;u>0&&u<R?t.errors.push(function YO(){return new y.vHH(3202,!1)}()):0==u&&(F=1/(R-1));const B=R-1,K=t.currentTime,le=t.currentAnimateTimings,Se=le.duration;return S.forEach((Qe,ot)=>{const it=F>0?ot==B?1:F*ot:l[ot],ut=it*Se;t.currentTime=K+le.delay+ut,le.duration=ut,this._validateStyleAst(Qe,t),Qe.offset=it,r.styles.push(Qe)}),r}visitReference(e,t){return{type:8,animation:oa(this,nI(e.animation),t),options:vm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:vm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:vm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[u,l]=function Pk(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Nk,"")),n=n.replace(/@\*/g,dS).replace(/@\w+/g,t=>dS+"-"+t.slice(1)).replace(/:animating/g,UM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,sa(t.collectedStyles,t.currentQuerySelector,new Map);const p=oa(this,nI(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:s.limit||0,optional:!!s.optional,includeSelf:l,animation:p,originalSelector:e.selector,options:vm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function QO(){return new y.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:hS(e.timings,t.errors,!0);return{type:12,animation:oa(this,nI(e.animation),t),timings:r,options:null}}}class kk{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vm(n){return n?(n=tI(n)).params&&(n.params=function Ok(n){return n?tI(n):null}(n.params)):n={},n}function HM(n,e,t){return{duration:n,delay:e,easing:t}}function zM(n,e,t,r,s,u,l=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:u,totalTime:s+u,easing:l,subTimeline:p}}class yS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Bk=new RegExp(":enter","g"),$k=new RegExp(":leave","g");function GM(n,e,t,r,s,u=new Map,l=new Map,p,_,I=[]){return(new Hk).buildKeyframes(n,e,t,r,s,u,l,p,_,I)}class Hk{buildKeyframes(e,t,r,s,u,l,p,_,I,S=[]){I=I||new yS;const R=new qM(e,t,I,s,u,S,[]);R.options=_;const F=_.delay?ph(_.delay):0;R.currentTimeline.delayNextStep(F),R.currentTimeline.setStyles([l],null,R.errors,_),oa(this,r,R);const B=R.timelines.filter(K=>K.containsAnimation());if(B.length&&p.size){let K;for(let le=B.length-1;le>=0;le--){const Se=B[le];if(Se.element===t){K=Se;break}}K&&!K.allowOnlyTimelineStyles()&&K.setStyles([p],null,R.errors,_)}return B.length?B.map(K=>K.buildKeyframes()):[zM(t,[],[],[],0,F,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),u=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,s,s.options);u!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const s of e){const u=s?.delay;if(u){const l="number"==typeof u?u:ph(rI(u,s?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const l=null!=r.duration?ph(r.duration):null,p=null!=r.delay?ph(r.delay):null;return 0!==l&&e.forEach(_=>{const I=t.appendInstructionToTimeline(_,l,p);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),oa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const u=e.options;if(u&&(u.params||u.delay)&&(s=t.createSubContext(u),s.transformIntoNewTimeline(),null!=u.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=vS);const l=ph(u.delay);s.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>oa(this,l,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?ph(e.options.delay):0;e.steps.forEach(l=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),oa(this,l,p),s=Math.max(s,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return hS(t.params?rI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*u),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(s+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},u=s.delay?ph(s.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vS);let l=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((I,S)=>{t.currentQueryIndex=S;const R=t.createSubContext(e.options,I);u&&R.delayNextStep(u),I===t.element&&(_=R.currentTimeline),oa(this,e.animation,R),R.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,R.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,u=e.timings,l=Math.abs(u.duration),p=l*(t.currentQueryTotal-1);let _=l*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const S=t.currentTimeline;_&&S.delayNextStep(_);const R=S.currentTime;oa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-R+(s.startTime-r.currentTimeline.startTime)}}const vS={};class qM{constructor(e,t,r,s,u,l,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=u,this.errors=l,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new _S(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=ph(r.duration)),null!=r.delay&&(s.delay=ph(r.delay));const u=r.params;if(u){let l=s.params;l||(l=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!l.hasOwnProperty(p))&&(l[p]=rI(u[p],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,u=new qM(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=vS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new zk(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(u),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,u,l){let p=[];if(s&&p.push(this.element),e.length>0){e=(e=e.replace(Bk,"."+this._enterClassName)).replace($k,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),p.push(...I)}return!u&&0==p.length&&l.push(function XO(n){return new y.vHH(3014,!1)}()),p}}class _S{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new _S(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||fh),this._currentKeyframe.set(t,fh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&this._previousKeyframe.set("easing",t);const u=s&&s.params||{},l=function Gk(n,e){const t=new Map;let r;return n.forEach(s=>{if("*"===s){r=r||e.keys();for(let u of r)t.set(u,fh)}else yp(s,t)}),t}(e,this._globalTimelineStyles);for(let[p,_]of l){const I=rI(_,u,r);this._pendingStyles.set(p,I),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??fh),this._updateStyle(p,I)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const s=this._styleSummary.get(r);(!s||t.time>s.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((p,_)=>{const I=yp(p,new Map,this._backFill);I.forEach((S,R)=>{"!"===S?e.add(R):S===fh&&t.add(R)}),r||I.set("offset",_/this.duration),s.push(I)});const u=e.size?fS(e.values()):[],l=t.size?fS(t.values()):[];if(r){const p=s[0],_=new Map(p);p.set("offset",0),_.set("offset",1),s=[p,_]}return zM(this.element,s,u,l,this.duration,this.startTime,this.easing,!1)}}class zk extends _S{constructor(e,t,r,s,u,l,p=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],l=r+t,p=t/l,_=yp(e[0]);_.set("offset",0),u.push(_);const I=yp(e[0]);I.set("offset",jx(p)),u.push(I);const S=e.length-1;for(let R=1;R<=S;R++){let F=yp(e[R]);const B=F.get("offset");F.set("offset",jx((t+B*r)/l)),u.push(F)}r=l,t=0,s="",e=u}return zM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function jx(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class WM{}const qk=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Wk extends WM{normalizePropertyName(e,t){return jM(e)}normalizeStyleValue(e,t,r,s){let u="";const l=r.toString().trim();if(qk.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&s.push(function jO(n,e){return new y.vHH(3005,!1)}())}return l+u}}function $x(n,e,t,r,s,u,l,p,_,I,S,R,F){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:u,toState:r,toStyles:l,timelines:p,queriedElements:_,preStyleProps:I,postStyleProps:S,totalTime:R,errors:F}}const KM={};class Hx{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function Kk(n,e,t,r,s){return n.some(u=>u(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){let s=this._stateStyles.get("*");return void 0!==e&&(s=this._stateStyles.get(e?.toString())||s),s?s.buildStyles(t,r):new Map}build(e,t,r,s,u,l,p,_,I,S){const R=[],F=this.ast.options&&this.ast.options.params||KM,K=this.buildStyles(r,p&&p.params||KM,R),le=_&&_.params||KM,Se=this.buildStyles(s,le,R),Qe=new Set,ot=new Map,it=new Map,ut="void"===s,Ft={params:Zk(le,F),delay:this.ast.options?.delay},$t=S?[]:GM(e,t,this.ast.animation,u,l,K,Se,Ft,I,R);let vn=0;if($t.forEach(nu=>{vn=Math.max(nu.duration+nu.delay,vn)}),R.length)return $x(t,this._triggerName,r,s,ut,K,Se,[],[],ot,it,vn,R);$t.forEach(nu=>{const gh=nu.element,iP=sa(ot,gh,new Set);nu.preStyleProps.forEach(_m=>iP.add(_m));const sI=sa(it,gh,new Set);nu.postStyleProps.forEach(_m=>sI.add(_m)),gh!==t&&Qe.add(gh)});const ts=fS(Qe.values());return $x(t,this._triggerName,r,s,ut,K,Se,$t,ts,ot,it,vn)}}function Zk(n,e){const t=tI(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Yk{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,s=tI(this.defaultParams);return Object.keys(e).forEach(u=>{const l=e[u];null!==l&&(s[u]=l)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((l,p)=>{l&&(l=rI(l,s,t));const _=this.normalizer.normalizePropertyName(p,t);l=this.normalizer.normalizeStyleValue(p,_,l,t),r.set(p,l)})}),r}}class Xk{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(s=>{this.states.set(s.name,new Yk(s.style,s.options&&s.options.params||{},r))}),zx(this.states,"true","1"),zx(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new Hx(e,s,this.states))}),this.fallbackTransition=function Jk(n,e,t){return new Hx(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(l=>l.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function zx(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const eL=new yS;class tL{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=$M(this._driver,t,r,[]);if(r.length)throw function sk(n){return new y.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const s=e.element,u=Sx(this._normalizer,e.keyframes,t,r);return this._driver.animate(s,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],u=this._animations.get(e);let l;const p=new Map;if(u?(l=GM(this._driver,t,u,FM,cS,new Map,new Map,r,eL,s),l.forEach(S=>{const R=sa(p,S.element,new Map);S.postStyleProps.forEach(F=>R.set(F,null))})):(s.push(function ok(){return new y.vHH(3300,!1)}()),l=[]),s.length)throw function ak(n){return new y.vHH(3504,!1)}();p.forEach((S,R)=>{S.forEach((F,B)=>{S.set(B,this._driver.computeStyle(R,B,fh))})});const I=mp(l.map(S=>{const R=p.get(S.element);return this._buildPlayer(S,new Map,R)}));return this._playersById.set(e,I),I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function uk(n){return new y.vHH(3301,!1)}();return t}listen(e,t,r,s){const u=OM(t,"","","");return xM(this._getPlayer(e),r,u,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const Gx="ng-animate-queued",ZM="ng-animate-disabled",oL=[],qx={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},aL={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},cc="__ng_removed";class YM{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function dL(n){return n??null}(r?e.value:e),r){const u=tI(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const iI="void",QM=new YM(iI);class uL{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,tu(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.has(t))throw function ck(n,e){return new y.vHH(3302,!1)}();if(null==r||0==r.length)throw function lk(n){return new y.vHH(3303,!1)}();if(!function hL(n){return"start"==n||"done"==n}(r))throw function dk(n,e){return new y.vHH(3400,!1)}();const u=sa(this._elementListeners,e,[]),l={name:t,phase:r,callback:s};u.push(l);const p=sa(this._engine.statesByElement,e,new Map);return p.has(t)||(tu(e,lS),tu(e,lS+"-"+t),p.set(t,QM)),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(l);_>=0&&u.splice(_,1),this._triggers.has(t)||p.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function hk(n){return new y.vHH(3401,!1)}();return t}trigger(e,t,r,s=!0){const u=this._getTrigger(t),l=new XM(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(tu(e,lS),tu(e,lS+"-"+t),this._engine.statesByElement.set(e,p=new Map));let _=p.get(t);const I=new YM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&I.absorbOptions(_.options),p.set(t,I),_||(_=QM),I.value!==iI&&_.value===I.value){if(!function gL(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const u=t[s];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,I.params)){const le=[],Se=u.matchStyles(_.value,_.params,le),Qe=u.matchStyles(I.value,I.params,le);le.length?this._engine.reportError(le):this._engine.afterFlush(()=>{ym(e,Se),Cl(e,Qe)})}return}const F=sa(this._engine.playersByElement,e,[]);F.forEach(le=>{le.namespaceId==this.id&&le.triggerName==t&&le.queued&&le.destroy()});let B=u.matchTransition(_.value,I.value,e,I.params),K=!1;if(!B){if(!s)return;B=u.fallbackTransition,K=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:_,toState:I,player:l,isFallbackTransition:K}),K||(tu(e,Gx),l.onStart(()=>{y_(e,Gx)})),l.onDone(()=>{let le=this.players.indexOf(l);le>=0&&this.players.splice(le,1);const Se=this._engine.playersByElement.get(e);if(Se){let Qe=Se.indexOf(l);Qe>=0&&Se.splice(Qe,1)}}),this.players.push(l),F.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,dS,!0);r.forEach(s=>{if(s[cc])return;const u=this._engine.fetchNamespacesByElement(s);u.size?u.forEach(l=>l.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const u=this._engine.statesByElement.get(e),l=new Map;if(u){const p=[];if(u.forEach((_,I)=>{if(l.set(I,_.value),this._triggers.has(I)){const S=this.trigger(e,I,iI,s);S&&p.push(S)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&mp(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(u=>{const l=u.name;if(s.has(l))return;s.add(l);const _=this._triggers.get(l).fallbackTransition,I=r.get(l)||QM,S=new YM(iI),R=new XM(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:_,fromState:I,toState:S,player:R,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)s=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[cc];(!u||u===qx)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){tu(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const u=r.element,l=this._elementListeners.get(u);l&&l.forEach(p=>{if(p.name==r.triggerName){const _=OM(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,xM(r.player,p.phase,_,p.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const u=r.transition.ast.depCount,l=s.transition.ast.depCount;return 0==u||0==l?u-l:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class cL{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,u)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new uL(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,p=this.driver.getParentElement(t);for(;p;){const _=s.get(p);if(_){const I=r.indexOf(_);r.splice(I+1,0,e),l=!0;break}p=this.driver.getParentElement(p)}l||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let s of r.values())if(s.namespaceId){const u=this._fetchNamespace(s.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,s){if(ES(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!ES(t))return;const u=t[cc];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),tu(e,ZM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),y_(e,ZM))}removeNode(e,t,r){if(ES(t)){const s=e?this._fetchNamespace(e):null;s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,s,u){this.collectedLeaveElements.push(t),t[cc]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,s,u){return ES(t)?this._fetchNamespace(e).listen(t,r,s,u):()=>{}}_buildInstruction(e,t,r,s,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,dS,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,UM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return mp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[cc];if(t&&t.setForRemoval){if(e[cc]=qx,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ZM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)tu(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?mp(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function fk(n){return new y.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new yS,s=[],u=new Map,l=[],p=new Map,_=new Map,I=new Map,S=new Set;this.disabledNodes.forEach(gt=>{S.add(gt);const At=this.driver.query(gt,".ng-animate-queued",!0);for(let Vt=0;Vt<At.length;Vt++)S.add(At[Vt])});const R=this.bodyNode,F=Array.from(this.statesByElement.keys()),B=Zx(F,this.collectedEnterElements),K=new Map;let le=0;B.forEach((gt,At)=>{const Vt=FM+le++;K.set(At,Vt),gt.forEach(pn=>tu(pn,Vt))});const Se=[],Qe=new Set,ot=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const At=this.collectedLeaveElements[gt],Vt=At[cc];Vt&&Vt.setForRemoval&&(Se.push(At),Qe.add(At),Vt.hasAnimation?this.driver.query(At,".ng-star-inserted",!0).forEach(pn=>Qe.add(pn)):ot.add(At))}const it=new Map,ut=Zx(F,Array.from(Qe));ut.forEach((gt,At)=>{const Vt=cS+le++;it.set(At,Vt),gt.forEach(pn=>tu(pn,Vt))}),e.push(()=>{B.forEach((gt,At)=>{const Vt=K.get(At);gt.forEach(pn=>y_(pn,Vt))}),ut.forEach((gt,At)=>{const Vt=it.get(At);gt.forEach(pn=>y_(pn,Vt))}),Se.forEach(gt=>{this.processLeaveNode(gt)})});const Ft=[],$t=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(t).forEach(Vt=>{const pn=Vt.player,Gi=Vt.element;if(Ft.push(pn),this.collectedEnterElements.length){const vs=Gi[cc];if(vs&&vs.setForMove){if(vs.previousTriggersValues&&vs.previousTriggersValues.has(Vt.triggerName)){const Em=vs.previousTriggersValues.get(Vt.triggerName),ru=this.statesByElement.get(Vt.element);if(ru&&ru.has(Vt.triggerName)){const DS=ru.get(Vt.triggerName);DS.value=Em,ru.set(Vt.triggerName,DS)}}return void pn.destroy()}}const Al=!R||!this.driver.containsElement(R,Gi),aa=it.get(Gi),vp=K.get(Gi),jr=this._buildInstruction(Vt,r,vp,aa,Al);if(jr.errors&&jr.errors.length)return void $t.push(jr);if(Al)return pn.onStart(()=>ym(Gi,jr.fromStyles)),pn.onDestroy(()=>Cl(Gi,jr.toStyles)),void s.push(pn);if(Vt.isFallbackTransition)return pn.onStart(()=>ym(Gi,jr.fromStyles)),pn.onDestroy(()=>Cl(Gi,jr.toStyles)),void s.push(pn);const aP=[];jr.timelines.forEach(vs=>{vs.stretchStartingKeyframe=!0,this.disabledNodes.has(vs.element)||aP.push(vs)}),jr.timelines=aP,r.append(Gi,jr.timelines),l.push({instruction:jr,player:pn,element:Gi}),jr.queriedElements.forEach(vs=>sa(p,vs,[]).push(pn)),jr.preStyleProps.forEach((vs,Em)=>{if(vs.size){let ru=_.get(Em);ru||_.set(Em,ru=new Set),vs.forEach((DS,tR)=>ru.add(tR))}}),jr.postStyleProps.forEach((vs,Em)=>{let ru=I.get(Em);ru||I.set(Em,ru=new Set),vs.forEach((DS,tR)=>ru.add(tR))})});if($t.length){const gt=[];$t.forEach(At=>{gt.push(function pk(n,e){return new y.vHH(3505,!1)}())}),Ft.forEach(At=>At.destroy()),this.reportError(gt)}const vn=new Map,ts=new Map;l.forEach(gt=>{const At=gt.element;r.has(At)&&(ts.set(At,At),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,vn))}),s.forEach(gt=>{const At=gt.element;this._getPreviousPlayers(At,!1,gt.namespaceId,gt.triggerName,null).forEach(pn=>{sa(vn,At,[]).push(pn),pn.destroy()})});const nu=Se.filter(gt=>Qx(gt,_,I)),gh=new Map;Kx(gh,this.driver,ot,I,fh).forEach(gt=>{Qx(gt,_,I)&&nu.push(gt)});const sI=new Map;B.forEach((gt,At)=>{Kx(sI,this.driver,new Set(gt),_,"!")}),nu.forEach(gt=>{const At=gh.get(gt),Vt=sI.get(gt);gh.set(gt,new Map([...At?.entries()??[],...Vt?.entries()??[]]))});const _m=[],sP=[],oP={};l.forEach(gt=>{const{element:At,player:Vt,instruction:pn}=gt;if(r.has(At)){if(S.has(At))return Vt.onDestroy(()=>Cl(At,pn.toStyles)),Vt.disabled=!0,Vt.overrideTotalTime(pn.totalTime),void s.push(Vt);let Gi=oP;if(ts.size>1){let aa=At;const vp=[];for(;aa=aa.parentNode;){const jr=ts.get(aa);if(jr){Gi=jr;break}vp.push(aa)}vp.forEach(jr=>ts.set(jr,Gi))}const Al=this._buildAnimation(Vt.namespaceId,pn,vn,u,sI,gh);if(Vt.setRealPlayer(Al),Gi===oP)_m.push(Vt);else{const aa=this.playersByElement.get(Gi);aa&&aa.length&&(Vt.parentPlayer=mp(aa)),s.push(Vt)}}else ym(At,pn.fromStyles),Vt.onDestroy(()=>Cl(At,pn.toStyles)),sP.push(Vt),S.has(At)&&s.push(Vt)}),sP.forEach(gt=>{const At=u.get(gt.element);if(At&&At.length){const Vt=mp(At);gt.setRealPlayer(Vt)}}),s.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<Se.length;gt++){const At=Se[gt],Vt=At[cc];if(y_(At,cS),Vt&&Vt.hasAnimation)continue;let pn=[];if(p.size){let Al=p.get(At);Al&&Al.length&&pn.push(...Al);let aa=this.driver.query(At,UM,!0);for(let vp=0;vp<aa.length;vp++){let jr=p.get(aa[vp]);jr&&jr.length&&pn.push(...jr)}}const Gi=pn.filter(Al=>!Al.destroyed);Gi.length?fL(this,At,Gi):this.processLeaveNode(At)}return Se.length=0,_m.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const At=this.players.indexOf(gt);this.players.splice(At,1)}),gt.play()}),_m}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,u){let l=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(l=p)}else{const p=this.playersByElement.get(e);if(p){const _=!u||u==iI;p.forEach(I=>{I.queued||!_&&I.triggerName!=s||l.push(I)})}}return(r||s)&&(l=l.filter(p=>!(r&&r!=p.namespaceId||s&&s!=p.triggerName))),l}_beforeAnimationBuild(e,t,r){const u=t.element,l=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const I=_.element,S=I!==u,R=sa(r,I,[]);this._getPreviousPlayers(I,S,l,p,t.toState).forEach(B=>{const K=B.getRealPlayer();K.beforeDestroy&&K.beforeDestroy(),B.destroy(),R.push(B)})}ym(u,t.fromStyles)}_buildAnimation(e,t,r,s,u,l){const p=t.triggerName,_=t.element,I=[],S=new Set,R=new Set,F=t.timelines.map(K=>{const le=K.element;S.add(le);const Se=le[cc];if(Se&&Se.removedBeforeQueried)return new eI(K.duration,K.delay);const Qe=le!==_,ot=function pL(n){const e=[];return Yx(n,e),e}((r.get(le)||oL).map(vn=>vn.getRealPlayer())).filter(vn=>!!vn.element&&vn.element===le),it=u.get(le),ut=l.get(le),Ft=Sx(this._normalizer,K.keyframes,it,ut),$t=this._buildPlayer(K,Ft,ot);if(K.subTimeline&&s&&R.add(le),Qe){const vn=new XM(e,p,le);vn.setRealPlayer($t),I.push(vn)}return $t});I.forEach(K=>{sa(this.playersByQueriedElement,K.element,[]).push(K),K.onDone(()=>function lL(n,e,t){let r=n.get(e);if(r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,K.element,K))}),S.forEach(K=>tu(K,Px));const B=mp(F);return B.onDestroy(()=>{S.forEach(K=>y_(K,Px)),Cl(_,t.toStyles)}),R.forEach(K=>{sa(s,K,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new eI(e.duration,e.delay)}}class XM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new eI,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(s=>xM(e,r,void 0,s))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){sa(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function ES(n){return n&&1===n.nodeType}function Wx(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Kx(n,e,t,r,s){const u=[];t.forEach(_=>u.push(Wx(_)));const l=[];r.forEach((_,I)=>{const S=new Map;_.forEach(R=>{const F=e.computeStyle(I,R,s);S.set(R,F),(!F||0==F.length)&&(I[cc]=aL,l.push(I))}),n.set(I,S)});let p=0;return t.forEach(_=>Wx(_,u[p++])),l}function Zx(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const s=new Set(e),u=new Map;function l(p){if(!p)return 1;let _=u.get(p);if(_)return _;const I=p.parentNode;return _=t.has(I)?I:s.has(I)?1:l(I),u.set(p,_),_}return e.forEach(p=>{const _=l(p);1!==_&&t.get(_).push(p)}),t}function tu(n,e){n.classList?.add(e)}function y_(n,e){n.classList?.remove(e)}function fL(n,e,t){mp(t).onDone(()=>n.processLeaveNode(e))}function Yx(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Tx?Yx(r.players,e):e.push(r)}}function Qx(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(u=>s.add(u)):e.set(n,r),t.delete(n),!0}class wS{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,u)=>{},this._transitionEngine=new cL(e,t,r),this._timelineEngine=new tL(e,t,r),this._transitionEngine.onRemovalComplete=(s,u)=>this.onRemovalComplete(s,u)}registerTrigger(e,t,r,s,u){const l=e+"-"+s;let p=this._triggerCache[l];if(!p){const _=[],S=$M(this._driver,u,_,[]);if(_.length)throw function rk(n,e){return new y.vHH(3404,!1)}();p=function Qk(n,e,t){return new Xk(n,e,t)}(s,S,this._normalizer),this._triggerCache[l]=p}this._transitionEngine.registerTrigger(t,s,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[u,l]=Cx(r);this._timelineEngine.command(u,t,l,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,u){if("@"==r.charAt(0)){const[l,p]=Cx(r);return this._timelineEngine.listen(l,t,p,u)}return this._transitionEngine.listen(e,t,r,s,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let yL=(()=>{class e{constructor(r,s,u){this._element=r,this._startStyles=s,this._endStyles=u,this._state=0;let l=e.initialStylesByElement.get(r);l||e.initialStylesByElement.set(r,l=new Map),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&Cl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Cl(this._element,this._initialStyles),this._endStyles&&(Cl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(ym(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ym(this._element,this._endStyles),this._endStyles=null),Cl(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function JM(n){let e=null;return n.forEach((t,r)=>{(function vL(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Xx{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,s)=>{"offset"!==s&&e.set(s,this._finished?r:Fx(this.element,s))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class _L{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Mx(e,t)}getParentElement(e){return kM(e)}query(e,t,r){return Rx(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,u,l=[]){const _={duration:r,delay:s,fill:0==s?"both":"forwards"};u&&(_.easing=u);const I=new Map,S=l.filter(B=>B instanceof Xx);(function Sk(n,e){return 0===n||0===e})(r,s)&&S.forEach(B=>{B.currentSnapshot.forEach((K,le)=>I.set(le,K))});let R=function Dk(n){return n.length?n[0]instanceof Map?n:n.map(e=>Ox(e)):[]}(t).map(B=>yp(B));R=function Ck(n,e,t){if(t.size&&e.length){let r=e[0],s=[];if(t.forEach((u,l)=>{r.has(l)||s.push(l),r.set(l,u)}),s.length)for(let u=1;u<e.length;u++){let l=e[u];s.forEach(p=>l.set(p,Fx(n,p)))}}return e}(e,R,I);const F=function mL(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=JM(e[0]),e.length>1&&(r=JM(e[e.length-1]))):e instanceof Map&&(t=JM(e)),t||r?new yL(n,t,r):null}(e,R);return new Xx(e,R,_,F)}}let EL=(()=>{var n;class e extends wx{constructor(r,s){super(),this._nextAnimationId=0,this._renderer=r.createRenderer(s.body,{id:"0",encapsulation:y.ifc.None,styles:[],data:{animation:[]}})}build(r){const s=this._nextAnimationId.toString();this._nextAnimationId++;const u=Array.isArray(r)?Ix(r):r;return Jx(this._renderer,null,s,"register",[u]),new wL(s,this._renderer)}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(y.FYo),y.LFG(pe))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();class wL extends kO{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new IL(this._id,e,t||{},this._renderer)}}class IL{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Jx(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Jx(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const eP="@.disabled";let DL=(()=>{var n;class e{constructor(r,s,u){this.delegate=r,this.engine=s,this._zone=u,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,s.onRemovalComplete=(l,p)=>{const _=p?.parentNode(l);_&&p.removeChild(_,l)}}createRenderer(r,s){const l=this.delegate.createRenderer(r,s);if(!(r&&s&&s.data&&s.data.animation)){let R=this._rendererCache.get(l);return R||(R=new tP("",l,this.engine,()=>this._rendererCache.delete(l)),this._rendererCache.set(l,R)),R}const p=s.id,_=s.id+"-"+this._currentId;this._currentId++,this.engine.register(_,r);const I=R=>{Array.isArray(R)?R.forEach(I):this.engine.registerTrigger(p,_,r,R.name,R)};return s.data.animation.forEach(I),new TL(this,_,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(r,s,u){r>=0&&r<this._microtaskId?this._zone.run(()=>s(u)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[p,_]=l;p(_)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,u]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(y.FYo),y.LFG(wS),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();class tP{constructor(e,t,r,s){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=s}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==eP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class TL extends tP{constructor(e,t,r,s,u){super(t,r,s,u),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==eP?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function bL(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),l="";return"@"!=u.charAt(0)&&([u,l]=function SL(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,s,u,l,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let CL=(()=>{var n;class e extends wS{constructor(r,s,u,l){super(r.body,s,u)}ngOnDestroy(){this.flush()}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(pe),y.LFG(LM),y.LFG(WM),y.LFG(y.z2F))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),e})();const nP=[{provide:wx,useClass:EL},{provide:WM,useFactory:function AL(){return new Wk}},{provide:wS,useClass:CL},{provide:y.FYo,useFactory:function ML(n,e,t){return new DL(n,e,t)},deps:[Js,wS,y.R0b]}],eR=[{provide:LM,useFactory:()=>new _L},{provide:y.QbO,useValue:"BrowserAnimations"},...nP],rP=[{provide:LM,useClass:Nx},{provide:y.QbO,useValue:"NoopAnimations"},...nP];let RL=(()=>{var n;class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?rP:eR}}}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:eR,imports:[Ic]}),e})(),NL=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=y.oAB({type:n,bootstrap:[PO]}),n.\u0275inj=y.cJS({imports:[Ic,MO,er.hO.initializeApp(OO_firebaseConfig),gN,RL]}),e})();_r().bootstrapModule(NL).catch(n=>console.error(n))},5619:(lt,De,P)=>{P.d(De,{X:()=>X});var y=P(8645);class X extends y.x{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const re=super._subscribe(J);return!re.closed&&J.next(this._value),re}getValue(){const{hasError:J,thrownError:re,_value:pe}=this;if(J)throw re;return this._throwIfClosed(),pe}next(J){super.next(this._value=J)}}},5592:(lt,De,P)=>{P.d(De,{y:()=>Oe});var y=P(305),X=P(7394),k=P(4850),J=P(8407),re=P(2653),pe=P(4674),ge=P(1441);let Oe=(()=>{class Y{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Ze=new Y;return Ze.source=this,Ze.operator=Ae,Ze}subscribe(Ae,Ze,xe){const ze=function H(Y){return Y&&Y instanceof y.Lv||function U(Y){return Y&&(0,pe.m)(Y.next)&&(0,pe.m)(Y.error)&&(0,pe.m)(Y.complete)}(Y)&&(0,X.Nn)(Y)}(Ae)?Ae:new y.Hp(Ae,Ze,xe);return(0,ge.x)(()=>{const{operator:Le,source:mt}=this;ze.add(Le?Le.call(ze,mt):mt?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Ze){Ae.error(Ze)}}forEach(Ae,Ze){return new(Ze=fe(Ze))((xe,ze)=>{const Le=new y.Hp({next:mt=>{try{Ae(mt)}catch(ht){ze(ht),Le.unsubscribe()}},error:ze,complete:xe});this.subscribe(Le)})}_subscribe(Ae){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(Ae)}[k.L](){return this}pipe(...Ae){return(0,J.U)(Ae)(this)}toPromise(Ae){return new(Ae=fe(Ae))((Ze,xe)=>{let ze;this.subscribe(Le=>ze=Le,Le=>xe(Le),()=>Ze(ze))})}}return Y.create=Ve=>new Y(Ve),Y})();function fe(Y){var Ve;return null!==(Ve=Y??re.config.Promise)&&void 0!==Ve?Ve:Promise}},8645:(lt,De,P)=>{P.d(De,{x:()=>ge});var y=P(5592),X=P(7394);const J=(0,P(2306).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=P(9039),pe=P(1441);let ge=(()=>{class fe extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Y=new Oe(this,this);return Y.operator=H,Y}_throwIfClosed(){if(this.closed)throw new J}next(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(H)}})}error(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Y}=this;for(;Y.length;)Y.shift().error(H)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Y,isStopped:Ve,observers:Ae}=this;return Y||Ve?X.Lc:(this.currentObservers=null,Ae.push(H),new X.w0(()=>{this.currentObservers=null,(0,re.P)(Ae,H)}))}_checkFinalizedStatuses(H){const{hasError:Y,thrownError:Ve,isStopped:Ae}=this;Y?H.error(Ve):Ae&&H.complete()}asObservable(){const H=new y.y;return H.source=this,H}}return fe.create=(U,H)=>new Oe(U,H),fe})();class Oe extends ge{constructor(U,H){super(),this.destination=U,this.source=H}next(U){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Y||Y.call(H,U)}error(U){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Y||Y.call(H,U)}complete(){var U,H;null===(H=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===H||H.call(U)}_subscribe(U){var H,Y;return null!==(Y=null===(H=this.source)||void 0===H?void 0:H.subscribe(U))&&void 0!==Y?Y:X.Lc}}},305:(lt,De,P)=>{P.d(De,{Hp:()=>xe,Lv:()=>Y});var y=P(4674),X=P(7394),k=P(2653),J=P(3894),re=P(2420);const pe=fe("C",void 0,void 0);function fe(ne,ve,ee){return{kind:ne,value:ve,error:ee}}var U=P(7599),H=P(1441);class Y extends X.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,X.Nn)(ve)&&ve.add(this)):this.destination=ht}static create(ve,ee,Te){return new xe(ve,ee,Te)}next(ve){this.isStopped?mt(function Oe(ne){return fe("N",ne,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?mt(function ge(ne){return fe("E",void 0,ne)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?mt(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Ae(ne,ve){return Ve.call(ne,ve)}class Ze{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:ee}=this;if(ee.next)try{ee.next(ve)}catch(Te){ze(Te)}}error(ve){const{partialObserver:ee}=this;if(ee.error)try{ee.error(ve)}catch(Te){ze(Te)}else ze(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(ee){ze(ee)}}}class xe extends Y{constructor(ve,ee,Te){let ke;if(super(),(0,y.m)(ve)||!ve)ke={next:ve??void 0,error:ee??void 0,complete:Te??void 0};else{let Ge;this&&k.config.useDeprecatedNextContext?(Ge=Object.create(ve),Ge.unsubscribe=()=>this.unsubscribe(),ke={next:ve.next&&Ae(ve.next,Ge),error:ve.error&&Ae(ve.error,Ge),complete:ve.complete&&Ae(ve.complete,Ge)}):ke=ve}this.destination=new Ze(ke)}}function ze(ne){k.config.useDeprecatedSynchronousErrorHandling?(0,H.O)(ne):(0,J.h)(ne)}function mt(ne,ve){const{onStoppedNotification:ee}=k.config;ee&&U.z.setTimeout(()=>ee(ne,ve))}const ht={closed:!0,next:re.Z,error:function Le(ne){throw ne},complete:re.Z}},7394:(lt,De,P)=>{P.d(De,{Lc:()=>pe,w0:()=>re,Nn:()=>ge});var y=P(4674);const k=(0,P(2306).d)(fe=>function(H){fe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Y,Ve)=>`${Ve+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var J=P(9039);class re{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ae of H)Ae.remove(this);else H.remove(this);const{initialTeardown:Y}=this;if((0,y.m)(Y))try{Y()}catch(Ae){U=Ae instanceof k?Ae.errors:[Ae]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Ae of Ve)try{Oe(Ae)}catch(Ze){U=U??[],Ze instanceof k?U=[...U,...Ze.errors]:U.push(Ze)}}if(U)throw new k(U)}}add(U){var H;if(U&&U!==this)if(this.closed)Oe(U);else{if(U instanceof re){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(U)}}_hasParent(U){const{_parentage:H}=this;return H===U||Array.isArray(H)&&H.includes(U)}_addParent(U){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(U),H):H?[H,U]:U}_removeParent(U){const{_parentage:H}=this;H===U?this._parentage=null:Array.isArray(H)&&(0,J.P)(H,U)}remove(U){const{_finalizers:H}=this;H&&(0,J.P)(H,U),U instanceof re&&U._removeParent(this)}}re.EMPTY=(()=>{const fe=new re;return fe.closed=!0,fe})();const pe=re.EMPTY;function ge(fe){return fe instanceof re||fe&&"closed"in fe&&(0,y.m)(fe.remove)&&(0,y.m)(fe.add)&&(0,y.m)(fe.unsubscribe)}function Oe(fe){(0,y.m)(fe)?fe():fe.unsubscribe()}},2653:(lt,De,P)=>{P.d(De,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(lt,De,P)=>{P.d(De,{E:()=>X});const X=new(P(5592).y)(re=>re.complete())},2459:(lt,De,P)=>{P.d(De,{D:()=>ve});var y=P(4829),X=P(3093),k=P(5137),pe=P(5592),Oe=P(4971),fe=P(4674),U=P(7103);function Y(ee,Te){if(!ee)throw new Error("Iterable cannot be null");return new pe.y(ke=>{(0,U.f)(ke,Te,()=>{const Ge=ee[Symbol.asyncIterator]();(0,U.f)(ke,Te,()=>{Ge.next().then(oe=>{oe.done?ke.complete():ke.next(oe.value)})},0,!0)})})}var Ve=P(8382),Ae=P(4026),Ze=P(4266),xe=P(3664),ze=P(5726),Le=P(9853),mt=P(541);function ve(ee,Te){return Te?function ne(ee,Te){if(null!=ee){if((0,Ve.c)(ee))return function J(ee,Te){return(0,y.Xf)(ee).pipe((0,k.R)(Te),(0,X.Q)(Te))}(ee,Te);if((0,Ze.z)(ee))return function ge(ee,Te){return new pe.y(ke=>{let Ge=0;return Te.schedule(function(){Ge===ee.length?ke.complete():(ke.next(ee[Ge++]),ke.closed||this.schedule())})})}(ee,Te);if((0,Ae.t)(ee))return function re(ee,Te){return(0,y.Xf)(ee).pipe((0,k.R)(Te),(0,X.Q)(Te))}(ee,Te);if((0,ze.D)(ee))return Y(ee,Te);if((0,xe.T)(ee))return function H(ee,Te){return new pe.y(ke=>{let Ge;return(0,U.f)(ke,Te,()=>{Ge=ee[Oe.h](),(0,U.f)(ke,Te,()=>{let oe,_t;try{({value:oe,done:_t}=Ge.next())}catch(Ht){return void ke.error(Ht)}_t?ke.complete():ke.next(oe)},0,!0)}),()=>(0,fe.m)(Ge?.return)&&Ge.return()})}(ee,Te);if((0,mt.L)(ee))return function ht(ee,Te){return Y((0,mt.Q)(ee),Te)}(ee,Te)}throw(0,Le.z)(ee)}(ee,Te):(0,y.Xf)(ee)}},4829:(lt,De,P)=>{P.d(De,{Xf:()=>Ve});var y=P(7582),X=P(4266),k=P(4026),J=P(5592),re=P(8382),pe=P(5726),ge=P(9853),Oe=P(3664),fe=P(541),U=P(4674),H=P(3894),Y=P(4850);function Ve(ne){if(ne instanceof J.y)return ne;if(null!=ne){if((0,re.c)(ne))return function Ae(ne){return new J.y(ve=>{const ee=ne[Y.L]();if((0,U.m)(ee.subscribe))return ee.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ne);if((0,X.z)(ne))return function Ze(ne){return new J.y(ve=>{for(let ee=0;ee<ne.length&&!ve.closed;ee++)ve.next(ne[ee]);ve.complete()})}(ne);if((0,k.t)(ne))return function xe(ne){return new J.y(ve=>{ne.then(ee=>{ve.closed||(ve.next(ee),ve.complete())},ee=>ve.error(ee)).then(null,H.h)})}(ne);if((0,pe.D)(ne))return Le(ne);if((0,Oe.T)(ne))return function ze(ne){return new J.y(ve=>{for(const ee of ne)if(ve.next(ee),ve.closed)return;ve.complete()})}(ne);if((0,fe.L)(ne))return function mt(ne){return Le((0,fe.Q)(ne))}(ne)}throw(0,ge.z)(ne)}function Le(ne){return new J.y(ve=>{(function ht(ne,ve){var ee,Te,ke,Ge;return(0,y.mG)(this,void 0,void 0,function*(){try{for(ee=(0,y.KL)(ne);!(Te=yield ee.next()).done;)if(ve.next(Te.value),ve.closed)return}catch(oe){ke={error:oe}}finally{try{Te&&!Te.done&&(Ge=ee.return)&&(yield Ge.call(ee))}finally{if(ke)throw ke.error}}ve.complete()})})(ne,ve).catch(ee=>ve.error(ee))})}},3019:(lt,De,P)=>{P.d(De,{T:()=>pe});var y=P(7537),X=P(4829),k=P(6232),J=P(4564),re=P(2459);function pe(...ge){const Oe=(0,J.yG)(ge),fe=(0,J._6)(ge,1/0),U=ge;return U.length?1===U.length?(0,X.Xf)(U[0]):(0,y.J)(fe)((0,re.D)(U,Oe)):k.E}},2096:(lt,De,P)=>{P.d(De,{of:()=>k});var y=P(4564),X=P(2459);function k(...J){const re=(0,y.yG)(J);return(0,X.D)(J,re)}},8251:(lt,De,P)=>{P.d(De,{x:()=>X});var y=P(305);function X(J,re,pe,ge,Oe){return new k(J,re,pe,ge,Oe)}class k extends y.Lv{constructor(re,pe,ge,Oe,fe,U){super(re),this.onFinalize=fe,this.shouldUnsubscribe=U,this._next=pe?function(H){try{pe(H)}catch(Y){re.error(Y)}}:super._next,this._error=Oe?function(H){try{Oe(H)}catch(Y){re.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(H){re.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},3997:(lt,De,P)=>{P.d(De,{x:()=>J});var y=P(2737),X=P(9360),k=P(8251);function J(pe,ge=y.y){return pe=pe??re,(0,X.e)((Oe,fe)=>{let U,H=!0;Oe.subscribe((0,k.x)(fe,Y=>{const Ve=ge(Y);(H||!pe(U,Ve))&&(H=!1,U=Ve,fe.next(Y))}))})}function re(pe,ge){return pe===ge}},7398:(lt,De,P)=>{P.d(De,{U:()=>k});var y=P(9360),X=P(8251);function k(J,re){return(0,y.e)((pe,ge)=>{let Oe=0;pe.subscribe((0,X.x)(ge,fe=>{ge.next(J.call(re,fe,Oe++))}))})}},7537:(lt,De,P)=>{P.d(De,{J:()=>k});var y=P(1631),X=P(2737);function k(J=1/0){return(0,y.z)(X.y,J)}},1631:(lt,De,P)=>{P.d(De,{z:()=>Oe});var y=P(7398),X=P(4829),k=P(9360),J=P(7103),re=P(8251),ge=P(4674);function Oe(fe,U,H=1/0){return(0,ge.m)(U)?Oe((Y,Ve)=>(0,y.U)((Ae,Ze)=>U(Y,Ae,Ve,Ze))((0,X.Xf)(fe(Y,Ve))),H):("number"==typeof U&&(H=U),(0,k.e)((Y,Ve)=>function pe(fe,U,H,Y,Ve,Ae,Ze,xe){const ze=[];let Le=0,mt=0,ht=!1;const ne=()=>{ht&&!ze.length&&!Le&&U.complete()},ve=Te=>Le<Y?ee(Te):ze.push(Te),ee=Te=>{Ae&&U.next(Te),Le++;let ke=!1;(0,X.Xf)(H(Te,mt++)).subscribe((0,re.x)(U,Ge=>{Ve?.(Ge),Ae?ve(Ge):U.next(Ge)},()=>{ke=!0},void 0,()=>{if(ke)try{for(Le--;ze.length&&Le<Y;){const Ge=ze.shift();Ze?(0,J.f)(U,Ze,()=>ee(Ge)):ee(Ge)}ne()}catch(Ge){U.error(Ge)}}))};return fe.subscribe((0,re.x)(U,ve,()=>{ht=!0,ne()})),()=>{xe?.()}}(Y,Ve,fe,H)))}},3093:(lt,De,P)=>{P.d(De,{Q:()=>J});var y=P(7103),X=P(9360),k=P(8251);function J(re,pe=0){return(0,X.e)((ge,Oe)=>{ge.subscribe((0,k.x)(Oe,fe=>(0,y.f)(Oe,re,()=>Oe.next(fe),pe),()=>(0,y.f)(Oe,re,()=>Oe.complete(),pe),fe=>(0,y.f)(Oe,re,()=>Oe.error(fe),pe)))})}},3020:(lt,De,P)=>{P.d(De,{B:()=>re});var y=P(4829),X=P(8645),k=P(305),J=P(9360);function re(ge={}){const{connector:Oe=(()=>new X.x),resetOnError:fe=!0,resetOnComplete:U=!0,resetOnRefCountZero:H=!0}=ge;return Y=>{let Ve,Ae,Ze,xe=0,ze=!1,Le=!1;const mt=()=>{Ae?.unsubscribe(),Ae=void 0},ht=()=>{mt(),Ve=Ze=void 0,ze=Le=!1},ne=()=>{const ve=Ve;ht(),ve?.unsubscribe()};return(0,J.e)((ve,ee)=>{xe++,!Le&&!ze&&mt();const Te=Ze=Ze??Oe();ee.add(()=>{xe--,0===xe&&!Le&&!ze&&(Ae=pe(ne,H))}),Te.subscribe(ee),!Ve&&xe>0&&(Ve=new k.Hp({next:ke=>Te.next(ke),error:ke=>{Le=!0,mt(),Ae=pe(ht,fe,ke),Te.error(ke)},complete:()=>{ze=!0,mt(),Ae=pe(ht,U),Te.complete()}}),(0,y.Xf)(ve).subscribe(Ve))})(Y)}}function pe(ge,Oe,...fe){if(!0===Oe)return void ge();if(!1===Oe)return;const U=new k.Hp({next:()=>{U.unsubscribe(),ge()}});return(0,y.Xf)(Oe(...fe)).subscribe(U)}},5137:(lt,De,P)=>{P.d(De,{R:()=>X});var y=P(9360);function X(k,J=0){return(0,y.e)((re,pe)=>{pe.add(k.schedule(()=>re.subscribe(pe),J))})}},4664:(lt,De,P)=>{P.d(De,{w:()=>J});var y=P(4829),X=P(9360),k=P(8251);function J(re,pe){return(0,X.e)((ge,Oe)=>{let fe=null,U=0,H=!1;const Y=()=>H&&!fe&&Oe.complete();ge.subscribe((0,k.x)(Oe,Ve=>{fe?.unsubscribe();let Ae=0;const Ze=U++;(0,y.Xf)(re(Ve,Ze)).subscribe(fe=(0,k.x)(Oe,xe=>Oe.next(pe?pe(Ve,xe,Ze,Ae++):xe),()=>{fe=null,Y()}))},()=>{H=!0,Y()}))})}},9397:(lt,De,P)=>{P.d(De,{b:()=>re});var y=P(4674),X=P(9360),k=P(8251),J=P(2737);function re(pe,ge,Oe){const fe=(0,y.m)(pe)||ge||Oe?{next:pe,error:ge,complete:Oe}:pe;return fe?(0,X.e)((U,H)=>{var Y;null===(Y=fe.subscribe)||void 0===Y||Y.call(fe);let Ve=!0;U.subscribe((0,k.x)(H,Ae=>{var Ze;null===(Ze=fe.next)||void 0===Ze||Ze.call(fe,Ae),H.next(Ae)},()=>{var Ae;Ve=!1,null===(Ae=fe.complete)||void 0===Ae||Ae.call(fe),H.complete()},Ae=>{var Ze;Ve=!1,null===(Ze=fe.error)||void 0===Ze||Ze.call(fe,Ae),H.error(Ae)},()=>{var Ae,Ze;Ve&&(null===(Ae=fe.unsubscribe)||void 0===Ae||Ae.call(fe)),null===(Ze=fe.finalize)||void 0===Ze||Ze.call(fe)}))}):J.y}},1954:(lt,De,P)=>{P.d(De,{o:()=>re});var y=P(7394);class X extends y.w0{constructor(ge,Oe){super()}schedule(ge,Oe=0){return this}}const k={setInterval(pe,ge,...Oe){const{delegate:fe}=k;return fe?.setInterval?fe.setInterval(pe,ge,...Oe):setInterval(pe,ge,...Oe)},clearInterval(pe){const{delegate:ge}=k;return(ge?.clearInterval||clearInterval)(pe)},delegate:void 0};var J=P(9039);class re extends X{constructor(ge,Oe){super(ge,Oe),this.scheduler=ge,this.work=Oe,this.pending=!1}schedule(ge,Oe=0){var fe;if(this.closed)return this;this.state=ge;const U=this.id,H=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(H,U,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(H,this.id,Oe),this}requestAsyncId(ge,Oe,fe=0){return k.setInterval(ge.flush.bind(ge,this),fe)}recycleAsyncId(ge,Oe,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return Oe;null!=Oe&&k.clearInterval(Oe)}execute(ge,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ge,Oe);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,Oe){let U,fe=!1;try{this.work(ge)}catch(H){fe=!0,U=H||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ge,scheduler:Oe}=this,{actions:fe}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(fe,this),null!=ge&&(this.id=this.recycleAsyncId(Oe,ge,null)),this.delay=null,super.unsubscribe()}}}},2631:(lt,De,P)=>{P.d(De,{v:()=>k});var y=P(4552);class X{constructor(re,pe=X.now){this.schedulerActionCtor=re,this.now=pe}schedule(re,pe=0,ge){return new this.schedulerActionCtor(this,re).schedule(ge,pe)}}X.now=y.l.now;class k extends X{constructor(re,pe=X.now){super(re,pe),this.actions=[],this._active=!1}flush(re){const{actions:pe}=this;if(this._active)return void pe.push(re);let ge;this._active=!0;do{if(ge=re.execute(re.state,re.delay))break}while(re=pe.shift());if(this._active=!1,ge){for(;re=pe.shift();)re.unsubscribe();throw ge}}}},6321:(lt,De,P)=>{P.d(De,{z:()=>k});var y=P(1954);const k=new(P(2631).v)(y.o)},4552:(lt,De,P)=>{P.d(De,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},7599:(lt,De,P)=>{P.d(De,{z:()=>y});const y={setTimeout(X,k,...J){const{delegate:re}=y;return re?.setTimeout?re.setTimeout(X,k,...J):setTimeout(X,k,...J)},clearTimeout(X){const{delegate:k}=y;return(k?.clearTimeout||clearTimeout)(X)},delegate:void 0}},4971:(lt,De,P)=>{P.d(De,{h:()=>X});const X=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(lt,De,P)=>{P.d(De,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},4564:(lt,De,P)=>{P.d(De,{_6:()=>pe,jO:()=>J,yG:()=>re});var y=P(4674);function k(ge){return ge[ge.length-1]}function J(ge){return(0,y.m)(k(ge))?ge.pop():void 0}function re(ge){return function X(ge){return ge&&(0,y.m)(ge.schedule)}(k(ge))?ge.pop():void 0}function pe(ge,Oe){return"number"==typeof k(ge)?ge.pop():Oe}},9039:(lt,De,P)=>{function y(X,k){if(X){const J=X.indexOf(k);0<=J&&X.splice(J,1)}}P.d(De,{P:()=>y})},2306:(lt,De,P)=>{function y(X){const J=X(re=>{Error.call(re),re.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}P.d(De,{d:()=>y})},1441:(lt,De,P)=>{P.d(De,{O:()=>J,x:()=>k});var y=P(2653);let X=null;function k(re){if(y.config.useDeprecatedSynchronousErrorHandling){const pe=!X;if(pe&&(X={errorThrown:!1,error:null}),re(),pe){const{errorThrown:ge,error:Oe}=X;if(X=null,ge)throw Oe}}else re()}function J(re){y.config.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=re)}},7103:(lt,De,P)=>{function y(X,k,J,re=0,pe=!1){const ge=k.schedule(function(){J(),pe?X.add(this.schedule(null,re)):this.unsubscribe()},re);if(X.add(ge),!pe)return ge}P.d(De,{f:()=>y})},2737:(lt,De,P)=>{function y(X){return X}P.d(De,{y:()=>y})},4266:(lt,De,P)=>{P.d(De,{z:()=>y});const y=X=>X&&"number"==typeof X.length&&"function"!=typeof X},5726:(lt,De,P)=>{P.d(De,{D:()=>X});var y=P(4674);function X(k){return Symbol.asyncIterator&&(0,y.m)(k?.[Symbol.asyncIterator])}},4674:(lt,De,P)=>{function y(X){return"function"==typeof X}P.d(De,{m:()=>y})},8382:(lt,De,P)=>{P.d(De,{c:()=>k});var y=P(4850),X=P(4674);function k(J){return(0,X.m)(J[y.L])}},3664:(lt,De,P)=>{P.d(De,{T:()=>k});var y=P(4971),X=P(4674);function k(J){return(0,X.m)(J?.[y.h])}},4026:(lt,De,P)=>{P.d(De,{t:()=>X});var y=P(4674);function X(k){return(0,y.m)(k?.then)}},541:(lt,De,P)=>{P.d(De,{L:()=>J,Q:()=>k});var y=P(7582),X=P(4674);function k(re){return(0,y.FC)(this,arguments,function*(){const ge=re.getReader();try{for(;;){const{value:Oe,done:fe}=yield(0,y.qq)(ge.read());if(fe)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Oe)}}finally{ge.releaseLock()}})}function J(re){return(0,X.m)(re?.getReader)}},9360:(lt,De,P)=>{P.d(De,{A:()=>X,e:()=>k});var y=P(4674);function X(J){return(0,y.m)(J?.lift)}function k(J){return re=>{if(X(re))return re.lift(function(pe){try{return J(pe,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(lt,De,P)=>{function y(){}P.d(De,{Z:()=>y})},8407:(lt,De,P)=>{P.d(De,{U:()=>k,z:()=>X});var y=P(2737);function X(...J){return k(J)}function k(J){return 0===J.length?y.y:1===J.length?J[0]:function(pe){return J.reduce((ge,Oe)=>Oe(ge),pe)}}},3894:(lt,De,P)=>{P.d(De,{h:()=>k});var y=P(2653),X=P(7599);function k(J){X.z.setTimeout(()=>{const{onUnhandledError:re}=y.config;if(!re)throw J;re(J)})}},9853:(lt,De,P)=>{function y(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(De,{z:()=>y})},5879:(lt,De,P)=>{P.d(De,{$8M:()=>Pu,$WT:()=>Ks,$Z:()=>c0,AFp:()=>Qo,AaK:()=>Y,CHM:()=>Ki,CRH:()=>sb,EJc:()=>Bv,EpF:()=>$0,F4k:()=>sv,FYo:()=>Gu,FiY:()=>cd,GfV:()=>hg,HDt:()=>jv,JOm:()=>Pa,KtG:()=>bc,LFG:()=>It,Lbi:()=>vy,Lck:()=>ZC,MAs:()=>RD,MMx:()=>UT,NdJ:()=>H0,Ojb:()=>US,OlP:()=>an,P3R:()=>sn,PXZ:()=>UA,Q6J:()=>F0,QGY:()=>iv,QbO:()=>FS,Qsj:()=>MI,R0b:()=>Xr,RDi:()=>O_,Rgc:()=>_l,SBq:()=>gs,Sil:()=>VR,Suo:()=>ib,TTD:()=>_c,TgZ:()=>tv,VuI:()=>qb,X6Q:()=>Tw,XFs:()=>pt,Xpm:()=>lc,Xq5:()=>Hy,Xts:()=>Cd,Y36:()=>Xc,YKP:()=>LT,YNc:()=>k0,Yjl:()=>Ol,Yz7:()=>Ot,Z0I:()=>cn,ZZ4:()=>Lb,_UZ:()=>Gf,_c5:()=>oN,_uU:()=>QD,aQg:()=>Nw,c2e:()=>pw,cJS:()=>xn,cg1:()=>yE,dDg:()=>Ew,dqk:()=>on,eFA:()=>Zv,eJc:()=>sw,ekj:()=>Hd,eoX:()=>wb,f3M:()=>xt,g9A:()=>ig,h0i:()=>eh,hGG:()=>QA,hij:()=>Qf,iGM:()=>lA,ifc:()=>Ne,ip1:()=>oc,jDz:()=>Ya,kL8:()=>lT,lG2:()=>da,lqb:()=>Yo,lri:()=>cm,n5z:()=>Pi,oAB:()=>du,oxw:()=>jd,q4F:()=>Wc,qFp:()=>ia,qLn:()=>Zc,qZA:()=>Ud,rWj:()=>lm,rg0:()=>Yl,sBO:()=>Mb,s_b:()=>nw,soG:()=>am,tb:()=>qv,tp0:()=>kc,uIk:()=>M0,vHH:()=>ne,vpe:()=>ho,wAp:()=>pl,xp6:()=>qt,z2F:()=>Dl,zSh:()=>B_,zs3:()=>fi});var y=P(8645),X=P(7394),k=P(5592),J=P(3019),re=P(5619),pe=P(2096),ge=P(3020),Oe=P(4664),fe=P(3997);function U(i){for(let o in i)if(i[o]===U)return o;throw Error("Could not find renamed property on target object.")}function Y(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Y).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function Ve(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const Ae=U({__forward_ref__:U});function Ze(i){return i.__forward_ref__=Ze,i.toString=function(){return Y(this())},i}function xe(i){return ze(i)?i():i}function ze(i){return"function"==typeof i&&i.hasOwnProperty(Ae)&&i.__forward_ref__===Ze}function Le(i){return i&&!!i.\u0275providers}const ht="https://g.co/ng/security#xss";class ne extends Error{constructor(o,a){super(function ve(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function ee(i){return"string"==typeof i?i:null==i?"":String(i)}function _t(i,o){throw new ne(-201,!1)}function tt(i,o){null==i&&function $e(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Ot(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function xn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Mr(i){return Gr(i,vi)||Gr(i,qs)}function cn(i){return null!==Mr(i)}function Gr(i,o){return i.hasOwnProperty(o)?i[o]:null}function _o(i){return i&&(i.hasOwnProperty(_i)||i.hasOwnProperty(iu))?i[_i]:null}const vi=U({\u0275prov:U}),_i=U({\u0275inj:U}),qs=U({ngInjectableDef:U}),iu=U({ngInjectorDef:U});var pt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(pt||{});let zt;function fn(i){const o=zt;return zt=i,o}function Pn(i,o,a){const c=Mr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&pt.Optional?null:void 0!==o?o:void _t(Y(i))}const on=globalThis,ni={},Yn="__NG_DI_FLAG__",Ci="ngTempTokenPath",j=/\n/gm,q="__source";let we;function Xe(i){const o=we;return we=i,o}function Ct(i,o=pt.Default){if(void 0===we)throw new ne(-203,!1);return null===we?Pn(i,void 0,o):we.get(i,o&pt.Optional?null:void 0,o)}function It(i,o=pt.Default){return(function Nt(){return zt}()||Ct)(xe(i),o)}function xt(i,o=pt.Default){return It(i,Un(o))}function Un(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Kt(i){const o=[];for(let a=0;a<i.length;a++){const c=xe(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ne(900,!1);let d,f=pt.Default;for(let m=0;m<c.length;m++){const w=c[m],T=ns(w);"number"==typeof T?-1===T?d=w.token:f|=T:d=w}o.push(It(d,f))}else o.push(It(c))}return o}function or(i,o){return i[Yn]=o,i.prototype[Yn]=o,i}function ns(i){return i[Yn]}function ce(i){return{toString:i}.toString()}var te=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(te||{}),Ne=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Ne||{});const st={},qe=[],kt=U({\u0275cmp:U}),Jt=U({\u0275dir:U}),Qn=U({\u0275pipe:U}),Xn=U({\u0275mod:U}),Nr=U({\u0275fac:U}),rs=U({__NG_ELEMENT_ID__:U}),ca=U({__NG_ENV_ID__:U});function Ml(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}function au(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],m=a[c++],w=a[c++];i.setAttribute(o,m,w,f)}else{const f=d,m=a[++c];Mi(f)?i.setProperty(o,f,m):i.setAttribute(o,f,m),c++}}return c}function Rl(i){return 3===i||4===i||6===i}function Mi(i){return 64===i.charCodeAt(0)}function Io(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||uu(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function uu(i,o,a,c,d){let f=0,m=i.length;if(-1===o)m=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===o){m=-1;break}if(w>o){m=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==m&&(i.splice(m,0,o),f=m+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}const Nl="ng-template";function Jn(i,o,a){let c=0,d=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&d){const m=i[c++];if(a&&"class"===f&&-1!==Ml(m.toLowerCase(),o,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function cu(i){return 4===i.type&&i.value!==Nl}function wm(i,o,a){return o===(4!==i.type||a?i.value:Nl)}function _p(i,o,a){let c=4;const d=i.attrs||[],f=function Im(i){for(let o=0;o<i.length;o++)if(Rl(i[o]))return o;return i.length}(d);let m=!1;for(let w=0;w<o.length;w++){const T=o[w];if("number"!=typeof T){if(!m)if(4&c){if(c=2|1&c,""!==T&&!wm(i,T,a)||""===T&&1===o.length){if(ri(c))return!1;m=!0}}else{const A=8&c?T:o[++w];if(8&c&&null!==i.attrs){if(!Jn(i.attrs,A,a)){if(ri(c))return!1;m=!0}continue}const L=la(8&c?"class":T,d,cu(i),a);if(-1===L){if(ri(c))return!1;m=!0;continue}if(""!==A){let G;G=L>f?"":d[L+1].toLowerCase();const Z=8&c?G:null;if(Z&&-1!==Ml(Z,A,0)||2&c&&A!==G){if(ri(c))return!1;m=!0}}}}else{if(!m&&!ri(c)&&!ri(T))return!1;if(m&&ri(T))continue;m=!1,c=T|1&c}}return ri(c)||m}function ri(i){return 0==(1&i)}function la(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let f=!1;for(;d<o.length;){const m=o[d];if(m===i)return d;if(3===m||6===m)f=!0;else{if(1===m||2===m){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=f?1:2}return-1}return function Do(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function xl(i,o,a=!1){for(let c=0;c<o.length;c++)if(_p(i,o[c],a))return!0;return!1}function lu(i,o){return i?":not("+o.trim()+")":o}function yh(i){let o=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&c){const w=i[++a];d+="["+m+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+m:4&c&&(d+=" "+m);else""!==d&&!ri(m)&&(o+=lu(f,d),d=""),c=m,f=f||!ri(c);a++}return""!==d&&(o+=lu(f,d)),o}function lc(i){return ce(()=>{const o=kl(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===te.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||Ne.Emulated,styles:i.styles||qe,_:null,schemas:i.schemas||null,tView:null,id:""};wp(a);const c=i.dependencies;return a.directiveDefs=hu(c,!1),a.pipeDefs=hu(c,!0),a.id=function Ni(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function Pl(i){return Zt(i)||Hn(i)}function dc(i){return null!==i}function du(i){return ce(()=>({type:i.type,bootstrap:i.bootstrap||qe,declarations:i.declarations||qe,imports:i.imports||qe,exports:i.exports||qe,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function hc(i,o){if(null==i)return st;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,o&&(o[d]=f)}return a}function da(i){return ce(()=>{const o=kl(i);return wp(o),o})}function Ol(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Zt(i){return i[kt]||null}function Hn(i){return i[Jt]||null}function qr(i){return i[Qn]||null}function Ks(i){const o=Zt(i)||Hn(i)||qr(i);return null!==o&&o.standalone}function Wr(i,o){const a=i[Xn]||null;if(!a&&!0===o)throw new Error(`Type ${Y(i)} does not have '\u0275mod' property.`);return a}function kl(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||st,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||qe,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hc(i.inputs,o),outputs:hc(i.outputs)}}function wp(i){i.features?.forEach(o=>o(i))}function hu(i,o){if(!i)return null;const a=o?qr:Pl;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(dc)}const bn=0,Je=1,Et=2,Sn=3,Kr=4,To=5,xr=6,fu=7,On=8,Ds=9,ha=10,Dt=11,Pr=12,Ip=13,Ts=14,Cn=15,Ll=16,bo=17,gr=18,bs=19,Ss=20,Zs=21,xi=22,pu=23,Ys=24,Bt=25,fa=1,pc=2,mr=7,yr=9,Or=11;function vr(i){return Array.isArray(i)&&"object"==typeof i[fa]}function Hr(i){return Array.isArray(i)&&!0===i[fa]}function gc(i){return 0!=(4&i.flags)}function Co(i){return i.componentOffset>-1}function Ei(i){return 1==(1&i.flags)}function ii(i){return!!i.template}function pa(i){return 0!=(512&i[Et])}function Ao(i,o){return i.hasOwnProperty(Nr)?i[Nr]:null}let ar=null,Mo=!1;function oi(i){const o=ar;return ar=i,o}const As={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function yu(i){if(!Ro(i)||i.dirty){if(!i.producerMustRecompute(i)&&!zl(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function vu(i){i.dirty=!0,function Th(i){if(void 0===i.liveConsumerNode)return;const o=Mo;Mo=!0;try{for(const a of i.liveConsumerNode)a.dirty||vu(a)}finally{Mo=o}}(i),i.consumerMarkedDirty?.(i)}function Hl(i){return i&&(i.nextProducerIndex=0),oi(i)}function ur(i,o){if(oi(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Ro(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)_u(i.producerNode[a],i.producerIndexOfThis[a]);for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function zl(i){Xs(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],c=i.producerLastReadVersion[o];if(c!==a.version||(yu(a),c!==a.version))return!0}return!1}function Gl(i){if(Xs(i),Ro(i))for(let o=0;o<i.producerNode.length;o++)_u(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function _u(i,o){if(function Eu(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),Xs(i),1===i.liveConsumerNode.length)for(let c=0;c<i.producerNode.length;c++)_u(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[o],d=i.liveConsumerNode[o];Xs(d),d.producerIndexOfThis[c]=o}}function Ro(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Xs(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let Sh=null;function Yl(i){const o=oi(null);try{return i()}finally{oi(o)}}const Ql=()=>{},Ap={...As,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:Ql};class Mp{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function _c(){return Tu}function Tu(i){return i.type.prototype.ngOnChanges&&(i.setInput=xo),Rp}function Rp(){const i=Po(this),o=i?.current;if(o){const a=i.previous;if(a===st)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function xo(i,o,a,c){const d=this.declaredInputs[a],f=Po(i)||function Ah(i,o){return i[ss]=o}(i,{previous:st,current:null}),m=f.current||(f.current={}),w=f.previous,T=w[d];m[d]=new Mp(T&&T.currentValue,o,w===st),i[c]=o}_c.ngInherit=!0;const ss="__ngSimpleChanges__";function Po(i){return i[ss]||null}const Wi=function(i,o,a){};function rn(i){for(;Array.isArray(i);)i=i[bn];return i}function Oo(i,o){return rn(o[i])}function kr(i,o){return rn(o[i.index])}function Jl(i,o){return i.data[o]}function Lr(i,o){const a=o[i];return vr(a)?a:a[bn]}function ai(i,o){return null==o?null:i[o]}function kp(i){i[bo]=0}function ed(i){1024&i[Et]||(i[Et]|=1024,Rm(i,1))}function Ec(i){1024&i[Et]&&(i[Et]&=-1025,Rm(i,-1))}function Rm(i,o){let a=i[Sn];if(null===a)return;a[To]+=o;let c=a;for(a=a[Sn];null!==a&&(1===o&&1===c[To]||-1===o&&0===c[To]);)a[To]+=o,c=a,a=a[Sn]}const Tt={lFrame:gn(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Fr(){return Tt.bindingsEnabled}function be(){return Tt.lFrame.lView}function Wt(){return Tt.lFrame.tView}function Ki(i){return Tt.lFrame.contextLView=i,i[On]}function bc(i){return Tt.lFrame.contextLView=null,i}function Er(){let i=Sc();for(;null!==i&&64===i.type;)i=i.parent;return i}function Sc(){return Tt.lFrame.currentTNode}function eo(i,o){const a=Tt.lFrame;a.currentTNode=i,a.isParent=o}function Lo(){return Tt.lFrame.isParent}function Fo(){return Tt.lFrame.bindingIndex++}function Cc(i,o){const a=Tt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ac(o)}function Ac(i){Tt.lFrame.currentDirectiveIndex=i}function Mc(){return Tt.lFrame.currentQueryIndex}function Uh(i){Tt.lFrame.currentQueryIndex=i}function Vh(i){const o=i[Je];return 2===o.type?o.declTNode:1===o.type?i[xr]:null}function Fp(i,o,a){if(a&pt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&pt.Host||(d=Vh(f),null===d||(f=f[Ts],10&d.type))););if(null===d)return!1;o=d,i=f}const c=Tt.lFrame=Ms();return c.currentTNode=o,c.lView=i,!0}function Uo(i){const o=Ms(),a=i[Je];Tt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ms(){const i=Tt.lFrame,o=null===i?null:i.child;return null===o?gn(i):o}function gn(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function wt(){const i=Tt.lFrame;return Tt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Vn=wt;function Rs(){const i=wt();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function cr(){return Tt.lFrame.selectedIndex}function zn(i){Tt.lFrame.selectedIndex=i}function hn(){const i=Tt.lFrame;return Jl(i.tView,i.selectedIndex)}let Su=!0;function Ur(){return Su}function er(i){Su=i}function Da(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:w,ngAfterViewInit:T,ngAfterViewChecked:A,ngOnDestroy:N}=f;m&&(i.contentHooks??=[]).push(-a,m),w&&((i.contentHooks??=[]).push(a,w),(i.contentCheckHooks??=[]).push(a,w)),T&&(i.viewHooks??=[]).push(-a,T),A&&((i.viewHooks??=[]).push(a,A),(i.viewCheckHooks??=[]).push(a,A)),null!=N&&(i.destroyHooks??=[]).push(a,N)}}function me(i,o,a){io(i,o,3,a)}function as(i,o,a,c){(3&i[Et])===a&&io(i,o,a,c)}function ro(i,o){let a=i[Et];(3&a)===o&&(a&=8191,a+=1,i[Et]=a)}function io(i,o,a,c){const f=c??-1,m=o.length-1;let w=0;for(let T=void 0!==c?65535&i[bo]:0;T<m;T++)if("number"==typeof o[T+1]){if(w=o[T],null!=c&&w>=c)break}else o[T]<0&&(i[bo]+=65536),(w<f||-1==f)&&(id(i,a,o,T),i[bo]=(4294901760&i[bo])+T+2),T++}function Qt(i,o){Wi(4,i,o);const a=oi(null);try{o.call(i)}finally{oi(a),Wi(5,i,o)}}function id(i,o,a,c){const d=a[c]<0,f=a[c+1],w=i[d?-a[c]:a[c]];d?i[Et]>>13<i[bo]>>16&&(3&i[Et])===o&&(i[Et]+=8192,Qt(w,f)):Qt(w,f)}const Ir=-1;class He{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Au(i){return i!==Ir}function Gn(i){return 32767&i}function Mn(i,o){let a=function Nc(i){return i>>16}(i),c=o;for(;a>0;)c=c[Ts],a--;return c}let us=!0;function xc(i){const o=us;return us=i,o}const Pc=255,Gh=5;let Dr=0;const cs={};function ls(i,o){const a=jo(i,o);if(-1!==a)return a;const c=o[Je];c.firstCreatePass&&(i.injectorIndex=o.length,ci(c.data,i),ci(o,null),ci(c.blueprint,null));const d=so(i,o),f=i.injectorIndex;if(Au(d)){const m=Gn(d),w=Mn(d,o),T=w[Je].data;for(let A=0;A<8;A++)o[f+A]=w[m+A]|T[m+A]}return o[f+8]=d,f}function ci(i,o){i.push(0,0,0,0,0,0,0,0,o)}function jo(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function so(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Sa(d),null===c)return Ir;if(a++,d=d[Ts],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Ir}function Mu(i,o,a){!function Bo(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(rs)&&(c=a[rs]),null==c&&(c=a[rs]=Dr++);const d=c&Pc;o.data[i+(d>>Gh)]|=1<<d}(i,o,a)}function Ta(i,o,a){if(a&pt.Optional||void 0!==i)return i;_t()}function $o(i,o,a,c){if(a&pt.Optional&&void 0===c&&(c=null),!(a&(pt.Self|pt.Host))){const d=i[Ds],f=fn(void 0);try{return d?d.get(o,c,a&pt.Optional):Pn(o,c,a&pt.Optional)}finally{fn(f)}}return Ta(c,0,a)}function Ru(i,o,a,c=pt.Default,d){if(null!==i){if(2048&o[Et]&&!(c&pt.Self)){const m=function km(i,o,a,c,d){let f=i,m=o;for(;null!==f&&null!==m&&2048&m[Et]&&!(512&m[Et]);){const w=qh(f,m,a,c|pt.Self,cs);if(w!==cs)return w;let T=f.parent;if(!T){const A=m[Ss];if(A){const N=A.get(a,cs,c);if(N!==cs)return N}T=Sa(m),m=m[Ts]}f=T}return d}(i,o,a,c,cs);if(m!==cs)return m}const f=qh(i,o,a,c,cs);if(f!==cs)return f}return $o(o,a,c,d)}function qh(i,o,a,c,d){const f=function ad(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(rs)?i[rs]:void 0;return"number"==typeof o?o>=0?o&Pc:Oc:o}(a);if("function"==typeof f){if(!Fp(o,i,c))return c&pt.Host?Ta(d,0,c):$o(o,a,c,d);try{let m;if(m=f(c),null!=m||c&pt.Optional)return m;_t()}finally{Vn()}}else if("number"==typeof f){let m=null,w=jo(i,o),T=Ir,A=c&pt.Host?o[Cn][xr]:null;for((-1===w||c&pt.SkipSelf)&&(T=-1===w?so(i,o):o[w+8],T!==Ir&&xu(c,!1)?(m=o[Je],w=Gn(T),o=Mn(T,o)):w=-1);-1!==w;){const N=o[Je];if(Zi(f,w,N.data)){const L=od(w,o,a,m,c,A);if(L!==cs)return L}T=o[w+8],T!==Ir&&xu(c,o[Je].data[w+8]===A)&&Zi(f,w,o)?(m=N,w=Gn(T),o=Mn(T,o)):w=-1}}return d}function od(i,o,a,c,d,f){const m=o[Je],w=m.data[i+8],N=Nu(w,m,a,null==c?Co(w)&&us:c!=m&&0!=(3&w.type),d&pt.Host&&f===w);return null!==N?Os(o,m,N,w):cs}function Nu(i,o,a,c,d){const f=i.providerIndexes,m=o.data,w=1048575&f,T=i.directiveStart,N=f>>20,G=d?w+N:i.directiveEnd;for(let Z=c?w:w+N;Z<G;Z++){const ye=m[Z];if(Z<T&&a===ye||Z>=T&&ye.type===a)return Z}if(d){const Z=m[T];if(Z&&ii(Z)&&Z.type===a)return T}return null}function Os(i,o,a,c){let d=i[a];const f=o.data;if(function jh(i){return i instanceof He}(d)){const m=d;m.resolving&&function ke(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new ne(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Te(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ee(i)}(f[a]));const w=xc(m.canSeeViewProviders);m.resolving=!0;const A=m.injectImpl?fn(m.injectImpl):null;Fp(i,c,pt.Default);try{d=i[a]=m.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function xs(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const m=Tu(o);(a.preOrderHooks??=[]).push(i,m),(a.preOrderCheckHooks??=[]).push(i,m)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==A&&fn(A),xc(w),m.resolving=!1,Vn()}}return d}function Zi(i,o,a){return!!(a[o+(i>>Gh)]&1<<i)}function xu(i,o){return!(i&pt.Self||i&pt.Host&&o)}class En{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Ru(this._tNode,this._lView,o,Un(c),a)}}function Oc(){return new En(Er(),be())}function Pi(i){return ce(()=>{const o=i.prototype.constructor,a=o[Nr]||Kh(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[Nr]||Kh(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Kh(i){return ze(i)?()=>{const o=Kh(xe(i));return o&&o()}:Ao(i)}function Sa(i){const o=i[Je],a=o.type;return 2===a?o.declTNode:1===a?i[xr]:null}function Pu(i){return function Ps(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(Rl(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(Er(),i)}const Aa="__parameters__";function O(i,o,a){return ce(()=>{const c=function M(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const m=new d(...f);return w.annotation=m,w;function w(T,A,N){const L=T.hasOwnProperty(Aa)?T[Aa]:Object.defineProperty(T,Aa,{value:[]})[Aa];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(m),T}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Ls(i,o){i.forEach(a=>Array.isArray(a)?Ls(a,o):o(a))}function Zh(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Up(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Yi(i,o,a){let c=oo(i,o);return c>=0?i[1|c]=a:(c=~c,function Fm(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function ku(i,o){const a=oo(i,o);if(a>=0)return i[1|a]}function oo(i,o){return function Vp(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),m=i[f<<a];if(o===m)return f<<a;m>o?d=f:c=f+1}return~(d<<a)}(i,o,1)}const cd=or(O("Optional"),8),kc=or(O("SkipSelf"),4);function hs(i){return 128==(128&i.flags)}var Pa=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Pa||{});const Vu=new Map;let Ed=0;const wd="__ngContext__";function Zr(i,o){vr(o)?(i[wd]=o[bs],function Ii(i){Vu.set(i[bs],i)}(o)):i[wd]=o}let $;function Q(i,o){return $(i,o)}function Be(i){const o=i[Sn];return Hr(o)?o[Sn]:o}function yn(i){return ju(i[Pr])}function Di(i){return ju(i[Kr])}function ju(i){for(;null!==i&&!Hr(i);)i=i[Kr];return i}function ka(i,o,a,c,d){if(null!=c){let f,m=!1;Hr(c)?f=c:vr(c)&&(m=!0,c=c[bn]);const w=rn(c);0===i&&null!==a?null==d?M_(o,a,w):qo(o,a,w,d||null,!0):1===i&&null!==a?qo(o,a,w,d||null,!0):2===i?function Qp(i,o,a){const c=Dd(i,o);c&&function ny(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,w,m):3===i&&o.destroyNode(w),null!=f&&function ay(i,o,a,c,d){const f=a[mr];f!==rn(a)&&ka(o,i,c,f,d);for(let w=Or;w<a.length;w++){const T=a[w];yf(T[Je],T,i,o,c,f)}}(o,i,f,a,d)}}function wn(i,o,a){return i.createElement(o,a)}function Zp(i,o){const a=i[yr],c=a.indexOf(o);Ec(o),a.splice(c,1)}function Id(i,o){if(i.length<=Or)return;const a=Or+o,c=i[a];if(c){const d=c[Ll];null!==d&&d!==i&&Zp(d,c),o>0&&(i[a-1][Kr]=c[Kr]);const f=Up(i,Or+o);!function Wp(i,o){yf(i,o,o[Dt],2,null,null),o[bn]=null,o[xr]=null}(c[Je],c);const m=f[gr];null!==m&&m.detachView(f[Je]),c[Sn]=null,c[Kr]=null,c[Et]&=-129}return c}function Xm(i,o){if(!(256&o[Et])){const a=o[Dt];o[pu]&&Gl(o[pu]),o[Ys]&&Gl(o[Ys]),a.destroyNode&&yf(i,o,a,3,null,null),function Ym(i){let o=i[Pr];if(!o)return lo(i[Je],i);for(;o;){let a=null;if(vr(o))a=o[Pr];else{const c=o[Or];c&&(a=c)}if(!a){for(;o&&!o[Kr]&&o!==i;)vr(o)&&lo(o[Je],o),o=o[Sn];null===o&&(o=i),vr(o)&&lo(o[Je],o),a=o&&o[Kr]}o=a}}(o)}}function lo(i,o){if(!(256&o[Et])){o[Et]&=-129,o[Et]|=256,function TS(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof He)){const f=a[c+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const w=d[f[m]],T=f[m+1];Wi(4,w,T);try{T.call(w)}finally{Wi(5,w,T)}}else{Wi(4,d,f);try{f.call(d)}finally{Wi(5,d,f)}}}}}(i,o),function oI(i,o){const a=i.cleanup,c=o[fu];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const m=a[f+3];m>=0?c[m]():c[-m].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(o[fu]=null);const d=o[Zs];if(null!==d){o[Zs]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,o),1===o[Je].type&&o[Dt].destroy();const a=o[Ll];if(null!==a&&Hr(o[Sn])){a!==o[Sn]&&Zp(a,o);const c=o[gr];null!==c&&c.detachView(i)}!function Gp(i){Vu.delete(i[bs])}(o)}}function Jm(i,o,a){return function ey(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[bn];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===Ne.None||f===Ne.Emulated)return null}return kr(c,a)}}(i,o.parent,a)}function qo(i,o,a,c,d){i.insertBefore(o,a,c,d)}function M_(i,o,a){i.appendChild(o,a)}function ty(i,o,a,c,d){null!==c?qo(i,o,a,c,d):M_(i,o,a)}function Dd(i,o){return i.parentNode(o)}let ry,cy,vf,N_=function pf(i,o,a){return 40&i.type?kr(i,a):null};function gf(i,o,a,c){const d=Jm(i,c,o),f=o[Dt],w=function R_(i,o,a){return N_(i,o,a)}(c.parent||o[xr],c,o);if(null!=d)if(Array.isArray(a))for(let T=0;T<a.length;T++)ty(f,d,a[T],w,!1);else ty(f,d,a,w,!1);void 0!==ry&&ry(f,c,o,a,d)}function mf(i,o){if(null!==o){const a=o.type;if(3&a)return kr(o,i);if(4&a)return sy(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return mf(i,c);{const d=i[o.index];return Hr(d)?sy(-1,d):rn(d)}}if(32&a)return Q(o,i)()||rn(i[o.index]);{const c=Yp(i,o);return null!==c?Array.isArray(c)?c[0]:mf(Be(i[Cn]),c):mf(i,o.next)}}return null}function Yp(i,o){return null!==o?i[Cn][xr].projection[o.projection]:null}function sy(i,o){const a=Or+i+1;if(a<o.length){const c=o[a],d=c[Je].firstChild;if(null!==d)return mf(c,d)}return o[mr]}function oy(i,o,a,c,d,f,m){for(;null!=a;){const w=c[a.index],T=a.type;if(m&&0===o&&(w&&Zr(rn(w),c),a.flags|=2),32!=(32&a.flags))if(8&T)oy(i,o,a.child,c,d,f,!1),ka(o,i,d,w,f);else if(32&T){const A=Q(a,c);let N;for(;N=A();)ka(o,i,d,N,f);ka(o,i,d,w,f)}else 16&T?x_(i,o,c,a,d,f):ka(o,i,d,w,f);a=m?a.projectionNext:a.next}}function yf(i,o,a,c,d,f){oy(a,c,i.firstChild,o,d,f,!1)}function x_(i,o,a,c,d,f){const m=a[Cn],T=m[xr].projection[c.projection];if(Array.isArray(T))for(let A=0;A<T.length;A++)ka(o,i,d,T[A],f);else{let A=T;const N=m[Sn];hs(c)&&(A.flags|=128),oy(i,o,A,N,d,f,!0)}}function P_(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Td(i,o,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&au(i,o,c),null!==d&&P_(i,o,d),null!==f&&function uI(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function O_(i){cy=i}function li(i){return function ly(){if(void 0===vf&&(vf=null,on.trustedTypes))try{vf=on.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return vf}()?.createScriptURL(i)||i}class Xp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ht})`}}function jc(i){return i instanceof Xp?i.changingThisBreaksApplicationSecurity:i}function eg(i,o){const a=function k_(i){return i instanceof Xp&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ht})`)}return a===o}const di=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var tg=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(tg||{});function Ut(i){const o=Ke();return o?o.sanitize(tg.URL,i)||"":eg(i,"URL")?jc(i):function $c(i){return(i=String(i)).match(di)?i:"unsafe:"+i}(ee(i))}function Sd(i){const o=Ke();if(o)return li(o.sanitize(tg.RESOURCE_URL,i)||"");if(eg(i,"ResourceURL"))return li(jc(i));throw new ne(904,!1)}function sn(i,o,a){return function ng(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Sd:Ut}(o,a)(i)}function Ke(){const i=be();return i&&i[ha].sanitizer}class an{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ot({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Cd=new an("ENVIRONMENT_INITIALIZER"),Hc=new an("INJECTOR",-1),_I=new an("INJECTOR_DEF_TYPES");class wf{get(o,a=ni){if(a===ni){const c=new Error(`NullInjectorError: No provider for ${Y(o)}!`);throw c.name="NullInjectorError",c}return a}}function rg(...i){return{\u0275providers:U_(0,i),\u0275fromNgModule:!0}}function U_(i,...o){const a=[],c=new Set;let d;const f=m=>{a.push(m)};return Ls(o,m=>{const w=m;Fi(w,f,[],c)&&(d||=[],d.push(w))}),void 0!==d&&V_(d,f),a}function V_(i,o){for(let a=0;a<i.length;a++){const{ngModule:c,providers:d}=i[a];gy(d,f=>{o(f,c)})}}function Fi(i,o,a,c){if(!(i=xe(i)))return!1;let d=null,f=_o(i);const m=!f&&Zt(i);if(f||m){if(m&&!m.standalone)return!1;d=i}else{const T=i.ngModule;if(f=_o(T),!f)return!1;d=T}const w=c.has(d);if(m){if(w)return!1;if(c.add(d),m.dependencies){const T="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const A of T)Fi(A,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let A;c.add(d);try{Ls(f.imports,N=>{Fi(N,o,a,c)&&(A||=[],A.push(N))})}finally{}void 0!==A&&V_(A,o)}if(!w){const A=Ao(d)||(()=>new d);o({provide:d,useFactory:A,deps:qe},d),o({provide:_I,useValue:d,multi:!0},d),o({provide:Cd,useValue:()=>It(d),multi:!0},d)}const T=f.providers;if(null!=T&&!w){const A=i;gy(T,N=>{o(N,A)})}}}return d!==i&&void 0!==i.providers}function gy(i,o){for(let a of i)Le(a)&&(a=a.\u0275providers),Array.isArray(a)?gy(a,o):o(a)}const II=U({provide:String,useValue:U});function Ua(i){return null!==i&&"object"==typeof i&&II in i}function Va(i){return"function"==typeof i}const B_=new an("Set Injector scope."),zc={},Gc={};let j_;function Ba(){return void 0===j_&&(j_=new wf),j_}class Yo{}class If extends Yo{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yy(o,m=>this.processProvider(m)),this.records.set(Hc,ja(void 0,this)),d.has("environment")&&this.records.set(Yo,ja(void 0,this));const f=this.records.get(B_);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(_I.multi,qe,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=Xe(this),c=fn(void 0);try{return o()}finally{Xe(a),fn(c)}}get(o,a=ni,c=pt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(ca))return o[ca](this);c=Un(c);const f=Xe(this),m=fn(void 0);try{if(!(c&pt.SkipSelf)){let T=this.records.get(o);if(void 0===T){const A=function LS(i){return"function"==typeof i||"object"==typeof i&&i instanceof an}(o)&&Mr(o);T=A&&this.injectableDefInScope(A)?ja($_(o),zc):null,this.records.set(o,T)}if(null!=T)return this.hydrate(o,T)}return(c&pt.Self?Ba():this.parent).get(o,a=c&pt.Optional&&a===ni?null:a)}catch(w){if("NullInjectorError"===w.name){if((w[Ci]=w[Ci]||[]).unshift(Y(o)),f)throw w;return function Is(i,o,a,c){const d=i[Ci];throw o[q]&&d.unshift(o[q]),i.message=function ou(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=Y(o);if(Array.isArray(o))d=o.map(Y).join(" -> ");else if("object"==typeof o){let f=[];for(let m in o)if(o.hasOwnProperty(m)){let w=o[m];f.push(m+":"+("string"==typeof w?JSON.stringify(w):Y(w)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(j,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Ci]=null,i}(w,o,"R3InjectorError",this.source)}throw w}finally{fn(m),Xe(f)}}resolveInjectorInitializers(){const o=Xe(this),a=fn(void 0);try{const d=this.get(Cd.multi,qe,pt.Self);for(const f of d)f()}finally{Xe(o),fn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Y(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(o){let a=Va(o=xe(o))?o:xe(o&&o.provide);const c=function js(i){return Ua(i)?ja(void 0,i.useValue):ja(function Df(i,o,a){let c;if(Va(i)){const d=xe(i);return Ao(d)||$_(d)}if(Ua(i))c=()=>xe(i.useValue);else if(function ie(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Kt(i.deps||[]));else if(function my(i){return!(!i||!i.useExisting)}(i))c=()=>It(xe(i.useExisting));else{const d=xe(i&&(i.useClass||i.provide));if(!function DI(i){return!!i.deps}(i))return Ao(d)||$_(d);c=()=>new d(...Kt(i.deps))}return c}(i),zc)}(o);if(Va(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=ja(void 0,zc,!0),d.factory=()=>Kt(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===zc&&(a.value=Gc,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ui(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=xe(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function $_(i){const o=Mr(i),a=null!==o?o.factory:Ao(i);if(null!==a)return a;if(i instanceof an)throw new ne(204,!1);if(i instanceof Function)return function kS(i){const o=i.length;if(o>0)throw function Ou(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new ne(204,!1);const a=function yi(i){return i&&(i[vi]||i[qs])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ne(204,!1)}function ja(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function yy(i,o){for(const a of i)Array.isArray(a)?yy(a,o):a&&Le(a)?yy(a.\u0275providers,o):o(a)}const Qo=new an("AppId",{providedIn:"root",factory:()=>TI}),TI="ng",ig=new an("Platform Initializer"),vy=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),FS=new an("AnimationModuleType"),US=new an("CSP nonce",{providedIn:"root",factory:()=>function Wo(){if(void 0!==cy)return cy;if(typeof document<"u")return document;throw new ne(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Hu=(i,o,a)=>null;function bf(i,o,a=!1){return Hu(i,o,a)}class zu{}class lg{}class qc{resolveComponentFactory(o){throw function Iy(i){const o=Error(`No component factory found for ${Y(i)}.`);return o.ngComponent=i,o}(o)}}let Xo=(()=>{class o{}return o.NULL=new qc,o})();function Dy(){return $s(Er(),be())}function $s(i,o){return new gs(kr(i,o))}let gs=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=Dy,o})();function dg(i){return i instanceof gs?i.nativeElement:i}class Gu{}let MI=(()=>{class o{constructor(){this.destroyNode=null}}return o.__NG_ELEMENT_ID__=()=>function Cf(){const i=be(),a=Lr(Er().index,i);return(vr(a)?a:i)[Dt]}(),o})(),Z_=(()=>{var i;class o{}return(i=o).\u0275prov=Ot({token:i,providedIn:"root",factory:()=>null}),o})();class hg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Wc=new hg("16.2.5"),fg={};function X_(i,o=null,a=null,c){const d=jn(i,o,a,c);return d.resolveInjectorInitializers(),d}function jn(i,o=null,a=null,c,d=new Set){const f=[a||qe,rg(i)];return c=c||("object"==typeof i?void 0:Y(i)),new If(f,o||Ba(),c||null,d)}let fi=(()=>{var i;class o{static create(c,d){if(Array.isArray(c))return X_({name:""},d,c,"");{const f=c.name??"";return X_({name:f},c.parent,c.providers,f)}}}return(i=o).THROW_IF_NOT_FOUND=ni,i.NULL=new wf,i.\u0275prov=Ot({token:i,providedIn:"any",factory:()=>It(Hc)}),i.__NG_ELEMENT_ID__=-1,o})();function Kc(i){return i.ngOriginalError}class Zc{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Kc(o);for(;a&&Kc(a);)a=Kc(a);return a||null}}function gg(i){return o=>{setTimeout(i,void 0,o)}}const ho=class Af extends y.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,f=a||(()=>null),m=c;if(o&&"object"==typeof o){const T=o;d=T.next?.bind(T),f=T.error?.bind(T),m=T.complete?.bind(T)}this.__isAsync&&(f=gg(f),d&&(d=gg(d)),m&&(m=gg(m)));const w=super.subscribe({next:d,error:f,complete:m});return o instanceof X.w0&&o.add(w),w}};function e0(...i){}class Xr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ho(!1),this.onMicrotaskEmpty=new ho(!1),this.onStable=new ho(!1),this.onError=new ho(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function t0(){const i="function"==typeof on.requestAnimationFrame;let o=on[i?"requestAnimationFrame":"setTimeout"],a=on[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function GS(i){const o=()=>{!function zS(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(on,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ay(i),i.isCheckStableRunning=!0,n0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ay(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,m,w)=>{if(function s0(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(w))return a.invokeTask(d,f,m,w);try{return OI(i),a.invokeTask(d,f,m,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),r0(i)}},onInvoke:(a,c,d,f,m,w,T)=>{try{return OI(i),a.invoke(d,f,m,w,T)}finally{i.shouldCoalesceRunChangeDetection&&o(),r0(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ay(i),n0(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xr.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(Xr.isInAngularZone())throw new ne(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+d,o,PI,e0,e0);try{return f.runTask(m,a,c)}finally{f.cancelTask(m)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const PI={};function n0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ay(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function OI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function r0(i){i._nesting--,n0(i)}class qS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ho,this.onMicrotaskEmpty=new ho,this.onStable=new ho,this.onError=new ho}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const kI=new an("",{providedIn:"root",factory:LI});function LI(){const i=xt(Xr);let o=!0;const a=new k.y(d=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(o),d.complete()})}),c=new k.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{Xr.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const m=i.onUnstable.subscribe(()=>{Xr.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),m.unsubscribe()}});return(0,J.T)(a,c.pipe((0,ge.B)()))}function Ha(i){return i instanceof Function?i():i}let vg=(()=>{var i;class o{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}}return(i=o).\u0275prov=Ot({token:i,providedIn:"root",factory:()=>new i}),o})();function Yc(i){for(;i;){i[Et]|=64;const o=Be(i);if(pa(i)&&!o)return i;i=o}return null}const Bi=new an("",{providedIn:"root",factory:()=>!1});let Eg=null;function u0(i,o){return i[o]??$I()}function Jo(i,o){const a=$I();a.producerNode?.length&&(i[o]=Eg,a.lView=i,Eg=Rf())}const jI={...As,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Yc(i.lView)},lView:null};function Rf(){return Object.create(jI)}function $I(){return Eg??=Rf(),Eg}const jt={};function qt(i){HI(Wt(),be(),cr()+i,!1)}function HI(i,o,a,c){if(!c)if(3==(3&o[Et])){const f=i.preOrderCheckHooks;null!==f&&me(o,f,a)}else{const f=i.preOrderHooks;null!==f&&as(o,f,0,a)}zn(a)}function Xc(i,o=pt.Default){const a=be();return null===a?It(i,o):Ru(Er(),a,xe(i),o)}function c0(){throw new Error("invalid")}function wg(i,o,a,c,d,f,m,w,T,A,N){const L=o.blueprint.slice();return L[bn]=d,L[Et]=140|c,(null!==A||i&&2048&i[Et])&&(L[Et]|=2048),kp(L),L[Sn]=L[Ts]=i,L[On]=a,L[ha]=m||i&&i[ha],L[Dt]=w||i&&i[Dt],L[Ds]=T||i&&i[Ds]||null,L[xr]=f,L[bs]=function Wm(){return Ed++}(),L[xi]=N,L[Ss]=A,L[Cn]=2==o.type?i[Cn]:L,L}function Ku(i,o,a,c,d){let f=i.data[o];if(null===f)f=function l0(i,o,a,c,d){const f=Sc(),m=Lo(),T=i.data[o]=function ky(i,o,a,c,d,f){let m=o?o.injectorIndex:-1,w=0;return function os(){return null!==Tt.skipHydrationRootTNode}()&&(w|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=T),null!==f&&(m?null==f.child&&null!==T.parent&&(f.child=T):null===f.next&&(f.next=T,T.prev=f)),T}(i,o,a,c,d),function kh(){return Tt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const m=function wa(){const i=Tt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return eo(f,!0),f}function Ig(i,o,a,c){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function d0(i,o,a,c,d){const f=u0(o,pu),m=cr(),w=2&c;try{zn(-1),w&&o.length>Bt&&HI(i,o,Bt,!1),Wi(w?2:0,d);const A=w?f:null,N=Hl(A);try{null!==A&&(A.dirty=!1),a(c,d)}finally{ur(A,N)}}finally{w&&null===o[pu]&&Jo(o,pu),zn(m),Wi(w?3:1,d)}}function Jc(i,o,a){if(gc(o)){const c=oi(null);try{const f=o.directiveEnd;for(let m=o.directiveStart;m<f;m++){const w=i.data[m];w.contentQueries&&w.contentQueries(1,a[m],m)}}finally{oi(c)}}}function Zu(i,o,a){Fr()&&(function p0(i,o,a,c){const d=a.directiveStart,f=a.directiveEnd;Co(a)&&function YI(i,o,a){const c=kr(o,i),d=el(a);let m=16;a.signals?m=4096:a.onPush&&(m=64);const w=nl(i,wg(i,d,null,m,c,o,null,i[ha].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=w}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||ls(a,o),Zr(c,o);const m=a.initialInputs;for(let w=d;w<f;w++){const T=i.data[w],A=Os(o,i,w,a);Zr(A,o),null!==m&&QI(0,w-d,A,T,0,m),ii(T)&&(Lr(a.index,o)[On]=Os(o,i,w,a))}}(i,o,a,kr(a,o)),64==(64&a.flags)&&Fy(i,o,a))}function Py(i,o,a=kr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const m=c[f+1],w=-1===m?a(o,i):i[m];i[d++]=w}}}function el(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Oy(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function Oy(i,o,a,c,d,f,m,w,T,A,N){const L=Bt+c,G=L+d,Z=function Nf(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:jt);return a}(L,G),ye="function"==typeof A?A():A;return Z[Je]={type:i,blueprint:Z,template:a,queries:null,viewQuery:w,declTNode:o,data:Z.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:G,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:T,consts:ye,incompleteFirstPass:!1,ssrId:N}}let xf=i=>null;function Dg(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?h0(a,o,d,f):c.hasOwnProperty(d)&&h0(a,o,c[d],f)}return a}function h0(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function Ly(i,o,a,c){if(Fr()){const d=null===c?null:{"":-1},f=function m0(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const m=a[f];if(xl(o,m.selectors,!1))if(c||(c=[]),ii(m))if(null!==m.findHostDirectiveDefs){const w=[];d=d||new Map,m.findHostDirectiveDefs(m,w,d),c.unshift(...w,m),y0(i,o,w.length)}else c.unshift(m),y0(i,o,0);else d=d||new Map,m.findHostDirectiveDefs?.(m,c,d),c.push(m)}return null===c?null:[c,d]}(i,a);let m,w;null===f?m=w=null:[m,w]=f,null!==m&&f0(i,o,a,m,d,w),d&&function QS(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new ne(-301,!1);c.push(o[d],f)}}}(a,c,d)}a.mergedAttrs=Io(a.mergedAttrs,a.attrs)}function f0(i,o,a,c,d,f){for(let A=0;A<c.length;A++)Mu(ls(a,o),i,c[A].type);!function un(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let A=0;A<c.length;A++){const N=c[A];N.providersResolver&&N.providersResolver(N)}let m=!1,w=!1,T=Ig(i,o,c.length,null);for(let A=0;A<c.length;A++){const N=c[A];a.mergedAttrs=Io(a.mergedAttrs,N.hostAttrs),ZI(i,a,o,T,N),zr(T,N,d),null!==N.contentQueries&&(a.flags|=4),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(a.flags|=64);const L=N.type.prototype;!m&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),m=!0),!w&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),w=!0),T++}!function YS(i,o,a){const d=o.directiveEnd,f=i.data,m=o.attrs,w=[];let T=null,A=null;for(let N=o.directiveStart;N<d;N++){const L=f[N],G=a?a.get(L):null,ye=G?G.outputs:null;T=Dg(L.inputs,N,T,G?G.inputs:null),A=Dg(L.outputs,N,A,ye);const Ue=null===T||null===m||cu(o)?null:JI(T,N,m);w.push(Ue)}null!==T&&(T.hasOwnProperty("class")&&(o.flags|=8),T.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=w,o.inputs=T,o.outputs=A}(i,a,f)}function Fy(i,o,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,m=function Pm(){return Tt.lFrame.currentDirectiveIndex}();try{zn(f);for(let w=c;w<d;w++){const T=i.data[w],A=o[w];Ac(w),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&g0(T,A)}}finally{zn(-1),Ac(m)}}function g0(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function y0(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function zr(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;ii(o)&&(a[""]=i)}}function ZI(i,o,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=Ao(d.type)),m=new He(f,ii(d),Xc);i.blueprint[c]=m,a[c]=m,function KI(i,o,a,c,d){const f=d.hostBindings;if(f){let m=i.hostBindingOpCodes;null===m&&(m=i.hostBindingOpCodes=[]);const w=~o.index;(function Of(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(m)!=w&&m.push(w),m.push(a,c,f)}}(i,o,c,Ig(i,a,d.hostVars,jt),d)}function fo(i,o,a,c,d,f){const m=kr(i,o);!function kf(i,o,a,c,d,f,m){if(null==f)i.removeAttribute(o,d,a);else{const w=null==m?ee(f):m(f,c||"",d);i.setAttribute(o,d,w,a)}}(o[Dt],m,f,i.value,a,c,d)}function QI(i,o,a,c,d,f){const m=f[o];if(null!==m)for(let w=0;w<m.length;)XI(c,a,m[w++],m[w++],m[w++])}function XI(i,o,a,c,d){const f=oi(null);try{const m=i.inputTransforms;null!==m&&m.hasOwnProperty(c)&&(d=m[c].call(o,d)),null!==i.setInput?i.setInput(o,d,a,c):o[c]=d}finally{oi(f)}}function JI(i,o,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const m=i[f];for(let w=0;w<m.length;w+=2)if(m[w]===o){c.push(f,m[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function v0(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null,null]}function Uy(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const m=i.data[f];Uh(a[c]),m.contentQueries(2,o[f],f)}}}function nl(i,o){return i[Pr]?i[Ip][Kr]=o:i[Pr]=o,i[Ip]=o,o}function xd(i,o,a){Uh(0);const c=oi(null);try{o(i,a)}finally{oi(c)}}function bg(i){return i[fu]||(i[fu]=[])}function _0(i){return i.cleanup||(i.cleanup=[])}function w0(i,o){const a=i[Ds],c=a?a.get(Zc,null):null;c&&c.handleError(o)}function I0(i,o,a,c,d){for(let f=0;f<a.length;){const m=a[f++],w=a[f++];XI(i.data[m],o[m],c,w,d)}}function eD(i,o){const a=Lr(o,i),c=a[Je];!function XS(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const d=a[bn];null!==d&&null===a[xi]&&(a[xi]=bf(d,a[Ds])),D0(c,a,a[On])}function D0(i,o,a){Uo(o);try{const c=i.viewQuery;null!==c&&xd(1,c,a);const d=i.template;null!==d&&d0(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Uy(i,o),i.staticViewQueries&&xd(2,i.viewQuery,a);const f=i.components;null!==f&&function JS(i,o){for(let a=0;a<o.length;a++)eD(i,o[a])}(o,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Et]&=-5,Rs()}}let tD=(()=>{var i;class o{constructor(){this.all=new Set,this.queue=new Map}create(c,d,f){const m=typeof Zone>"u"?null:Zone.current,w=function Mm(i,o,a){const c=Object.create(Ap);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=o;const d=m=>{c.cleanupFn=m};return c.ref={notify:()=>vu(c),run:()=>{if(c.dirty=!1,c.hasRun&&!zl(c))return;c.hasRun=!0;const m=Hl(c);try{c.cleanupFn(),c.cleanupFn=Ql,c.fn(d)}finally{ur(c,m)}},cleanup:()=>c.cleanupFn()},c.ref}(c,N=>{this.all.has(N)&&this.queue.set(N,m)},f);let T;this.all.add(w),w.notify();const A=()=>{w.cleanup(),T?.(),this.all.delete(w),this.queue.delete(w)};return T=d?.onDestroy(A),{destroy:A}}flush(){if(0!==this.queue.size)for(const[c,d]of this.queue)this.queue.delete(c),d?d.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}}return(i=o).\u0275prov=Ot({token:i,providedIn:"root",factory:()=>new i}),o})();function Yu(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let m=0;m<o.length;m++){const w=o[m];"number"==typeof w?f=w:1==f?d=Ve(d,w):2==f&&(c=Ve(c,w+": "+o[++m]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Lf(i,o,a,c,d=!1){for(;null!==a;){const f=o[a.index];null!==f&&c.push(rn(f)),Hr(f)&&nD(f,c);const m=a.type;if(8&m)Lf(i,o,a.child,c);else if(32&m){const w=Q(a,o);let T;for(;T=w();)c.push(T)}else if(16&m){const w=Yp(o,a);if(Array.isArray(w))c.push(...w);else{const T=Be(o[Cn]);Lf(T[Je],T,w,c,!0)}}a=d?a.projectionNext:a.next}return c}function nD(i,o){for(let a=Or;a<i.length;a++){const c=i[a],d=c[Je].firstChild;null!==d&&Lf(c[Je],c,d,o)}i[mr]!==i[bn]&&o.push(i[mr])}function sr(i,o,a,c=!0){const d=o[ha],f=d.rendererFactory,m=d.afterRenderEventManager;f.begin?.(),m?.begin();try{Ff(i,o,i.template,a)}catch(T){throw c&&w0(o,T),T}finally{f.end?.(),d.effectManager?.flush(),m?.end()}}function Ff(i,o,a,c){const d=o[Et];if(256!=(256&d)){o[ha].effectManager?.flush(),Uo(o);try{kp(o),function Oh(i){return Tt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&d0(i,o,a,2,c);const m=3==(3&d);if(m){const A=i.preOrderCheckHooks;null!==A&&me(o,A,null)}else{const A=i.preOrderHooks;null!==A&&as(o,A,0,null),ro(o,0)}if(function b0(i){for(let o=yn(i);null!==o;o=Di(o)){if(!o[pc])continue;const a=o[yr];for(let c=0;c<a.length;c++){ed(a[c])}}}(o),ea(o,2),null!==i.contentQueries&&Uy(i,o),m){const A=i.contentCheckHooks;null!==A&&me(o,A)}else{const A=i.contentHooks;null!==A&&as(o,A,1),ro(o,1)}!function zI(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const c=u0(o,Ys);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)zn(~f);else{const m=f,w=a[++d],T=a[++d];Cc(w,m),c.dirty=!1;const A=Hl(c);try{T(2,o[m])}finally{ur(c,A)}}}}finally{null===o[Ys]&&Jo(o,Ys),zn(-1)}}(i,o);const w=i.components;null!==w&&S0(o,w,0);const T=i.viewQuery;if(null!==T&&xd(2,T,c),m){const A=i.viewCheckHooks;null!==A&&me(o,A)}else{const A=i.viewHooks;null!==A&&as(o,A,2),ro(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Et]&=-73,Ec(o)}finally{Rs()}}}function ea(i,o){for(let a=yn(i);null!==a;a=Di(a))for(let c=Or;c<a.length;c++)Uf(a[c],o)}function sD(i,o,a){Uf(Lr(o,i),a)}function Uf(i,o){if(!function Ea(i){return 128==(128&i[Et])}(i))return;const a=i[Je],c=i[Et];if(80&c&&0===o||1024&c||2===o)Ff(a,i,a.template,i[On]);else if(i[To]>0){ea(i,1);const d=a.components;null!==d&&S0(i,d,1)}}function S0(i,o,a){for(let c=0;c<o.length;c++)sD(i,o[c],a)}class Vf{get rootNodes(){const o=this._lView,a=o[Je];return Lf(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(o){this._lView[On]=o}get destroyed(){return 256==(256&this._lView[Et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[Sn];if(Hr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Id(o,c),Up(a,c))}this._attachedToViewContainer=!1}Xm(this._lView[Je],this._lView)}onDestroy(o){!function _n(i,o){if(256==(256&i[Et]))throw new ne(911,!1);null===i[Zs]&&(i[Zs]=[]),i[Zs].push(o)}(this._lView,o)}markForCheck(){Yc(this._cdRefInjectingView||this._lView)}detach(){this._lView[Et]&=-129}reattach(){this._lView[Et]|=128}detectChanges(){sr(this._lView[Je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Kp(i,o){yf(i,o,o[Dt],2,null,null)}(this._lView[Je],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=o}}class oD extends Vf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;sr(o[Je],o,o[On],!1)}checkNoChanges(){}get context(){return null}}class aD extends Xo{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Zt(o);return new Cg(a,this.ngModule)}}function uD(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class C0{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Un(c);const d=this.injector.get(o,fg,c);return d!==fg||a===fg?d:this.parentInjector.get(o,a,c)}}class Cg extends lg{get inputs(){const o=this.componentDef,a=o.inputTransforms,c=uD(o.inputs);if(null!==a)for(const d of c)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return c}get outputs(){return uD(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function vh(i){return i.map(yh).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let f=(d=d||this.ngModule)instanceof Yo?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new C0(o,f):o,w=m.get(Gu,null);if(null===w)throw new ne(407,!1);const L={rendererFactory:w,sanitizer:m.get(Z_,null),effectManager:m.get(tD,null),afterRenderEventManager:m.get(vg,null)},G=w.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",ye=c?function GI(i,o,a,c){const f=c.get(Bi,!1)||a===Ne.ShadowDom,m=i.selectRootElement(o,f);return function qI(i){xf(i)}(m),m}(G,c,this.componentDef.encapsulation,m):wn(G,Z,function Sg(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(Z)),ft=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let Re=null;null!==ye&&(Re=bf(ye,m,!0));const Lt=Oy(0,null,null,1,0,null,null,null,null,null,null),bt=wg(null,Lt,null,ft,null,null,L,G,m,null,Re);let dn,Dn;Uo(bt);try{const es=this.componentDef;let Tl,Fw=null;es.findHostDirectiveDefs?(Tl=[],Fw=new Map,es.findHostDirectiveDefs(es,Tl,Fw),Tl.push(es)):Tl=[es];const cM=function A0(i,o){const a=i[Je],c=Bt;return i[c]=o,Ku(a,c,2,"#host",null)}(bt,ye),Uw=function lD(i,o,a,c,d,f,m){const w=d[Je];!function eC(i,o,a,c){for(const d of i)o.mergedAttrs=Io(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Yu(o,o.mergedAttrs,!0),null!==a&&Td(c,a,o))}(c,i,o,m);let T=null;null!==o&&(T=bf(o,d[Ds]));const A=f.rendererFactory.createRenderer(o,a);let N=16;a.signals?N=4096:a.onPush&&(N=64);const L=wg(d,el(a),null,N,d[i.index],i,f,A,null,null,T);return w.firstCreatePass&&y0(w,i,c.length-1),nl(d,L),d[i.index]=L}(cM,ye,es,Tl,bt,L,G);Dn=Jl(Lt,Bt),ye&&function tC(i,o,a,c){if(c)au(i,a,["ng-version",Wc.full]);else{const{attrs:d,classes:f}=function Ri(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++c]):8===d&&a.push(f);else{if(!ri(d))break;d=f}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&au(i,a,d),f&&f.length>0&&P_(i,a,f.join(" "))}}(G,es,ye,c),void 0!==a&&function nC(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(Dn,this.ngContentSelectors,a),dn=function dD(i,o,a,c,d,f){const m=Er(),w=d[Je],T=kr(m,d);f0(w,d,m,a,null,c);for(let N=0;N<a.length;N++)Zr(Os(d,w,m.directiveStart+N,m),d);Fy(w,d,m),T&&Zr(T,d);const A=Os(d,w,m.directiveStart+m.componentOffset,m);if(i[On]=d[On]=A,null!==f)for(const N of f)N(A,o);return Jc(w,m,i),A}(Uw,es,Tl,Fw,bt,[rC]),D0(Lt,bt,null)}finally{Rs()}return new cD(this.componentType,dn,$s(Dn,bt),bt,Dn)}}class cD extends zu{constructor(o,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new oD(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;I0(f[Je],f,d,o,a),this.previousInputValues.set(o,a),Yc(Lr(this._tNode.index,f))}}get injector(){return new En(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function rC(){const i=Er();Da(be()[Je],i)}function Hy(i){const o=i.inputConfig,a={};for(const c in o)if(o.hasOwnProperty(c)){const d=o[c];Array.isArray(d)&&d[2]&&(a[c]=d[2])}i.inputTransforms=a}function Mg(i){return!!zy(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function zy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ji(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function M0(i,o,a,c){const d=be();return ji(d,Fo(),o)&&(Wt(),fo(hn(),d,i,o,a,c)),M0}function k0(i,o,a,c,d,f,m,w){const T=be(),A=Wt(),N=i+Bt,L=A.firstCreatePass?function hC(i,o,a,c,d,f,m,w,T){const A=o.consts,N=Ku(o,i,4,m||null,ai(A,w));Ly(o,a,N,ai(A,T)),Da(o,N);const L=N.tView=Oy(2,N,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A,null);return null!==o.queries&&(o.queries.template(o,N),L.queries=o.queries.embeddedTView(N)),N}(N,A,T,o,a,c,d,f,m):A.data[N];eo(L,!1);const G=AD(A,T,L,i);Ur()&&gf(A,T,G,L),Zr(G,T),nl(T,T[N]=v0(G,T,G,L)),Ei(L)&&Zu(A,T,L),null!=m&&Py(T,L,w)}let AD=function MD(i,o,a,c){return er(!0),o[Dt].createComment("")};function RD(i){return function ko(i,o){return i[o]}(function Lp(){return Tt.lFrame.contextLView}(),Bt+i)}function F0(i,o,a){const c=be();return ji(c,Fo(),o)&&function zs(i,o,a,c,d,f,m,w){const T=kr(o,a);let N,A=o.inputs;!w&&null!=A&&(N=A[c])?(I0(i,a,N,c,d),Co(o)&&function WI(i,o){const a=Lr(o,i);16&a[Et]||(a[Et]|=64)}(a,o.index)):3&o.type&&(c=function Tg(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=m?m(d,o.value||"",c):d,f.setProperty(T,c,d))}(Wt(),hn(),c,i,o,c[Dt],a,!1),F0}function U0(i,o,a,c,d){const m=d?"class":"style";I0(i,a,o.inputs[m],m,c)}function tv(i,o,a,c){const d=be(),f=Wt(),m=Bt+i,w=d[Dt],T=f.firstCreatePass?function V0(i,o,a,c,d,f){const m=o.consts,T=Ku(o,i,2,c,ai(m,d));return Ly(o,a,T,ai(m,f)),null!==T.attrs&&Yu(T,T.attrs,!1),null!==T.mergedAttrs&&Yu(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(m,f,d,o,a,c):f.data[m],A=ND(f,d,T,w,o,i);d[m]=A;const N=Ei(T);return eo(T,!0),Td(w,A,T),32!=(32&T.flags)&&Ur()&&gf(f,d,A,T),0===function wc(){return Tt.lFrame.elementDepthCount}()&&Zr(A,d),function _r(){Tt.lFrame.elementDepthCount++}(),N&&(Zu(f,d,T),Jc(f,T,d)),null!==c&&Py(d,T),tv}function Ud(){let i=Er();Lo()?function nd(){Tt.lFrame.isParent=!1}():(i=i.parent,eo(i,!1));const o=i;(function Ic(i){return Tt.skipHydrationRootTNode===i})(o)&&function td(){Tt.skipHydrationRootTNode=null}(),function Ph(){Tt.lFrame.elementDepthCount--}();const a=Wt();return a.firstCreatePass&&(Da(a,i),gc(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function $h(i){return 0!=(8&i.flags)}(o)&&U0(a,o,be(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Hh(i){return 0!=(16&i.flags)}(o)&&U0(a,o,be(),o.stylesWithoutHost,!1),Ud}function Gf(i,o,a,c){return tv(i,o,a,c),Ud(),Gf}let ND=(i,o,a,c,d,f)=>(er(!0),wn(c,d,function Ia(){return Tt.lFrame.currentNamespace}()));function $0(){return be()}function iv(i){return!!i&&"function"==typeof i.then}function sv(i){return!!i&&"function"==typeof i.subscribe}function H0(i,o,a,c){const d=be(),f=Wt(),m=Er();return function G0(i,o,a,c,d,f,m){const w=Ei(c),A=i.firstCreatePass&&_0(i),N=o[On],L=bg(o);let G=!0;if(3&c.type||m){const Ue=kr(c,o),Ye=m?m(Ue):Ue,ft=L.length,Re=m?bt=>m(rn(bt[c.index])):c.index;let Lt=null;if(!m&&w&&(Lt=function gC(i,o,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const m=d[f];if(m===a&&d[f+1]===c){const w=o[fu],T=d[f+2];return w.length>T?w[T]:null}"string"==typeof m&&(f+=2)}return null}(i,o,d,c.index)),null!==Lt)(Lt.__ngLastListenerFn__||Lt).__ngNextListenerFn__=f,Lt.__ngLastListenerFn__=f,G=!1;else{f=Bd(c,o,N,f,!1);const bt=a.listen(Ye,d,f);L.push(f,bt),A&&A.push(d,Re,ft,ft+1)}}else f=Bd(c,o,N,f,!1);const Z=c.outputs;let ye;if(G&&null!==Z&&(ye=Z[d])){const Ue=ye.length;if(Ue)for(let Ye=0;Ye<Ue;Ye+=2){const dn=o[ye[Ye]][ye[Ye+1]].subscribe(f),Dn=L.length;L.push(f,dn),A&&A.push(d,c.index,Dn,-(Dn+1))}}}(f,d,d[Dt],m,i,o,c),H0}function OD(i,o,a,c){try{return Wi(6,o,a),!1!==a(c)}catch(d){return w0(i,d),!1}finally{Wi(7,o,a)}}function Bd(i,o,a,c,d){return function f(m){if(m===Function)return c;Yc(i.componentOffset>-1?Lr(i.index,o):o);let T=OD(o,a,c,m),A=f.__ngNextListenerFn__;for(;A;)T=OD(o,a,A,m)&&T,A=A.__ngNextListenerFn__;return d&&!1===T&&m.preventDefault(),T}}function jd(i=1){return function Rc(i){return(Tt.lFrame.contextLView=function no(i,o){for(;i>0;)o=o[Ts],i--;return o}(i,Tt.lFrame.contextLView))[On]}(i)}function ll(i,o){return i<<17|o<<2}function na(i){return i>>17&32767}function Fg(i){return 2|i}function dl(i){return(131068&i)>>2}function X0(i,o){return-131069&i|o<<2}function Wf(i){return 1|i}function BD(i,o,a,c,d){const f=i[a+1],m=null===o;let w=c?na(f):dl(f),T=!1;for(;0!==w&&(!1===T||m);){const N=i[w+1];jD(i[w],o)&&(T=!0,i[w+1]=c?Wf(N):Fg(N)),w=c?na(N):dl(N)}T&&(i[a+1]=c?Fg(f):Wf(f))}function jD(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&oo(i,o)>=0}function Hd(i,o){return function gi(i,o,a,c){const d=be(),f=Wt(),m=function to(i){const o=Tt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function dv(i,o,a,c){const d=i.data;if(null===d[a+1]){const f=d[cr()],m=function KD(i,o){return o>=i.expandoStartIndex}(i,a);(function hv(i,o){return 0!=(i.flags&(o?8:16))})(f,c)&&null===o&&!m&&(o=!1),o=function EC(i,o,a,c){const d=function Fh(i){const o=Tt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=zd(a=Yf(null,i,o,a,c),o.attrs,c),f=null);else{const m=o.directiveStylingLast;if(-1===m||i[m]!==d)if(a=Yf(d,i,o,a,c),null===f){let T=function nE(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==dl(c))return i[na(c)]}(i,o,c);void 0!==T&&Array.isArray(T)&&(T=Yf(null,i,o,T[1],c),T=zd(T,o.attrs,c),function wC(i,o,a,c){i[na(a?o.classBindings:o.styleBindings)]=c}(i,o,c,T))}else f=function rE(i,o,a){let c;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)c=zd(c,i[f].hostAttrs,a);return zd(c,o.attrs,a)}(i,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,c),function mC(i,o,a,c,d,f){let m=f?o.classBindings:o.styleBindings,w=na(m),T=dl(m);i[c]=a;let N,A=!1;if(Array.isArray(a)?(N=a[1],(null===N||oo(a,N)>0)&&(A=!0)):N=a,d)if(0!==T){const G=na(i[w+1]);i[c+1]=ll(G,w),0!==G&&(i[G+1]=X0(i[G+1],c)),i[w+1]=function Q0(i,o){return 131071&i|o<<17}(i[w+1],c)}else i[c+1]=ll(w,0),0!==w&&(i[w+1]=X0(i[w+1],c)),w=c;else i[c+1]=ll(T,0),0===w?w=c:i[T+1]=X0(i[T+1],c),T=c;A&&(i[c+1]=Fg(i[c+1])),BD(i,N,c,!0),BD(i,N,c,!1),function $i(i,o,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&oo(f,o)>=0&&(a[c+1]=Wf(a[c+1]))}(o,N,i,c,f),m=ll(w,T),f?o.classBindings=m:o.styleBindings=m}(d,f,o,a,m,c)}}(f,i,m,c),o!==jt&&ji(d,m,o)&&function YD(i,o,a,c,d,f,m,w){if(!(3&o.type))return;const T=i.data,A=T[w+1],N=function UD(i){return 1==(1&i)}(A)?sE(T,o,a,d,dl(A),m):void 0;Vg(N)||(Vg(f)||function Y0(i){return 2==(2&i)}(A)&&(f=sE(T,null,a,d,w,m)),function Us(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Pa.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Pa.Important),i.setStyle(a,c,d,f))}}(c,m,Oo(cr(),a),d,f))}(f,f.data[cr()],d,d[Dt],i,d[m+1]=function DC(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Y(jc(i)))),i}(o,a),c,m)}(i,o,null,!0),Hd}function Yf(i,o,a,c,d){let f=null;const m=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<m&&(f=o[w],c=zd(c,f.hostAttrs,d),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),c}function zd(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const m=o[f];"number"==typeof m?d=m:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Yi(i,m,!!a||o[++f]))}return void 0===i?null:i}function sE(i,o,a,c,d,f){const m=null===o;let w;for(;d>0;){const T=i[d],A=Array.isArray(T),N=A?T[1]:T,L=null===N;let G=a[d+1];G===jt&&(G=L?qe:void 0);let Z=L?ku(G,c):N===c?G:void 0;if(A&&!Vg(Z)&&(Z=ku(T,c)),Vg(Z)&&(w=Z,m))return w;const ye=i[d+1];d=m?na(ye):dl(ye)}if(null!==o){let T=f?o.residualClasses:o.residualStyles;null!=T&&(w=ku(T,c))}return w}function Vg(i){return void 0!==i}function QD(i,o=""){const a=be(),c=Wt(),d=i+Bt,f=c.firstCreatePass?Ku(c,d,1,o,null):c.data[d],m=fv(c,a,f,o,i);a[d]=m,Ur()&&gf(c,a,m,f),eo(f,!1)}let fv=(i,o,a,c,d)=>(er(!0),function co(i,o){return i.createText(o)}(o[Dt],c));function Qf(i,o,a){const c=be(),d=function go(i,o,a,c){return ji(i,Fo(),a)?o+ee(a)+c:jt}(c,i,o,a);return d!==jt&&function Ga(i,o,a){const c=Oo(o,i);!function $u(i,o,a){i.setValue(o,a)}(i[Dt],c,a)}(c,cr(),d),Qf}const Kd=void 0;var uT=["en",[["a","p"],["AM","PM"],Kd],[["AM","PM"],Kd,Kd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kd,"{1} 'at' {0}",Kd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mE(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let fl={};function yE(i){const o=function xC(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Iv(o);if(a)return a;const c=o.split("-")[0];if(a=Iv(c),a)return a;if("en"===c)return uT;throw new ne(701,!1)}function lT(i){return yE(i)[pl.PluralCase]}function Iv(i){return i in fl||(fl[i]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[i]),fl[i]}var pl=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(pl||{});const gl="en-US";let Wa=gl;class eh{}class LT{}function ZC(i,o){return new BE(i,o??null,[])}class BE extends eh{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aD(this);const d=Wr(o);this._bootstrapComponents=Ha(d.bootstrap),this._r3Injector=jn(o,a,[{provide:eh,useValue:this},{provide:Xo,useValue:this.componentFactoryResolver},...c],Y(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class jE extends LT{constructor(o){super(),this.moduleType=o}create(o){return new BE(this.moduleType,o,[])}}class op extends eh{constructor(o){super(),this.componentFactoryResolver=new aD(this),this.instance=null;const a=new If([...o.providers,{provide:eh,useValue:this},{provide:Xo,useValue:this.componentFactoryResolver}],o.parent||Ba(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function UT(i,o,a=null){return new op({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let Za=(()=>{var i;class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const d=U_(0,c.type),f=d.length>0?UT([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,f)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return(i=o).\u0275prov=Ot({token:i,providedIn:"environment",factory:()=>new i(It(Yo))}),o})();function Ya(i){i.getStandaloneInjector=o=>o.get(Za).getOrCreateStandaloneInjector(i)}function Lv(){return this._results[Symbol.iterator]()}class QE{get changes(){return this._changes||(this._changes=new ho)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=QE.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Lv)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function ln(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function mn(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=o[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function nA(i,o,a,c=!0){const d=o[Je];if(function Qm(i,o,a,c){const d=Or+c,f=a.length;c>0&&(a[d-1][Kr]=o),c<f-Or?(o[Kr]=a[d],Zh(a,Or+c,o)):(a.push(o),o[Kr]=null),o[Sn]=a;const m=o[Ll];null!==m&&a!==m&&function ff(i,o){const a=i[yr];o[Cn]!==o[Sn][Sn][Cn]&&(i[pc]=!0),null===a?i[yr]=[o]:a.push(o)}(m,o);const w=o[gr];null!==w&&w.insertView(i),o[Et]|=128}(d,o,i,a),c){const f=sy(a,i),m=o[Dt],w=Dd(m,i[mr]);null!==w&&function Zm(i,o,a,c,d,f){c[bn]=d,c[xr]=o,yf(i,c,a,1,d,f)}(d,i[xr],m,o,w,f)}}let _l=(()=>{class o{}return o.__NG_ELEMENT_ID__=ZT,o})();const rA=_l,iA=class extends rA{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,c){const d=function tA(i,o,a,c){const d=o.tView,w=wg(i,d,a,4096&i[Et]?4096:16,null,o,null,null,null,c?.injector??null,c?.hydrationInfo??null);w[Ll]=i[o.index];const A=i[gr];return null!==A&&(w[gr]=A.createEmbeddedView(d)),D0(d,w,a),w}(this._declarationLView,this._declarationTContainer,o,{injector:a,hydrationInfo:c});return new Vf(d)}};function ZT(){return Yg(Er(),be())}function Yg(i,o){return 4&i.type?new iA(o,i,$s(i,o)):null}let nw=(()=>{class o{}return o.__NG_ELEMENT_ID__=TR,o})();function TR(){return JT(Er(),be())}const rh=nw,Qa=class extends rh{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return $s(this._hostTNode,this._hostLView)}get injector(){return new En(this._hostTNode,this._hostLView)}get parentInjector(){const o=so(this._hostTNode,this._hostLView);if(Au(o)){const a=Mn(o,this._hostLView),c=Gn(o);return new En(a[Je].data[c+8],a)}return new En(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=lp(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Or}createEmbeddedView(o,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const w=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(w,d,false),w}createComponent(o,a,c,d,f){const m=o&&!function Vr(i){return"function"==typeof i}(o);let w;if(m)w=a;else{const Ue=a||{};w=Ue.index,c=Ue.injector,d=Ue.projectableNodes,f=Ue.environmentInjector||Ue.ngModuleRef}const T=m?o:new Cg(Zt(o)),A=c||this.parentInjector;if(!f&&null==T.ngModule){const Ye=(m?A:this.parentInjector).get(Yo,null);Ye&&(f=Ye)}Zt(T.componentType??{});const Z=T.create(A,d,null,f);return this.insertImpl(Z.hostView,w,false),Z}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,c){const d=o._lView;if(function Op(i){return Hr(i[Sn])}(d)){const T=this.indexOf(o);if(-1!==T)this.detach(T);else{const A=d[Sn],N=new Qa(A,A[xr],A[Sn]);N.detach(N.indexOf(o))}}const m=this._adjustIndex(a),w=this._lContainer;return nA(w,d,m,!c),o.attachToViewContainerRef(),Zh(Xa(w),m,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=lp(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Id(this._lContainer,a);c&&(Up(Xa(this._lContainer),a),Xm(c[Je],c))}detach(o){const a=this._adjustIndex(o,-1),c=Id(this._lContainer,a);return c&&null!=Up(Xa(this._lContainer),a)?new Vf(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function lp(i){return i[8]}function Xa(i){return i[8]||(i[8]=[])}function JT(i,o){let a;const c=o[i.index];return Hr(c)?a=c:(a=v0(c,o,null,i),o[i.index]=a,nl(o,a)),tb(a,o,i,c),new Qa(a,i,o)}let tb=function rc(i,o,a,c){if(i[mr])return;let d;d=8&a.type?rn(c):function eb(i,o){const a=i[Dt],c=a.createComment(""),d=kr(o,i);return qo(a,Dd(a,d),c,function SS(i,o){return i.nextSibling(o)}(a,d),!1),c}(o,a),i[mr]=d};class rw{constructor(o){this.queryList=o,this.matches=null}clone(){return new rw(this.queryList)}setDirty(){this.queryList.setDirty()}}class iw{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const m=a.getByIndex(f);d.push(this.queries[m.indexInDeclarationView].clone())}return new iw(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==pA(o,a).matches&&this.queries[a].setDirty()}}class nb{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Uv{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Uv(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Vv{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Vv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,a,aA(a,f)),this.matchTNodeWithReadOption(o,a,Nu(a,o,f,!1,!1))}else c===_l?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Nu(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===gs||d===nw||d===_l&&4&a.type)this.addMatch(a.index,-2);else{const f=Nu(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function aA(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function rb(i,o,a,c){return-1===a?function uA(i,o){return 11&i.type?$s(i,o):4&i.type?Yg(i,o):null}(o,i):-2===a?function cA(i,o,a){return a===gs?$s(o,i):a===_l?Yg(o,i):a===nw?JT(o,i):void 0}(i,o,c):Os(i,i[Je],a,o)}function ih(i,o,a,c){const d=o[gr].queries[c];if(null===d.matches){const f=i.data,m=a.matches,w=[];for(let T=0;T<m.length;T+=2){const A=m[T];w.push(A<0?null:rb(o,f[A],m[T+1],a.metadata.read))}d.matches=w}return d.matches}function Xg(i,o,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const m=ih(i,o,d,a);for(let w=0;w<f.length;w+=2){const T=f[w];if(T>0)c.push(m[w/2]);else{const A=f[w+1],N=o[-T];for(let L=Or;L<N.length;L++){const G=N[L];G[Ll]===G[Sn]&&Xg(G[Je],G,A,c)}if(null!==N[yr]){const L=N[yr];for(let G=0;G<L.length;G++){const Z=L[G];Xg(Z[Je],Z,A,c)}}}}}return c}function lA(i){const o=be(),a=Wt(),c=Mc();Uh(c+1);const d=pA(a,c);if(i.dirty&&function Pp(i){return 4==(4&i[Et])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Xg(a,o,c,[]):ih(a,o,d,c);i.reset(f,dg),i.notifyOnChanges()}return!0}return!1}function ib(i,o,a,c){const d=Wt();if(d.firstCreatePass){const f=Er();(function fA(i,o,a){null===i.queries&&(i.queries=new Uv),i.queries.track(new Vv(o,a))})(d,new nb(o,a,c),f.index),function bR(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function ob(i,o,a){const c=new QE(4==(4&a));(function ir(i,o,a,c){const d=bg(o);d.push(a),i.firstCreatePass&&_0(i).push(c,d.length-1)})(i,o,c,c.destroy),null===o[gr]&&(o[gr]=new iw),o[gr].queries.push(new rw(c))}(d,be(),a)}function sb(){return function hA(i,o){return i[gr].queries[o].queryList}(be(),Mc())}function pA(i,o){return i.queries.getByIndex(o)}function sw(i){return!!Wr(i)}const oc=new an("Application Initializer");let uh=(()=>{var i;class o{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d}),this.appInits=xt(oc,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const f of this.appInits){const m=f();if(iv(m))c.push(m);else if(sv(m)){const w=new Promise((T,A)=>{m.subscribe({complete:T,error:A})});c.push(w)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"}),o})(),pw=(()=>{var i;class o{log(c){console.log(c)}warn(c){console.warn(c)}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();const am=new an("LocaleId",{providedIn:"root",factory:()=>xt(am,pt.Optional|pt.SkipSelf)||function gw(){return typeof $localize<"u"&&$localize.locale||gl}()}),Bv=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let jv=(()=>{var i;class o{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new re.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();class UR{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let VR=(()=>{var i;class o{compileModuleSync(c){return new jE(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),m=Ha(Wr(c).declarations).reduce((w,T)=>{const A=Zt(T);return A&&w.push(new Cg(A)),w},[]);return new UR(d,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();const cm=new an(""),lm=new an("");let Gv,Ew=(()=>{var i;class o{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Gv||(function kA(i){Gv=i}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let m=-1;d&&d>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return(i=o).\u0275fac=function(c){return new(c||i)(It(Xr),It(wb),It(lm))},i.\u0275prov=Ot({token:i,factory:i.\u0275fac}),o})(),wb=(()=>{var i;class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Gv?.findTestabilityInTree(this,c,d)??null}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})(),Il=null;const Ib=new an("AllowMultipleToken"),ch=new an("PlatformDestroyListeners"),qv=new an("appBootstrapListener");class UA{constructor(o,a){this.name=o,this.token=a}}function Zv(i,o,a=[]){const c=`Platform: ${o}`,d=new an(c);return(f=[])=>{let m=dm();if(!m||m.injector.get(Ib,!1)){const w=[...a,...f,{provide:d,useValue:!0}];i?i(w):function VA(i){if(Il&&!Il.get(Ib,!1))throw new ne(400,!1);(function Db(){!function Sp(i){Sh=i}(()=>{throw new ne(600,!1)})})(),Il=i;const o=i.get(Yv);(function Kv(i){i.get(ig,null)?.forEach(a=>a())})(i)}(function fp(i=[],o){return fi.create({name:o,providers:[{provide:B_,useValue:"platform"},{provide:ch,useValue:new Set([()=>Il=null])},...i]})}(w,c))}return function bb(i){const o=dm();if(!o)throw new ne(401,!1);return o}()}}function dm(){return Il?.get(Yv)??null}let Yv=(()=>{var i;class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function ww(i="zone.js",o){return"noop"===i?new qS:"zone.js"===i?new Xr(o):i}(d?.ngZone,function Sb(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return f.run(()=>{const m=function FT(i,o,a){return new BE(i,o,a)}(c.moduleType,this.injector,function t_(i){return[{provide:Xr,useFactory:i},{provide:Cd,multi:!0,useFactory:()=>{const o=xt(Iw,{optional:!0});return()=>o.initialize()}},{provide:Ab,useFactory:e_},{provide:kI,useFactory:LI}]}(()=>f)),w=m.injector.get(Zc,null);return f.runOutsideAngular(()=>{const T=f.onError.subscribe({next:A=>{w.handleError(A)}});m.onDestroy(()=>{Jv(this._modules,m),T.unsubscribe()})}),function Qv(i,o,a){try{const c=a();return iv(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(w,f,()=>{const T=m.injector.get(uh);return T.runInitializers(),T.donePromise.then(()=>(function Dv(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(Wa=i.toLowerCase().replace(/_/g,"-"))}(m.injector.get(am,gl)||gl),this._moduleDoBootstrap(m),m))})})}bootstrapModule(c,d=[]){const f=Xv({},d);return function Wv(i,o,a){const c=new jE(a);return Promise.resolve(c)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const d=c.injector.get(Dl);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new ne(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(ch,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(i=o).\u0275fac=function(c){return new(c||i)(It(fi))},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"platform"}),o})();function Xv(i,o){return Array.isArray(o)?o.reduce(Xv,i):{...i,...o}}let Dl=(()=>{var i;class o{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=xt(Ab),this.zoneIsStable=xt(kI),this.componentTypes=[],this.components=[],this.isStable=xt(jv).hasPendingTasks.pipe((0,Oe.w)(c=>c?(0,pe.of)(!1):this.zoneIsStable),(0,fe.x)(),(0,ge.B)()),this._injector=xt(Yo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const f=c instanceof lg;if(!this._injector.get(uh).done)throw!f&&Ks(c),new ne(405,!1);let w;w=f?c:this._injector.get(Xo).resolveComponentFactory(c),this.componentTypes.push(w.componentType);const T=function FA(i){return i.isBoundToModule}(w)?void 0:this._injector.get(eh),N=w.create(fi.NULL,[],d||w.selector,T),L=N.location.nativeElement,G=N.injector.get(cm,null);return G?.registerApplication(L),N.onDestroy(()=>{this.detachView(N.hostView),Jv(this.components,N),G?.unregisterApplication(L)}),this._loadComponent(N),N}tick(){if(this._runningTick)throw new ne(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;Jv(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(qv,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Jv(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new ne(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function Jv(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const Ab=new an("",{providedIn:"root",factory:()=>xt(Zc).handleError.bind(void 0)});function e_(){const i=xt(Xr),o=xt(Zc);return a=>i.runOutsideAngular(()=>o.handleError(a))}let Iw=(()=>{var i;class o{constructor(){this.zone=xt(Xr),this.applicationRef=xt(Dl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(i=o).\u0275fac=function(c){return new(c||i)},i.\u0275prov=Ot({token:i,factory:i.\u0275fac,providedIn:"root"}),o})();function Tw(){return!1}let Mb=(()=>{class o{}return o.__NG_ELEMENT_ID__=zA,o})();function zA(i){return function GA(i,o,a){if(Co(i)&&!a){const c=Lr(i.index,o);return new Vf(c,c)}return 47&i.type?new Vf(o[Cn],o):null}(Er(),be(),16==(16&i))}class KA{constructor(){}supports(o){return Mg(o)}create(o){return new Aw(o)}}const tN=(i,o)=>o;class Aw{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||tN}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const m=!c||a&&a.currentIndex<Mw(c,d,f)?a:c,w=Mw(m,d,f),T=m.currentIndex;if(m===c)d--,c=c._nextRemoved;else if(a=a._next,null==m.previousIndex)d++;else{f||(f=[]);const A=w-d,N=T-d;if(A!=N){for(let G=0;G<A;G++){const Z=G<f.length?f[G]:f[G]=0,ye=Z+G;N<=ye&&ye<A&&(f[G]=Z+1)}f[m.previousIndex]=N-A}}w!==T&&o(m,w,T)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Mg(o))throw new ne(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,m,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],m=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,f,m,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,m,w),c=!0),a=a._next}else d=0,function mD(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,w=>{m=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,w,m,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,m,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new nN(a,c),f,d),o}_verifyReinsertion(o,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Pb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class nN{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rN{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Pb{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new rN,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Mw(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class Ob{constructor(){}supports(o){return o instanceof Map||zy(o)}create(){return new kb}}class kb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||zy(o)))throw new ne(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,m=d._next;return f&&(f._next=m),m&&(m._prev=f),d._next=null,d._prev=null,d}const c=new Rw(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class Rw{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function o_(){return new Lb([new KA])}let Lb=(()=>{var i;class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||o_()),deps:[[o,new kc,new cd]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new ne(901,!1)}}return(i=o).\u0275prov=Ot({token:i,providedIn:"root",factory:o_}),o})();function ZA(){return new Nw([new Ob])}let Nw=(()=>{var i;class o{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||ZA()),deps:[[o,new kc,new cd]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new ne(901,!1)}}return(i=o).\u0275prov=Ot({token:i,providedIn:"root",factory:ZA}),o})();const oN=Zv(null,"core",[]);let QA=(()=>{var i;class o{constructor(c){}}return(i=o).\u0275fac=function(c){return new(c||i)(It(Dl))},i.\u0275mod=du({type:i}),i.\u0275inj=xn({}),o})();function qb(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function ia(i){const o=Zt(i);if(!o)return null;const a=new Cg(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},4097:(lt,De,P)=>{P.d(De,{C6:()=>y.getApps,Mq:()=>y.getApp});var y=P(534);(0,y.registerVersion)("firebase","9.23.0","app")},120:(lt,De,P)=>{P.d(De,{Z:()=>y.Z});var y=P(3106);y.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(lt,De,P)=>{P.r(De);var y=P(5861),X=P(3106),k=P(9058),J=P(534),re=P(7582),pe=P(7879),ge=P(4537);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ze=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},xe=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mt=new pe.Yd("@firebase/auth");function ne(v,...h){mt.logLevel<=pe.in.ERROR&&mt.error(`Auth (${J.SDK_VERSION}): ${v}`,...h)}function ve(v,...h){throw Ge(v,...h)}function ee(v,...h){return Ge(v,...h)}function Te(v,h,g){const E=Object.assign(Object.assign({},xe()),{[h]:g});return new k.LL("auth","Firebase",E).create(h,{appName:v.name})}function ke(v,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&ve(v,"argument-error"),Te(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...h){if("string"!=typeof v){const g=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(g,...E)}return ze.create(v,...h)}function oe(v,h,...g){if(!v)throw Ge(h,...g)}function _t(v){const h="INTERNAL ASSERTION FAILED: "+v;throw ne(h),new Error(h)}function Ht(v,h){v||_t(h)}function Ar(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Jr(){return"http:"===_s()||"https:"===_s()}function _s(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Es{constructor(h,g){this.shortDelay=h,this.longDelay=g,Ht(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Zn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jr()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ae(v,h){Ht(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class de{static initialize(h,g,E){this.fetchImpl=h,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ee=new Es(3e4,6e4);function Ie(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function Ce(v,h,g,E){return tt.apply(this,arguments)}function tt(){return(tt=(0,y.Z)(function*(v,h,g,E,C={}){return $e(v,C,(0,y.Z)(function*(){let x={},$={};E&&("GET"===h?$=E:x={body:JSON.stringify(E)});const Q=(0,k.xO)(Object.assign({key:v.config.apiKey},$)).slice(1),Pe=yield v._getAdditionalHeaders();return Pe["Content-Type"]="application/json",v.languageCode&&(Pe["X-Firebase-Locale"]=v.languageCode),de.fetch()(Ot(v,v.config.apiHost,g,Q),Object.assign({method:h,headers:Pe,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function $e(v,h,g){return $n.apply(this,arguments)}function $n(){return($n=(0,y.Z)(function*(v,h,g){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},_e),h);try{const C=new Tn(v),x=yield Promise.race([g(),C.promise]);C.clearNetworkTimeout();const $=yield x.json();if("needConfirmation"in $)throw xn(v,"account-exists-with-different-credential",$);if(x.ok&&!("errorMessage"in $))return $;{const Q=x.ok?$.errorMessage:$.error.message,[Pe,Be]=Q.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw xn(v,"credential-already-in-use",$);if("EMAIL_EXISTS"===Pe)throw xn(v,"email-already-in-use",$);if("USER_DISABLED"===Pe)throw xn(v,"user-disabled",$);const rt=E[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(Be)throw Te(v,rt,Be);ve(v,rt)}}catch(C){if(C instanceof k.ZR)throw C;ve(v,"network-request-failed",{message:String(C)})}})).apply(this,arguments)}function yt(v,h,g,E){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,y.Z)(function*(v,h,g,E,C={}){const x=yield Ce(v,h,g,E,C);return"mfaPendingCredential"in x&&ve(v,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Ot(v,h,g,E){const C=`${h}${g}?${E}`;return v.config.emulator?ae(v.config,C):`${v.config.apiScheme}://${C}`}class Tn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(ee(this.auth,"network-request-failed")),Ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xn(v,h,g){const E={appName:v.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const C=ee(v,h,E);return C.customData._tokenResponse=g,C}function cn(){return(cn=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function yi(){return(yi=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function vi(){return(vi=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function _i(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function pt(){return(pt=(0,y.Z)(function*(v,h=!1){const g=(0,k.m9)(v),E=yield g.getIdToken(h),C=Nt(E);oe(C&&C.exp&&C.auth_time&&C.iat,g.auth,"internal-error");const x="object"==typeof C.firebase?C.firebase:void 0,$=x?.sign_in_provider;return{claims:C,token:E,authTime:_i(zt(C.auth_time)),issuedAtTime:_i(zt(C.iat)),expirationTime:_i(zt(C.exp)),signInProvider:$||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function zt(v){return 1e3*Number(v)}function Nt(v){const[h,g,E]=v.split(".");if(void 0===h||void 0===g||void 0===E)return ne("JWT malformed, contained fewer than 3 sections"),null;try{const C=(0,k.tV)(g);return C?JSON.parse(C):(ne("Failed to decode base64 JWT payload"),null)}catch(C){return ne("Caught error parsing JWT payload as JSON",C?.toString()),null}}function Pn(v,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,y.Z)(function*(v,h,g=!1){if(g)return h;try{return yield h}catch(E){throw E instanceof k.ZR&&function on({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}class Rr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const C=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,y.Z)(function*(){yield g.iteration()}),E)}iteration(){var h=this;return(0,y.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class su{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=_i(this.lastLoginAt),this.creationTime=_i(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function en(v){return ti.apply(this,arguments)}function ti(){return ti=(0,y.Z)(function*(v){var h;const g=v.auth,E=yield v.getIdToken(),C=yield Pn(v,function _o(v,h){return vi.apply(this,arguments)}(g,{idToken:E}));oe(C?.users.length,g,"internal-error");const x=C.users[0];v._notifyReloadListener(x);const $=null!==(h=x.providerUserInfo)&&void 0!==h&&h.length?function wo(v){return v.map(h=>{var{providerId:g}=h,E=(0,re._T)(h,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(x.providerUserInfo):[],Q=function Eo(v,h){return[...v.filter(E=>!h.some(C=>C.providerId===E.providerId)),...h]}(v.providerData,$),rt=!!v.isAnonymous&&!(v.email&&x.passwordHash||Q?.length),nt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:Q,metadata:new su(x.createdAt,x.lastLoginAt),isAnonymous:rt};Object.assign(v,nt)}),ti.apply(this,arguments)}function ws(){return(ws=(0,y.Z)(function*(v){const h=(0,k.m9)(v);yield en(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ws(){return(Ws=(0,y.Z)(function*(v,h){const g=yield $e(v,{},(0,y.Z)(function*(){const E=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:C,apiKey:x}=v.config,$=Ot(v,C,"/v1/token",`key=${x}`),Q=yield v._getAdditionalHeaders();return Q["Content-Type"]="application/x-www-form-urlencoded",de.fetch()($,{method:"POST",headers:Q,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class qi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){oe(h.idToken,"internal-error"),oe(typeof h.idToken<"u","internal-error"),oe(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function fn(v){const h=Nt(v);return oe(h,"internal-error"),oe(typeof h.exp<"u","internal-error"),oe(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var E=this;return(0,y.Z)(function*(){return oe(!E.accessToken||E.refreshToken,h,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var E=this;return(0,y.Z)(function*(){const{accessToken:C,refreshToken:x,expiresIn:$}=yield function Si(v,h){return Ws.apply(this,arguments)}(h,g);E.updateTokensAndExpiration(C,x,Number($))})()}updateTokensAndExpiration(h,g,E){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,g){const{refreshToken:E,accessToken:C,expirationTime:x}=g,$=new qi;return E&&(oe("string"==typeof E,"internal-error",{appName:h}),$.refreshToken=E),C&&(oe("string"==typeof C,"internal-error",{appName:h}),$.accessToken=C),x&&(oe("number"==typeof x,"internal-error",{appName:h}),$.expirationTime=x),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new qi,this.toJSON())}_performRefresh(){return _t("not implemented")}}function hr(v,h){oe("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class fr{constructor(h){var{uid:g,auth:E,stsTokenManager:C}=h,x=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new su(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,y.Z)(function*(){const E=yield Pn(g,g.stsTokenManager.getToken(g.auth,h));return oe(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(h){return function iu(v){return pt.apply(this,arguments)}(this,h)}reload(){return function Gt(v){return ws.apply(this,arguments)}(this)}_assign(h){this!==h&&(oe(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new fr(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var E=this;return(0,y.Z)(function*(){let C=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),C=!0),g&&(yield en(E)),yield E.auth._persistUserIfCurrent(E),C&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,y.Z)(function*(){const g=yield h.getIdToken();return yield Pn(h,function Mr(v,h){return cn.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var E,C,x,$,Q,Pe,Be,rt;const nt=null!==(E=g.displayName)&&void 0!==E?E:void 0,yn=null!==(C=g.email)&&void 0!==C?C:void 0,Di=null!==(x=g.phoneNumber)&&void 0!==x?x:void 0,ju=null!==($=g.photoURL)&&void 0!==$?$:void 0,ka=null!==(Q=g.tenantId)&&void 0!==Q?Q:void 0,co=null!==(Pe=g._redirectEventId)&&void 0!==Pe?Pe:void 0,$u=null!==(Be=g.createdAt)&&void 0!==Be?Be:void 0,hf=null!==(rt=g.lastLoginAt)&&void 0!==rt?rt:void 0,{uid:wn,emailVerified:Wp,isAnonymous:Zm,providerData:Kp,stsTokenManager:Ym}=g;oe(wn&&Ym,h,"internal-error");const Qm=qi.fromJSON(this.name,Ym);oe("string"==typeof wn,h,"internal-error"),hr(nt,h.name),hr(yn,h.name),oe("boolean"==typeof Wp,h,"internal-error"),oe("boolean"==typeof Zm,h,"internal-error"),hr(Di,h.name),hr(ju,h.name),hr(ka,h.name),hr(co,h.name),hr($u,h.name),hr(hf,h.name);const ff=new fr({uid:wn,auth:h,email:yn,emailVerified:Wp,displayName:nt,isAnonymous:Zm,photoURL:ju,phoneNumber:Di,tenantId:ka,stsTokenManager:Qm,createdAt:$u,lastLoginAt:hf});return Kp&&Array.isArray(Kp)&&(ff.providerData=Kp.map(Zp=>Object.assign({},Zp))),co&&(ff._redirectEventId=co),ff}static _fromIdTokenResponse(h,g,E=!1){return(0,y.Z)(function*(){const C=new qi;C.updateFromServerResponse(g);const x=new fr({uid:g.localId,auth:h,stsTokenManager:C,isAnonymous:E});return yield en(x),x})()}}const ni=new Map;function Yn(v){Ht(v instanceof Function,"Expected a class definition");let h=ni.get(v);return h?(Ht(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,ni.set(v,h),h)}const Ai=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(g,E){var C=this;return(0,y.Z)(function*(){C.storage[g]=E})()}_get(g){var E=this;return(0,y.Z)(function*(){const C=E.storage[g];return void 0===C?null:C})()}_remove(g){var E=this;return(0,y.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return v.type="NONE",v})();function j(v,h,g){return`firebase:${v}:${h}:${g}`}class V{constructor(h,g,E){this.persistence=h,this.auth=g,this.userKey=E;const{config:C,name:x}=this.auth;this.fullUserKey=j(this.userKey,C.apiKey,x),this.fullPersistenceKey=j("persistence",C.apiKey,x),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,y.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?fr._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,y.Z)(function*(){if(g.persistence===h)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,E="authUser"){return(0,y.Z)(function*(){if(!g.length)return new V(Yn(Ai),h,E);const C=(yield Promise.all(g.map(function(){var Be=(0,y.Z)(function*(rt){if(yield rt._isAvailable())return rt});return function(rt){return Be.apply(this,arguments)}}()))).filter(Be=>Be);let x=C[0]||Yn(Ai);const $=j(E,h.config.apiKey,h.name);let Q=null;for(const Be of g)try{const rt=yield Be._get($);if(rt){const nt=fr._fromJSON(h,rt);Be!==x&&(Q=nt),x=Be;break}}catch{}const Pe=C.filter(Be=>Be._shouldAllowMigration);return x._shouldAllowMigration&&Pe.length?(x=Pe[0],Q&&(yield x._set($,Q.toJSON())),yield Promise.all(g.map(function(){var Be=(0,y.Z)(function*(rt){if(rt!==x)try{yield rt._remove($)}catch{}});return function(rt){return Be.apply(this,arguments)}}())),new V(x,h,E)):new V(x,h,E)})()}}function q(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ct(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(we(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(pr(h))return"Blackberry";if(xt(h))return"Webos";if(se(h))return"Safari";if((h.includes("chrome/")||Xe(h))&&!h.includes("edge/"))return"Chrome";if(It(h))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function we(v=(0,k.z$)()){return/firefox\//i.test(v)}function se(v=(0,k.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Xe(v=(0,k.z$)()){return/crios\//i.test(v)}function Ct(v=(0,k.z$)()){return/iemobile/i.test(v)}function It(v=(0,k.z$)()){return/android/i.test(v)}function pr(v=(0,k.z$)()){return/blackberry/i.test(v)}function xt(v=(0,k.z$)()){return/webos/i.test(v)}function Un(v=(0,k.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Is(v=(0,k.z$)()){return Un(v)||It(v)||xt(v)||pr(v)||/windows phone/i.test(v)||Ct(v)}function ce(v,h=[]){let g;switch(v){case"Browser":g=q((0,k.z$)());break;case"Worker":g=`${q((0,k.z$)())}-${v}`;break;default:g=v}const E=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${J.SDK_VERSION}/${E}`}function Ne(){return(Ne=(0,y.Z)(function*(v){return(yield Ce(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function st(v,h){return qe.apply(this,arguments)}function qe(){return(qe=(0,y.Z)(function*(v,h){return Ce(v,"GET","/v2/recaptchaConfig",Ie(v,h))})).apply(this,arguments)}function kt(v){return void 0!==v&&void 0!==v.getResponse}function Jt(v){return void 0!==v&&void 0!==v.enterprise}class Qn{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Nr(v){return new Promise((h,g)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=h,E.onerror=C=>{const x=ee("internal-error");x.customData=C,g(x)},E.type="text/javascript",E.charset="UTF-8",function Xn(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(E)})}function rs(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Rl{constructor(h){this.type="recaptcha-enterprise",this.auth=Jn(h)}verify(h="verify",g=!1){var E=this;return(0,y.Z)(function*(){function x(){return x=(0,y.Z)(function*(Q){if(!g){if(null==Q.tenantId&&null!=Q._agentRecaptchaConfig)return Q._agentRecaptchaConfig.siteKey;if(null!=Q.tenantId&&void 0!==Q._tenantRecaptchaConfigs[Q.tenantId])return Q._tenantRecaptchaConfigs[Q.tenantId].siteKey}return new Promise(function(){var Pe=(0,y.Z)(function*(Be,rt){st(Q,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(nt=>{if(void 0!==nt.recaptchaKey){const yn=new Qn(nt);return null==Q.tenantId?Q._agentRecaptchaConfig=yn:Q._tenantRecaptchaConfigs[Q.tenantId]=yn,Be(yn.siteKey)}rt(new Error("recaptcha Enterprise site key undefined"))}).catch(nt=>{rt(nt)})});return function(Be,rt){return Pe.apply(this,arguments)}}())}),x.apply(this,arguments)}function $(Q,Pe,Be){const rt=window.grecaptcha;Jt(rt)?rt.enterprise.ready(()=>{rt.enterprise.execute(Q,{action:h}).then(nt=>{Pe(nt)}).catch(()=>{Pe("NO_RECAPTCHA")})}):Be(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Q,Pe)=>{(function C(Q){return x.apply(this,arguments)})(E.auth).then(Be=>{if(!g&&Jt(window.grecaptcha))$(Be,Q,Pe);else{if(typeof window>"u")return void Pe(new Error("RecaptchaVerifier is only supported in browser"));Nr("https://www.google.com/recaptcha/enterprise.js?render="+Be).then(()=>{$(Be,Q,Pe)}).catch(rt=>{Pe(rt)})}}).catch(Be=>{Pe(Be)})})})()}}function Mi(v,h,g){return Io.apply(this,arguments)}function Io(){return(Io=(0,y.Z)(function*(v,h,g,E=!1){const C=new Rl(v);let x;try{x=yield C.verify(g)}catch{x=yield C.verify(g,!0)}const $=Object.assign({},h);return Object.assign($,E?{captchaResp:x}:{captchaResponse:x}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}class uu{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const E=x=>new Promise(($,Q)=>{try{$(h(x))}catch(Pe){Q(Pe)}});E.onAbort=g,this.queue.push(E);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,y.Z)(function*(){if(g.auth.currentUser===h)return;const E=[];try{for(const C of g.queue)yield C(h),C.onAbort&&E.push(C.onAbort)}catch(C){E.reverse();for(const x of E)try{x()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:C?.message})}})()}}class Nl{constructor(h,g,E,C){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cu(this),this.idTokenSubscription=new cu(this),this.beforeStateQueue=new uu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(h,g){var E=this;return g&&(this._popupRedirectResolver=Yn(g)),this._initializationPromise=this.queue((0,y.Z)(function*(){var C,x;if(!E._deleted&&(E.persistenceManager=yield V.create(E,h),!E._deleted)){if(null!==(C=E._popupRedirectResolver)&&void 0!==C&&C._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,y.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,y.Z)(function*(){var E;const C=yield g.assertedPersistence.getCurrentUser();let x=C,$=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Q=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Pe=x?._redirectEventId,Be=yield g.tryRedirectSignIn(h);(!Q||Q===Pe)&&Be?.user&&(x=Be.user,$=!0)}if(!x)return g.directlySetCurrentUser(null);if(!x._redirectEventId){if($)try{yield g.beforeStateQueue.runMiddleware(x)}catch(Q){x=C,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Q))}return x?g.reloadAndSetCurrentUserOrClear(x):g.directlySetCurrentUser(null)}return oe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===x._redirectEventId?g.directlySetCurrentUser(x):g.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(h){var g=this;return(0,y.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,y.Z)(function*(){try{yield en(h)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ua(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,y.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,y.Z)(function*(){const E=h?(0,k.m9)(h):null;return E&&oe(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(h,g=!1){var E=this;return(0,y.Z)(function*(){if(!E._deleted)return h&&oe(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,y.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,y.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,y.Z)(function*(){yield g.assertedPersistence.setPersistence(Yn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,y.Z)(function*(){const g=yield st(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new Qn(g);null==h.tenantId?h._agentRecaptchaConfig=E:h._tenantRecaptchaConfigs[h.tenantId]=E,E.emailPasswordEnabled&&new Rl(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,g,E){return this.registerStateListener(this.authStateSubscription,h,g,E)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,E){return this.registerStateListener(this.idTokenSubscription,h,g,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var E=this;return(0,y.Z)(function*(){const C=yield E.getOrInitRedirectPersistenceManager(g);return null===h?C.removeCurrentUser():C.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,y.Z)(function*(){if(!g.redirectPersistenceManager){const E=h&&Yn(h)||g._popupRedirectResolver;oe(E,g,"argument-error"),g.redirectPersistenceManager=yield V.create(g,[Yn(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,y.Z)(function*(){var E,C;return g._isInitialized&&(yield g.queue((0,y.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===h?g._currentUser:(null===(C=g.redirectUser)||void 0===C?void 0:C._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,y.Z)(function*(){if(h===g.currentUser)return g.queue((0,y.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,E,C){if(this._deleted)return()=>{};const x="function"==typeof g?g:g.next.bind(g),$=this._isInitialized?Promise.resolve():this._initializationPromise;return oe($,this,"internal-error"),$.then(()=>x(this.currentUser)),"function"==typeof g?h.addObserver(g,E,C):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,y.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ce(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,y.Z)(function*(){var g;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const C=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();C&&(E["X-Firebase-Client"]=C);const x=yield h._getAppCheckToken();return x&&(E["X-Firebase-AppCheck"]=x),E})()}_getAppCheckToken(){var h=this;return(0,y.Z)(function*(){var g;const E=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return E?.error&&function ht(v,...h){mt.logLevel<=pe.in.WARN&&mt.warn(`Auth (${J.SDK_VERSION}): ${v}`,...h)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Jn(v){return(0,k.m9)(v)}class cu{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function la(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function mh(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class Do{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return _t("not implemented")}_getIdTokenResponse(h){return _t("not implemented")}_linkToIdToken(h,g){return _t("not implemented")}_getReauthenticationResolver(h){return _t("not implemented")}}function Ep(v,h){return lu.apply(this,arguments)}function lu(){return(lu=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:resetPassword",Ie(v,h))})).apply(this,arguments)}function yh(v,h){return vh.apply(this,arguments)}function vh(){return(vh=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function lc(){return(lc=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:update",Ie(v,h))})).apply(this,arguments)}function $r(v,h){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,y.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithPassword",Ie(v,h))})).apply(this,arguments)}function dc(v,h){return du.apply(this,arguments)}function du(){return(du=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:sendOobCode",Ie(v,h))})).apply(this,arguments)}function hc(){return(hc=(0,y.Z)(function*(v,h){return dc(v,h)})).apply(this,arguments)}function da(v,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,y.Z)(function*(v,h){return dc(v,h)})).apply(this,arguments)}function Zt(v,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,y.Z)(function*(v,h){return dc(v,h)})).apply(this,arguments)}function Ks(){return(Ks=(0,y.Z)(function*(v,h){return dc(v,h)})).apply(this,arguments)}function kl(){return(kl=(0,y.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}function hu(){return(hu=(0,y.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithEmailLink",Ie(v,h))})).apply(this,arguments)}class fc extends Do{constructor(h,g,E,C=null){super("password",E),this._email=h,this._password=g,this._tenantId=C}static _fromEmailAndPassword(h,g){return new fc(h,g,"password")}static _fromEmailAndCode(h,g,E=null){return new fc(h,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,y.Z)(function*(){var E;switch(g.signInMethod){case"password":const C={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=h._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const x=yield Mi(h,C,"signInWithPassword");return $r(h,x)}return $r(h,C).catch(function(){var x=(0,y.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Q=yield Mi(h,C,"signInWithPassword");return $r(h,Q)}return Promise.reject($)});return function($){return x.apply(this,arguments)}}());case"emailLink":return function Wr(v,h){return kl.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:ve(h,"internal-error")}})()}_linkToIdToken(h,g){var E=this;return(0,y.Z)(function*(){switch(E.signInMethod){case"password":return yh(h,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function wp(v,h){return hu.apply(this,arguments)}(h,{idToken:g,email:E._email,oobCode:E._password});default:ve(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ni(v,h){return bn.apply(this,arguments)}function bn(){return(bn=(0,y.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithIdp",Ie(v,h))})).apply(this,arguments)}class Et extends Do{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Et(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):ve("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:C}=g,x=(0,re._T)(g,["providerId","signInMethod"]);if(!E||!C)return null;const $=new Et(E,C);return $.idToken=x.idToken||void 0,$.accessToken=x.accessToken||void 0,$.secret=x.secret,$.nonce=x.nonce,$.pendingToken=x.pendingToken||null,$}_getIdTokenResponse(h){return Ni(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,Ni(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Ni(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,k.xO)(g)}return h}}function Kr(){return(Kr=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:sendVerificationCode",Ie(v,h))})).apply(this,arguments)}function xr(){return(xr=(0,y.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h))})).apply(this,arguments)}function On(){return(On=(0,y.Z)(function*(v,h){const g=yield yt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,h));if(g.temporaryProof)throw xn(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ds={USER_NOT_FOUND:"user-not-found"};function Dt(){return(Dt=(0,y.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithPhoneNumber",Ie(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ds)})).apply(this,arguments)}class Pr extends Do{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Pr({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Pr({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function To(v,h){return xr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function fu(v,h){return On.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ha(v,h){return Dt.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:E,verificationCode:C}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:E,code:C}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:E,phoneNumber:C,temporaryProof:x}=h;return E||g||C||x?new Pr({verificationId:g,verificationCode:E,phoneNumber:C,temporaryProof:x}):null}}class Cn{constructor(h){var g,E,C,x,$,Q;const Pe=(0,k.zd)((0,k.pd)(h)),Be=null!==(g=Pe.apiKey)&&void 0!==g?g:null,rt=null!==(E=Pe.oobCode)&&void 0!==E?E:null,nt=function Ip(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=Pe.mode)&&void 0!==C?C:null);oe(Be&&rt&&nt,"argument-error"),this.apiKey=Be,this.operation=nt,this.code=rt,this.continueUrl=null!==(x=Pe.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==($=Pe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(Q=Pe.tenantId)&&void 0!==Q?Q:null}static parseLink(h){const g=function Ts(v){const h=(0,k.zd)((0,k.pd)(v)).link,g=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,E=(0,k.zd)((0,k.pd)(v)).deep_link_id;return(E?(0,k.zd)((0,k.pd)(E)).link:null)||E||g||h||v}(h);try{return new Cn(g)}catch{return null}}}let bo=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,E){return fc._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const C=Cn.parseLink(E);return oe(C,"argument-error"),fc._fromEmailAndCode(g,C.code,C.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class gr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class bs extends gr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ss extends bs{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return oe("providerId"in g&&"signInMethod"in g,"argument-error"),Et._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return oe(h.idToken||h.accessToken,"argument-error"),Et._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ss.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ss.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:C,pendingToken:x,nonce:$,providerId:Q}=h;if(!E&&!C&&!g&&!x||!Q)return null;try{return new Ss(Q)._credential({idToken:g,accessToken:E,nonce:$,pendingToken:x})}catch{return null}}}let Zs=(()=>{class v extends bs{constructor(){super("facebook.com")}static credential(g){return Et._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),xi=(()=>{class v extends bs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Et._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:C}=g;if(!E&&!C)return null;try{return v.credential(E,C)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),pu=(()=>{class v extends bs{constructor(){super("github.com")}static credential(g){return Et._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Bt extends Do{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Ni(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,Ni(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Ni(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:C,pendingToken:x}=g;return E&&C&&x&&E===C?new Bt(E,x):null}static _create(h,g){return new Bt(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fa extends gr{constructor(h){oe(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return fa.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return fa.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Bt.fromJSON(h);return oe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:E}=h;if(!g||!E)return null;try{return Bt._create(E,g)}catch{return null}}}let pc=(()=>{class v extends bs{constructor(){super("twitter.com")}static credential(g,E){return Et._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:C}=g;if(!E||!C)return null;try{return v.credential(E,C)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function mr(v,h){return So.apply(this,arguments)}function So(){return(So=(0,y.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signUp",Ie(v,h))})).apply(this,arguments)}class yr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,E,C=!1){return(0,y.Z)(function*(){const x=yield fr._fromIdTokenResponse(h,E,C),$=Qs(E);return new yr({user:x,providerId:$,_tokenResponse:E,operationType:g})})()}static _forOperation(h,g,E){return(0,y.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const C=Qs(E);return new yr({user:h,providerId:C,_tokenResponse:E,operationType:g})})()}}function Qs(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Dp(){return(Dp=(0,y.Z)(function*(v){var h;const g=Jn(v);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new yr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield mr(g,{returnSecureToken:!0}),C=yield yr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(C.user),C})).apply(this,arguments)}class vr extends k.ZR{constructor(h,g,E,C){var x;super(g.code,g.message),this.operationType=E,this.user=C,Object.setPrototypeOf(this,vr.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,g,E,C){return new vr(h,g,E,C)}}function Hr(v,h,g,E){return("reauthenticate"===h?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?vr._fromErrorAndOperation(v,x,h,E):x})}function gc(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function Ei(){return Ei=(0,y.Z)(function*(v,h){const g=(0,k.m9)(v);yield ga(!0,g,h);const{providerUserInfo:E}=yield function Gr(v,h){return yi.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),C=gc(E||[]);return g.providerData=g.providerData.filter(x=>C.has(x.providerId)),C.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),Ei.apply(this,arguments)}function ii(v,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,y.Z)(function*(v,h,g=!1){const E=yield Pn(v,h._linkToIdToken(v.auth,yield v.getIdToken()),g);return yr._forOperation(v,"link",E)})).apply(this,arguments)}function ga(v,h,g){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,y.Z)(function*(v,h,g){yield en(h);const C=!1===v?"provider-already-linked":"no-such-provider";oe(gc(h.providerData).has(g)===v,h.auth,C)})).apply(this,arguments)}function Tm(v,h){return mc.apply(this,arguments)}function mc(){return(mc=(0,y.Z)(function*(v,h,g=!1){const{auth:E}=v,C="reauthenticate";try{const x=yield Pn(v,Hr(E,C,h,v),g);oe(x.idToken,E,"internal-error");const $=Nt(x.idToken);oe($,E,"internal-error");const{sub:Q}=$;return oe(v.uid===Q,E,"user-mismatch"),yr._forOperation(v,C,x)}catch(x){throw"auth/user-not-found"===x?.code&&ve(E,"user-mismatch"),x}})).apply(this,arguments)}function Ul(v,h){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,y.Z)(function*(v,h,g=!1){const E="signIn",C=yield Hr(v,E,h),x=yield yr._fromIdTokenResponse(v,E,C);return g||(yield v._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Vl(v,h){return wh.apply(this,arguments)}function wh(){return(wh=(0,y.Z)(function*(v,h){return Ul(Jn(v),h)})).apply(this,arguments)}function bm(v,h){return An.apply(this,arguments)}function An(){return(An=(0,y.Z)(function*(v,h){const g=(0,k.m9)(v);return yield ga(!1,g,h.providerId),ii(g,h)})).apply(this,arguments)}function Sm(v,h){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,y.Z)(function*(v,h){return Tm((0,k.m9)(v),h)})).apply(this,arguments)}function bp(){return(bp=(0,y.Z)(function*(v,h){return yt(v,"POST","/v1/accounts:signInWithCustomToken",Ie(v,h))})).apply(this,arguments)}function Cs(){return Cs=(0,y.Z)(function*(v,h){const g=Jn(v),E=yield function v_(v,h){return bp.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),C=yield yr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(C.user),C}),Cs.apply(this,arguments)}class Bl{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?ma._fromServerResponse(h,g):"totpInfo"in g?jl._fromServerResponse(h,g):ve(h,"internal-error")}}class ma extends Bl{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new ma(g)}}class jl extends Bl{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new jl(g)}}function gu(v,h,g){var E;oe((null===(E=g.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),oe(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(oe(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(oe(g.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function mu(){return mu=(0,y.Z)(function*(v,h,g){var E;const C=Jn(v),x={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=C._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $=yield Mi(C,x,"getOobCode",!0);g&&gu(C,$,g),yield da(C,$)}else g&&gu(C,x,g),yield da(C,x).catch(function(){var $=(0,y.Z)(function*(Q){if("auth/missing-recaptcha-token"!==Q.code)return Promise.reject(Q);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Pe=yield Mi(C,x,"getOobCode",!0);g&&gu(C,Pe,g),yield da(C,Pe)}});return function(Q){return $.apply(this,arguments)}}())}),mu.apply(this,arguments)}function is(){return(is=(0,y.Z)(function*(v,h,g){yield Ep((0,k.m9)(v),{oobCode:h,newPassword:g})})).apply(this,arguments)}function si(){return si=(0,y.Z)(function*(v,h){yield function Ri(v,h){return lc.apply(this,arguments)}((0,k.m9)(v),{oobCode:h})}),si.apply(this,arguments)}function ar(v,h){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,y.Z)(function*(v,h){const g=(0,k.m9)(v),E=yield Ep(g,{oobCode:h}),C=E.requestType;switch(oe(C,g,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(E.mfaInfo,g,"internal-error");default:oe(E.email,g,"internal-error")}let x=null;return E.mfaInfo&&(x=Bl._fromServerResponse(Jn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:C}})).apply(this,arguments)}function As(){return(As=(0,y.Z)(function*(v,h){const{data:g}=yield ar((0,k.m9)(v),h);return g.email})).apply(this,arguments)}function yu(){return yu=(0,y.Z)(function*(v,h,g){var E;const C=Jn(v),x={returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"};let $;if(null!==(E=C._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Be=yield Mi(C,x,"signUpPassword");$=mr(C,Be)}else $=mr(C,x).catch(function(){var Be=(0,y.Z)(function*(rt){if("auth/missing-recaptcha-token"===rt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const nt=yield Mi(C,x,"signUpPassword");return mr(C,nt)}return Promise.reject(rt)});return function(rt){return Be.apply(this,arguments)}}());const Q=yield $.catch(Be=>Promise.reject(Be)),Pe=yield yr._fromIdTokenResponse(C,"signIn",Q);return yield C._updateCurrentUser(Pe.user),Pe}),yu.apply(this,arguments)}function vu(){return vu=(0,y.Z)(function*(v,h,g){var E;const C=Jn(v),x={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function $(Q,Pe){oe(Pe.handleCodeInApp,C,"argument-error"),Pe&&gu(C,Q,Pe)}if(null!==(E=C._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Q=yield Mi(C,x,"getOobCode",!0);$(Q,g),yield Zt(C,Q)}else $(x,g),yield Zt(C,x).catch(function(){var Q=(0,y.Z)(function*(Pe){if("auth/missing-recaptcha-token"!==Pe.code)return Promise.reject(Pe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Be=yield Mi(C,x,"getOobCode",!0);$(Be,g),yield Zt(C,Be)}});return function(Pe){return Q.apply(this,arguments)}}())}),vu.apply(this,arguments)}function zl(){return(zl=(0,y.Z)(function*(v,h,g){const E=(0,k.m9)(v),C=bo.credentialWithLink(h,g||Ar());return oe(C._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Vl(E,C)})).apply(this,arguments)}function ql(){return(ql=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:createAuthUri",Ie(v,h))})).apply(this,arguments)}function Ro(){return Ro=(0,y.Z)(function*(v,h){const E={identifier:h,continueUri:Jr()?Ar():"http://localhost"},{signinMethods:C}=yield function Gl(v,h){return ql.apply(this,arguments)}((0,k.m9)(v),E);return C||[]}),Ro.apply(this,arguments)}function Eu(){return Eu=(0,y.Z)(function*(v,h){const g=(0,k.m9)(v),C={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&gu(g.auth,C,h);const{email:x}=yield function _h(v,h){return hc.apply(this,arguments)}(g.auth,C);x!==v.email&&(yield v.reload())}),Eu.apply(this,arguments)}function No(){return No=(0,y.Z)(function*(v,h,g){const E=(0,k.m9)(v),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};g&&gu(E.auth,x,g);const{email:$}=yield function qr(v,h){return Ks.apply(this,arguments)}(E.auth,x);$!==v.email&&(yield v.reload())}),No.apply(this,arguments)}function wu(){return(wu=(0,y.Z)(function*(v,h){return Ce(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Kl(){return Kl=(0,y.Z)(function*(v,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const E=(0,k.m9)(v),x={idToken:yield E.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},$=yield Pn(E,function Wl(v,h){return wu.apply(this,arguments)}(E.auth,x));E.displayName=$.displayName||null,E.photoURL=$.photoUrl||null;const Q=E.providerData.find(({providerId:Pe})=>"password"===Pe);Q&&(Q.displayName=E.displayName,Q.photoURL=E.photoURL),yield E._updateTokensIfNecessary($)}),Kl.apply(this,arguments)}function Sp(v,h,g){return va.apply(this,arguments)}function va(){return(va=(0,y.Z)(function*(v,h,g){const{auth:E}=v,x={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(x.email=h),g&&(x.password=g);const $=yield Pn(v,yh(E,x));yield v._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class _a{constructor(h,g,E={}){this.isNewUser=h,this.providerId=g,this.profile=E}}class Iu extends _a{constructor(h,g,E,C){super(h,g,E),this.username=C}}class Zl extends _a{constructor(h,g){super(h,"facebook.com",g)}}class Ch extends Iu{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class vc extends _a{constructor(h,g){super(h,"google.com",g)}}class Du extends Iu{constructor(h,g,E){super(h,"twitter.com",g,E)}}function Cp(v){const{user:h,_tokenResponse:g}=v;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Am(v){var h,g;if(!v)return null;const{providerId:E}=v,C=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},x=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const $=null===(g=null===(h=Nt(v.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if($)return new _a(x,"anonymous"!==$&&"custom"!==$?$:null)}if(!E)return null;switch(E){case"facebook.com":return new Zl(x,C);case"github.com":return new Ch(x,C);case"google.com":return new vc(x,C);case"twitter.com":return new Du(x,C,v.screenName||null);case"custom":case"anonymous":return new _a(x,null);default:return new _a(x,E,C)}}(g)}class ss{constructor(h,g,E){this.type=h,this.credential=g,this.auth=E}static _fromIdtoken(h,g){return new ss("enroll",h,g)}static _fromMfaPendingCredential(h){return new ss("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,E;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return ss._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(E=h.multiFactorSession)&&void 0!==E&&E.idToken)return ss._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Po{constructor(h,g,E){this.session=h,this.hints=g,this.signInResolver=E}static _fromError(h,g){const E=Jn(h),C=g.customData._serverResponse,x=(C.mfaInfo||[]).map(Q=>Bl._fromServerResponse(E,Q));oe(C.mfaPendingCredential,E,"internal-error");const $=ss._fromMfaPendingCredential(C.mfaPendingCredential);return new Po($,x,function(){var Q=(0,y.Z)(function*(Pe){const Be=yield Pe._process(E,$);delete C.mfaInfo,delete C.mfaPendingCredential;const rt=Object.assign(Object.assign({},C),{idToken:Be.idToken,refreshToken:Be.refreshToken});switch(g.operationType){case"signIn":const nt=yield yr._fromIdTokenResponse(E,g.operationType,rt);return yield E._updateCurrentUser(nt.user),nt;case"reauthenticate":return oe(g.user,E,"internal-error"),yr._forOperation(g.user,g.operationType,rt);default:ve(E,"internal-error")}});return function(Pe){return Q.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,y.Z)(function*(){return g.signInResolver(h)})()}}class rn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Bl._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new rn(h)}getSession(){var h=this;return(0,y.Z)(function*(){return ss._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var E=this;return(0,y.Z)(function*(){const C=h,x=yield E.getSession(),$=yield Pn(E.user,C._process(E.user.auth,x,g));return yield E.user._updateTokensIfNecessary($),E.user.reload()})()}unenroll(h){var g=this;return(0,y.Z)(function*(){const E="string"==typeof h?h:h.uid,C=yield g.user.getIdToken();try{const x=yield Pn(g.user,function Rh(v,h){return Ce(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ie(v,h))}(g.user.auth,{idToken:C,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:$})=>$!==E),yield g.user._updateTokensIfNecessary(x),yield g.user.reload()}catch(x){throw x}})()}}const Js=new WeakMap,kr="__sak";class xp{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(kr,"1"),this.storage.removeItem(kr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ea=(()=>{class v extends xp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Jl(){const v=(0,k.z$)();return se(v)||Un(v)}()&&function ou(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Is(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const C=this.storage.getItem(E),x=this.localCache[E];C!==x&&g(E,x,C)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((Q,Pe,Be)=>{this.notifyListeners(Q,Be)});const C=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Q=this.storage.getItem(C);if(g.newValue!==Q)null!==g.newValue?this.storage.setItem(C,g.newValue):this.storage.removeItem(C);else if(this.localCache[C]===g.newValue&&!E)return}const x=()=>{const Q=this.storage.getItem(C);!E&&this.localCache[C]===Q||this.notifyListeners(C,Q)},$=this.storage.getItem(C);!function ns(){return(0,k.w1)()&&10===document.documentMode}()||$===g.newValue||g.newValue===g.oldValue?x():setTimeout(x,10)}notifyListeners(g,E){this.localCache[g]=E;const C=this.listeners[g];if(C)for(const x of Array.from(C))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var C=()=>super._set,x=this;return(0,y.Z)(function*(){yield C().call(x,g,E),x.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,C=this;return(0,y.Z)(function*(){const x=yield E().call(C,g);return C.localCache[g]=JSON.stringify(x),x})()}_remove(g){var E=()=>super._remove,C=this;return(0,y.Z)(function*(){yield E().call(C,g),delete C.localCache[g]})()}}return v.type="LOCAL",v})(),ai=(()=>{class v extends xp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return v.type="SESSION",v})();let ed=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(x=>x.isListeningto(g));if(E)return E;const C=new v(g);return this.receivers.push(C),C}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,y.Z)(function*(){const C=g,{eventId:x,eventType:$,data:Q}=C.data,Pe=E.handlersMap[$];if(!Pe?.size)return;C.ports[0].postMessage({status:"ack",eventId:x,eventType:$});const Be=Array.from(Pe).map(function(){var nt=(0,y.Z)(function*(yn){return yn(C.origin,Q)});return function(yn){return nt.apply(this,arguments)}}()),rt=yield function kp(v){return Promise.all(v.map(function(){var h=(0,y.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return h.apply(this,arguments)}}()))}(Be);C.ports[0].postMessage({status:"done",eventId:x,eventType:$,response:rt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ec(v="",h=10){let g="";for(let E=0;E<h;E++)g+=Math.floor(10*Math.random());return v+g}class Rm{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,E=50){var C=this;return(0,y.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let $,Q;return new Promise((Pe,Be)=>{const rt=Ec("",20);x.port1.start();const nt=setTimeout(()=>{Be(new Error("unsupported_event"))},E);Q={messageChannel:x,onMessage(yn){const Di=yn;if(Di.data.eventId===rt)switch(Di.data.status){case"ack":clearTimeout(nt),$=setTimeout(()=>{Be(new Error("timeout"))},3e3);break;case"done":clearTimeout($),Pe(Di.data.response);break;default:clearTimeout(nt),clearTimeout($),Be(new Error("invalid_response"))}}},C.handlers.add(Q),x.port1.addEventListener("message",Q.onMessage),C.target.postMessage({eventType:h,eventId:rt,data:g},[x.port2])}).finally(()=>{Q&&C.removeMessageHandler(Q)})})()}}function _n(){return window}function Tt(){return typeof _n().WorkerGlobalScope<"u"&&"function"==typeof _n().importScripts}function xh(){return(xh=(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ph="firebaseLocalStorageDb",os="firebaseLocalStorage",Ic="fbase_key";class Dc{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Tc(v,h){return v.transaction([os],h?"readwrite":"readonly").objectStore(os)}function td(){const v=indexedDB.open(Ph,1);return new Promise((h,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(os,{keyPath:Ic})}catch(C){g(C)}}),v.addEventListener("success",(0,y.Z)(function*(){const E=v.result;E.objectStoreNames.contains(os)?h(E):(E.close(),yield function xm(){const v=indexedDB.deleteDatabase(Ph);return new Dc(v).toPromise()}(),h(yield td()))}))})}function be(v,h,g){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,y.Z)(function*(v,h,g){const E=Tc(v,!0).put({[Ic]:h,value:g});return new Dc(E).toPromise()})).apply(this,arguments)}function bc(){return(bc=(0,y.Z)(function*(v,h){const g=Tc(v,!1).get(h),E=yield new Dc(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Er(v,h){const g=Tc(v,!0).delete(h);return new Dc(g).toPromise()}const Lo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,y.Z)(function*(){return g.db||(g.db=yield td()),g.db})()}_withRetries(g){var E=this;return(0,y.Z)(function*(){let C=0;for(;;)try{const x=yield E._openDb();return yield g(x)}catch(x){if(C++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,y.Z)(function*(){return Tt()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,y.Z)(function*(){g.receiver=ed._getInstance(function _r(){return Tt()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,y.Z)(function*(C,x){return{keyProcessed:(yield g._poll()).includes(x.key)}});return function(C,x){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,y.Z)(function*(C,x){return["keyChanged"]});return function(C,x){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,y.Z)(function*(){var E,C;if(g.activeServiceWorker=yield function Nh(){return xh.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Rm(g.activeServiceWorker);const x=yield g.sender._send("ping",{},800);x&&null!==(E=x[0])&&void 0!==E&&E.fulfilled&&null!==(C=x[0])&&void 0!==C&&C.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,y.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function wc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const g=yield td();return yield be(g,kr,"1"),yield Er(g,kr),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,y.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var C=this;return(0,y.Z)(function*(){return C._withPendingWrite((0,y.Z)(function*(){return yield C._withRetries(x=>be(x,g,E)),C.localCache[g]=E,C.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,y.Z)(function*(){const C=yield E._withRetries(x=>function Ki(v,h){return bc.apply(this,arguments)}(x,g));return E.localCache[g]=C,C})()}_remove(g){var E=this;return(0,y.Z)(function*(){return E._withPendingWrite((0,y.Z)(function*(){return yield E._withRetries(C=>Er(C,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,y.Z)(function*(){const E=yield g._withRetries($=>{const Q=Tc($,!1).getAll();return new Dc(Q).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const C=[],x=new Set;for(const{fbase_key:$,value:Q}of E)x.add($),JSON.stringify(g.localCache[$])!==JSON.stringify(Q)&&(g.notifyListeners($,Q),C.push($));for(const $ of Object.keys(g.localCache))g.localCache[$]&&!x.has($)&&(g.notifyListeners($,null),C.push($));return C})()}notifyListeners(g,E){this.localCache[g]=E;const C=this.listeners[g];if(C)for(const x of Array.from(C))x(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),wi=1e12;class Oh{constructor(h){this.auth=h,this.counter=wi,this._widgets=new Map}render(h,g){const E=this.counter;return this._widgets.set(E,new Fo(h,this.auth.name,g||{})),this.counter++,E}reset(h){var g;const E=h||wi;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(h){var g;return(null===(g=this._widgets.get(h||wi))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,y.Z)(function*(){var E;return null===(E=g._widgets.get(h||wi))||void 0===E||E.execute(),""})()}}class Fo{constructor(h,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof h?document.getElementById(h):h;oe(C,"argument-error",{appName:g}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function to(v){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const kh=rs("rcb"),Lh=new Es(3e4,6e4);class Pm{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=_n().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return oe(function Ac(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&kt(_n().grecaptcha)?Promise.resolve(_n().grecaptcha):new Promise((E,C)=>{const x=_n().setTimeout(()=>{C(ee(h,"network-request-failed"))},Lh.get());_n()[kh]=()=>{_n().clearTimeout(x),delete _n()[kh];const Q=_n().grecaptcha;if(!Q||!kt(Q))return void C(ee(h,"internal-error"));const Pe=Q.render;Q.render=(Be,rt)=>{const nt=Pe(Be,rt);return this.counter++,nt},this.hostLanguage=g,E(Q)},Nr(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:kh,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(x),C(ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=_n().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Fh{load(h){return(0,y.Z)(function*(){return new Oh(h)})()}clearedOneInstance(){}}const Mc="recaptcha",Uh={theme:"light",type:"image"};class Vh{constructor(h,g=Object.assign({},Uh),E){this.parameters=g,this.type=Mc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jn(E),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof h?document.getElementById(h):h;oe(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fh:new Pm,this.validateStartingState()}verify(){var h=this;return(0,y.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(g)||new Promise(x=>{const $=Q=>{Q&&(h.tokenChangeListeners.delete($),x(Q))};h.tokenChangeListeners.add($),h.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof h)h(g);else if("string"==typeof h){const E=_n()[h];"function"==typeof E&&E(g)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,y.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,y.Z)(function*(){oe(Jr()&&!Tt(),h.auth,"internal-error"),yield function Fp(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function te(v){return Ne.apply(this,arguments)}(h.auth);oe(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Uo{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Pr._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function gn(){return(gn=(0,y.Z)(function*(v,h,g){const E=Jn(v),C=yield no(E,h,(0,k.m9)(g));return new Uo(C,x=>Vl(E,x))})).apply(this,arguments)}function Vn(){return(Vn=(0,y.Z)(function*(v,h,g){const E=(0,k.m9)(v);yield ga(!1,E,"phone");const C=yield no(E.auth,h,(0,k.m9)(g));return new Uo(C,x=>bm(E,x))})).apply(this,arguments)}function Rc(){return(Rc=(0,y.Z)(function*(v,h,g){const E=(0,k.m9)(v),C=yield no(E.auth,h,(0,k.m9)(g));return new Uo(C,x=>Sm(E,x))})).apply(this,arguments)}function no(v,h,g){return cr.apply(this,arguments)}function cr(){return cr=(0,y.Z)(function*(v,h,g){var E;const C=yield g.verify();try{let x;if(oe("string"==typeof C,v,"argument-error"),oe(g.type===Mc,v,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const $=x.session;if("phoneNumber"in x)return oe("enroll"===$.type,v,"internal-error"),(yield function bu(v,h){return Ce(v,"POST","/v2/accounts/mfaEnrollment:start",Ie(v,h))}(v,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{oe("signin"===$.type,v,"internal-error");const Q=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return oe(Q,v,"missing-multi-factor-info"),(yield function nd(v,h){return Ce(v,"POST","/v2/accounts/mfaSignIn:start",Ie(v,h))}(v,{mfaPendingCredential:$.credential,mfaEnrollmentId:Q,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield function Sn(v,h){return Kr.apply(this,arguments)}(v,{phoneNumber:x.phoneNumber,recaptchaToken:C});return $}}finally{g._reset()}}),cr.apply(this,arguments)}function hn(){return(hn=(0,y.Z)(function*(v,h){yield ii((0,k.m9)(v),h)})).apply(this,arguments)}let wr=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Jn(g)}verifyPhoneNumber(g,E){return no(this.auth,g,(0,k.m9)(E))}static credential(g,E){return Pr._fromVerification(g,E)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:C}=g;return E&&C?Pr._fromTokenResponse(E,C):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ns(v,h){return h?Yn(h):(oe(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class St extends Do{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ni(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Ni(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Ni(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Bh(v){return Ul(v.auth,new St(v),v.bypassAuthState)}function Ia(v){const{auth:h,user:g}=v;return oe(g,h,"internal-error"),Tm(g,new St(v),v.bypassAuthState)}function Su(v){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,y.Z)(function*(v){const{auth:h,user:g}=v;return oe(g,h,"internal-error"),ii(g,new St(v),v.bypassAuthState)})).apply(this,arguments)}class er{constructor(h,g,E,C,x=!1){this.auth=h,this.resolver=E,this.user=C,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,y.Z)(function*(E,C){h.pendingPromise={resolve:E,reject:C};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(E,C){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,y.Z)(function*(){const{urlResponse:E,sessionId:C,postBody:x,tenantId:$,error:Q,type:Pe}=h;if(Q)return void g.reject(Q);const Be={auth:g.auth,requestUri:E,sessionId:C,tenantId:$||void 0,postBody:x||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Pe)(Be))}catch(rt){g.reject(rt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Bh;case"linkViaPopup":case"linkViaRedirect":return Su;case"reauthViaPopup":case"reauthViaRedirect":return Ia;default:ve(this.auth,"internal-error")}}resolve(h){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xs=new Es(2e3,1e4);function me(){return(me=(0,y.Z)(function*(v,h,g){const E=Jn(v);ke(v,h,gr);const C=Ns(E,g);return new id(E,"signInViaPopup",h,C).executeNotNull()})).apply(this,arguments)}function ro(){return(ro=(0,y.Z)(function*(v,h,g){const E=(0,k.m9)(v);ke(E.auth,h,gr);const C=Ns(E.auth,g);return new id(E.auth,"reauthViaPopup",h,C,E).executeNotNull()})).apply(this,arguments)}function Qt(){return(Qt=(0,y.Z)(function*(v,h,g){const E=(0,k.m9)(v);ke(E.auth,h,gr);const C=Ns(E.auth,g);return new id(E.auth,"linkViaPopup",h,C,E).executeNotNull()})).apply(this,arguments)}let id=(()=>{class v extends er{constructor(g,E,C,x,$){super(g,E,x,$),this.provider=C,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,y.Z)(function*(){const E=yield g.execute();return oe(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,y.Z)(function*(){Ht(1===g.filter.length,"Popup operations only handle one event");const E=Ec();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(C=>{g.reject(C)}),g.resolver._isIframeWebStorageSupported(g.auth,C=>{C||g.reject(ee(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,C;this.pollId=null!==(C=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==C&&C.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,xs.get())};g()}}return v.currentPopupAction=null,v})();const Ir="pendingRedirect",He=new Map;class jh extends er{constructor(h,g,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,y.Z)(function*(){let E=He.get(g.auth._key());if(!E){try{const x=(yield function Mt(v,h){return Vo.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;E=()=>Promise.resolve(x)}catch(C){E=()=>Promise.reject(C)}He.set(g.auth._key(),E)}return g.bypassAuthState||He.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,E=this;return(0,y.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(E,h);if("unknown"!==h.type){if(h.eventId){const C=yield E.auth._redirectUserForId(h.eventId);if(C)return E.user=C,g().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Vo(){return(Vo=(0,y.Z)(function*(v,h){const g=Au(h),E=Om(v);if(!(yield E._isAvailable()))return!1;const C="true"===(yield E._get(g));return yield E._remove(g),C})).apply(this,arguments)}function Cu(v,h){return $h.apply(this,arguments)}function $h(){return($h=(0,y.Z)(function*(v,h){return Om(v)._set(Au(h),"true")})).apply(this,arguments)}function zh(v,h){He.set(v._key(),h)}function Om(v){return Yn(v._redirectPersistence)}function Au(v){return j(Ir,v.config.apiKey,v.name)}function Gn(v,h,g){return function Nc(v,h,g){return Mn.apply(this,arguments)}(v,h,g)}function Mn(){return(Mn=(0,y.Z)(function*(v,h,g){const E=Jn(v);ke(v,h,gr),yield E._initializationPromise;const C=Ns(E,g);return yield Cu(C,E),C._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function us(v,h,g){return function xc(v,h,g){return sd.apply(this,arguments)}(v,h,g)}function sd(){return(sd=(0,y.Z)(function*(v,h,g){const E=(0,k.m9)(v);ke(E.auth,h,gr),yield E.auth._initializationPromise;const C=Ns(E.auth,g);yield Cu(C,E.auth);const x=yield jo(E);return C._openRedirect(E.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function Pc(v,h,g){return function Gh(v,h,g){return Dr.apply(this,arguments)}(v,h,g)}function Dr(){return(Dr=(0,y.Z)(function*(v,h,g){const E=(0,k.m9)(v);ke(E.auth,h,gr),yield E.auth._initializationPromise;const C=Ns(E.auth,g);yield ga(!1,E,h.providerId),yield Cu(C,E.auth);const x=yield jo(E);return C._openRedirect(E.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function Bo(){return(Bo=(0,y.Z)(function*(v,h){return yield Jn(v)._initializationPromise,ls(v,h,!1)})).apply(this,arguments)}function ls(v,h){return ci.apply(this,arguments)}function ci(){return(ci=(0,y.Z)(function*(v,h,g=!1){const E=Jn(v),C=Ns(E,h),$=yield new jh(E,C,g).execute();return $&&!g&&(delete $.user._redirectEventId,yield E._persistUserIfCurrent($.user),yield E._setRedirectUser(null,h)),$})).apply(this,arguments)}function jo(v){return so.apply(this,arguments)}function so(){return(so=(0,y.Z)(function*(v){const h=Ec(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class Ps{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(g=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ru(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $o(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var E;if(h.error&&!$o(h)){const C=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(ee(this.auth,C))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const E=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ta(h))}saveEventToCache(h){this.cachedEventUids.add(Ta(h)),this.lastProcessedEventTime=Date.now()}}function Ta(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function $o({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===h?.code}function qh(v){return od.apply(this,arguments)}function od(){return(od=(0,y.Z)(function*(v,h={}){return Ce(v,"GET","/v1/projects",h)})).apply(this,arguments)}const Nu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Os=/^https?/;function Zi(){return(Zi=(0,y.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield qh(v);for(const g of h)try{if(xu(g))return}catch{}ve(v,"unauthorized-domain")})).apply(this,arguments)}function xu(v){const h=Ar(),{protocol:g,hostname:E}=new URL(h);if(v.startsWith("chrome-extension://")){const $=new URL(v);return""===$.hostname&&""===E?"chrome-extension:"===g&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&$.hostname===E}if(!Os.test(g))return!1;if(Nu.test(v))return E===v;const C=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(E)}const ba=new Es(3e4,6e4);function Wh(){const v=_n().___jsl;if(v?.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Oc=null;const Kh=new Es(5e3,15e3),km="__/auth/iframe",Sa="emulator/auth/iframe",Pu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ca=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Aa(v){const h=v.config;oe(h.authDomain,v,"auth-domain-config-required");const g=h.emulator?ae(h,Sa):`https://${v.config.authDomain}/${km}`,E={apiKey:h.apiKey,appName:v.name,v:J.SDK_VERSION},C=Ca.get(v.config.apiHost);C&&(E.eid=C);const x=v._getFrameworks();return x.length&&(E.fw=x.join(",")),`${g}?${(0,k.xO)(E).slice(1)}`}function b(){return b=(0,y.Z)(function*(v){const h=yield function Pi(v){return Oc=Oc||function En(v){return new Promise((h,g)=>{var E,C,x;function $(){Wh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Wh(),g(ee(v,"network-request-failed"))},timeout:ba.get()})}if(null!==(C=null===(E=_n().gapi)||void 0===E?void 0:E.iframes)&&void 0!==C&&C.Iframe)h(gapi.iframes.getContext());else{if(null===(x=_n().gapi)||void 0===x||!x.load){const Q=rs("iframefcb");return _n()[Q]=()=>{gapi.load?$():g(ee(v,"network-request-failed"))},Nr(`https://apis.google.com/js/api.js?onload=${Q}`).catch(Pe=>g(Pe))}$()}}).catch(h=>{throw Oc=null,h})}(v),Oc}(v),g=_n().gapi;return oe(g,v,"internal-error"),h.open({where:document.body,url:Aa(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pu,dontclear:!0},E=>new Promise(function(){var C=(0,y.Z)(function*(x,$){yield E.restyle({setHideOnLeave:!1});const Q=ee(v,"network-request-failed"),Pe=_n().setTimeout(()=>{$(Q)},Kh.get());function Be(){_n().clearTimeout(Pe),x(E)}E.ping(Be).then(Be,()=>{$(Q)})});return function(x,$){return C.apply(this,arguments)}}()))}),b.apply(this,arguments)}const M={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class We{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Rt="__/auth/handler",Pt="emulator/auth/handler",lr=encodeURIComponent("fac");function tr(v,h,g,E,C,x){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,y.Z)(function*(v,h,g,E,C,x){oe(v.config.authDomain,v,"auth-domain-config-required"),oe(v.config.apiKey,v,"invalid-api-key");const $={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:E,v:J.SDK_VERSION,eventId:C};if(h instanceof gr){h.setDefaultLanguage(v.languageCode),$.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||($.customParameters=JSON.stringify(h.getCustomParameters()));for(const[rt,nt]of Object.entries(x||{}))$[rt]=nt}if(h instanceof bs){const rt=h.getScopes().filter(nt=>""!==nt);rt.length>0&&($.scopes=rt.join(","))}v.tenantId&&($.tid=v.tenantId);const Q=$;for(const rt of Object.keys(Q))void 0===Q[rt]&&delete Q[rt];const Pe=yield v._getAppCheckToken(),Be=Pe?`#${lr}=${encodeURIComponent(Pe)}`:"";return`${function kn({config:v}){return v.emulator?ae(v,Pt):`https://${v.authDomain}/${Rt}`}(v)}?${(0,k.xO)(Q).slice(1)}${Be}`})).apply(this,arguments)}const ks="webStorageSupport",mn=class Vr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ai,this._completeRedirectFn=ls,this._overrideRedirectResult=zh}_openPopup(h,g,E,C){var x=this;return(0,y.Z)(function*(){var $;Ht(null===($=x.eventManagers[h._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const Q=yield tr(h,g,E,Ar(),C);return function je(v,h,g,E=500,C=600){const x=Math.max((window.screen.availHeight-C)/2,0).toString(),$=Math.max((window.screen.availWidth-E)/2,0).toString();let Q="";const Pe=Object.assign(Object.assign({},M),{width:E.toString(),height:C.toString(),top:x,left:$}),Be=(0,k.z$)().toLowerCase();g&&(Q=Xe(Be)?"_blank":g),we(Be)&&(h=h||"http://localhost",Pe.scrollbars="yes");const rt=Object.entries(Pe).reduce((yn,[Di,ju])=>`${yn}${Di}=${ju},`,"");if(function or(v=(0,k.z$)()){var h;return Un(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Be)&&"_self"!==Q)return function ct(v,h){const g=document.createElement("a");g.href=v,g.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(h||"",Q),new We(null);const nt=window.open(h||"",Q,rt);oe(nt,v,"popup-blocked");try{nt.focus()}catch{}return new We(nt)}(h,Q,Ec())})()}_openRedirect(h,g,E,C){var x=this;return(0,y.Z)(function*(){return yield x._originValidation(h),function Nm(v){_n().location.href=v}(yield tr(h,g,E,Ar(),C)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:C,promise:x}=this.eventManagers[g];return C?Promise.resolve(C):(Ht(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(h);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(h){var g=this;return(0,y.Z)(function*(){const E=yield function D(v){return b.apply(this,arguments)}(h),C=new Ps(h);return E.register("authEvent",x=>(oe(x?.authEvent,h,"invalid-auth-event"),{status:C.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:C},g.iframes[h._key()]=E,C})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(ks,{type:ks},C=>{var x;const $=null===(x=C?.[0])||void 0===x?void 0:x[ks];void 0!==$&&g(!!$),ve(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ad(v){return Zi.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Is()||se()||Un()}};class ln{constructor(h){this.factorId=h}_process(h,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,E);case"signin":return this._finalizeSignIn(h,g.credential);default:return _t("unexpected MultiFactorSessionType")}}}class Ls extends ln{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ls(h)}_finalizeEnroll(h,g,E){return function Np(v,h){return Ce(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ie(v,h))}(h,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Lp(v,h){return Ce(v,"POST","/v2/accounts/mfaSignIn:finalize",Ie(v,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Zh=(()=>{class v{constructor(){}static assertion(g){return Ls._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var Fm="@firebase/auth";class Yi{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,y.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(E=>{h(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ho(){return window}(0,k.Pz)("authIdTokenMaxAge"),function oo(v){(0,J._registerComponent)(new ge.wA("auth",(h,{options:g})=>{const E=h.getProvider("app").getImmediate(),C=h.getProvider("heartbeat"),x=h.getProvider("app-check-internal"),{apiKey:$,authDomain:Q}=E.options;oe($&&!$.includes(":"),"invalid-api-key",{appName:E.name});const Pe={apiKey:$,authDomain:Q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ce(v)},Be=new Nl(E,C,x,Pe);return function _p(v,h){const g=h?.persistence||[],E=(Array.isArray(g)?g:[g]).map(Yn);h?.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(E,h?.popupRedirectResolver)}(Be,g),Be},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,E)=>{h.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new ge.wA("auth-internal",h=>{const g=Jn(h.getProvider("auth").getImmediate());return new Yi(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(Fm,"0.23.2",function ku(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,J.registerVersion)(Fm,"0.23.2","esm2017")}("Browser");function zo(){return zo=(0,y.Z)(function*(v,h,g){var E;const{BuildInfo:C}=Ho();Ht(h.sessionId,"AuthEvent did not contain a session ID");const x=yield function Lu(v){return ld.apply(this,arguments)}(h.sessionId),$={};return Un()?$.ibi=C.packageName:It()?$.apn=C.packageName:ve(v,"operation-not-supported-in-this-environment"),C.displayName&&($.appDisplayName=C.displayName),$.sessionId=x,tr(v,g,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,$)}),zo.apply(this,arguments)}function Xh(){return(Xh=(0,y.Z)(function*(v){const{BuildInfo:h}=Ho(),g={};Un()?g.iosBundleId=h.packageName:It()?g.androidPackageName=h.packageName:ve(v,"operation-not-supported-in-this-environment"),yield qh(v,g)})).apply(this,arguments)}function kc(){return(kc=(0,y.Z)(function*(v,h,g){const{cordova:E}=Ho();let C=()=>{};try{yield new Promise((x,$)=>{let Q=null;function Pe(){var nt;x();const yn=null===(nt=E.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof yn&&yn(),"function"==typeof g?.close&&g.close()}function Be(){Q||(Q=window.setTimeout(()=>{$(ee(v,"redirect-cancelled-by-user"))},2e3))}function rt(){"visible"===document?.visibilityState&&Be()}h.addPassiveListener(Pe),document.addEventListener("resume",Be,!1),It()&&document.addEventListener("visibilitychange",rt,!1),C=()=>{h.removePassiveListener(Pe),document.removeEventListener("resume",Be,!1),document.removeEventListener("visibilitychange",rt,!1),Q&&window.clearTimeout(Q)}})}finally{C()}})).apply(this,arguments)}function ld(){return(ld=(0,y.Z)(function*(v){const h=function ef(v){if(Ht(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),g=new Uint8Array(h);for(let E=0;E<v.length;E++)g[E]=v.charCodeAt(E);return g}(v),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class $m extends Ps{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,y.Z)(function*(){yield h.initPromise})()}}function ao(v){return nf.apply(this,arguments)}function nf(){return(nf=(0,y.Z)(function*(v){const h=yield Uu()._get(dd(v));return h&&(yield Uu()._remove(dd(v))),h})).apply(this,arguments)}function Bp(){const v=[];for(let g=0;g<20;g++){const E=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return v.join("")}function Uu(){return Yn(Ea)}function dd(v){return j("authEvent",v.config.apiKey,v.name)}function hd(v){if(!v?.includes("?"))return{};const[h,...g]=v.split("?");return(0,k.zd)(g.join("?"))}const $p=class Lc{constructor(){this._redirectPersistence=ai,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ls,this._overrideRedirectResult=zh}_initialize(h){var g=this;return(0,y.Z)(function*(){const E=h._key();let C=g.eventManagers.get(E);return C||(C=new $m(h),g.eventManagers.set(E,C),g.attachCallbackListeners(h,C)),C})()}_openPopup(h){ve(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,E,C){var x=this;return(0,y.Z)(function*(){!function D_(v){var h,g,E,C,x,$,Q,Pe,Be,rt;const nt=Ho();oe("function"==typeof(null===(h=nt?.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof(null===(g=nt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===(x=null===(C=null===(E=nt?.cordova)||void 0===E?void 0:E.plugins)||void 0===C?void 0:C.browsertab)||void 0===x?void 0:x.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(Pe=null===(Q=null===($=nt?.cordova)||void 0===$?void 0:$.plugins)||void 0===Q?void 0:Q.browsertab)||void 0===Pe?void 0:Pe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(rt=null===(Be=nt?.cordova)||void 0===Be?void 0:Be.InAppBrowser)||void 0===rt?void 0:rt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const $=yield x._initialize(h);yield $.initialized(),$.resetRedirect(),function Hh(){He.clear()}(),yield x._originValidation(h);const Q=function tf(v,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:Bp(),postBody:null,tenantId:v.tenantId,error:ee(v,"no-auth-event")}}(h,E,C);yield function Fu(v,h){return Uu()._set(dd(v),h)}(h,Q);const Pe=yield function I_(v,h,g){return zo.apply(this,arguments)}(h,Q,g),Be=yield function cd(v){const{cordova:h}=Ho();return new Promise(g=>{h.plugins.browsertab.isAvailable(E=>{let C=null;E?h.plugins.browsertab.openUrl(v):C=h.InAppBrowser.open(v,function Kt(v=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(C)})})}(Pe);return function Jh(v,h,g){return kc.apply(this,arguments)}(h,$,Be)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ud(v){return Xh.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:E,handleOpenURL:C,BuildInfo:x}=Ho(),$=setTimeout((0,y.Z)(function*(){yield ao(h),g.onEvent(pd())}),500),Q=function(){var rt=(0,y.Z)(function*(nt){clearTimeout($);const yn=yield ao(h);let Di=null;yn&&nt?.url&&(Di=function Oi(v,h){var g,E;const C=function jp(v){const h=hd(v),g=h.link?decodeURIComponent(h.link):void 0,E=hd(g).link,C=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return hd(C).link||C||E||g||v}(h);if(C.includes("/__/auth/callback")){const x=hd(C),$=x.firebaseError?function Hm(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,Q=null===(E=null===(g=$?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Pe=Q?ee(Q):null;return Pe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:C,postBody:null}}return null}(yn,nt.url)),g.onEvent(Di||pd())});return function(yn){return rt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Q);const Pe=C,Be=`${x.packageName.toLowerCase()}://`;Ho().handleOpenURL=function(){var rt=(0,y.Z)(function*(nt){if(nt.toLowerCase().startsWith(Be)&&Q({url:nt}),"function"==typeof Pe)try{Pe(nt)}catch(yn){console.error(yn)}});return function(nt){return rt.apply(this,arguments)}}()}};function pd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ee("no-auth-event")}}function md(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function sf(v=(0,k.z$)()){return!("file:"!==md()&&"ionic:"!==md()&&"capacitor:"!==md()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function S_(){try{const v=self.localStorage,h=Ec();if(v)return v.setItem(h,"1"),v.removeItem(h),!function b_(v=(0,k.z$)()){return function af(){return(0,k.w1)()&&11===document?.documentMode}()||function T_(v=(0,k.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,k.hl)()}catch{return Fc()&&(0,k.hl)()}return!1}function Fc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hp(){return(function yd(){return"http:"===md()||"https:"===md()}()||(0,k.ru)()||sf())&&!function qm(){return(0,k.b$)()||(0,k.UG)()}()&&S_()&&!Fc()}function vd(){return sf()&&typeof document<"u"}function ds(){return(ds=(0,y.Z)(function*(){return!!vd()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const ki={LOCAL:"local",NONE:"none",SESSION:"session"},Uc=oe,xa="persistence";function cf(v){return hs.apply(this,arguments)}function hs(){return(hs=(0,y.Z)(function*(v){yield v._initializationPromise;const h=Pa(),g=j(xa,v.config.apiKey,v.name);h&&h.setItem(g,v._getPersistence())})).apply(this,arguments)}function Pa(){var v;try{return(null===(v=function uf(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const lf=oe;class Go{constructor(){this.browserResolver=Yn(mn),this.cordovaResolver=Yn($p),this.underlyingResolver=null,this._redirectPersistence=ai,this._completeRedirectFn=ls,this._overrideRedirectResult=zh}_initialize(h){var g=this;return(0,y.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,E,C){var x=this;return(0,y.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,g,E,C)})()}_openRedirect(h,g,E,C){var x=this;return(0,y.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,g,E,C)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return vd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return lf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,y.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Na(){return ds.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function Rn(v){return v.unwrap()}function Vu(v){return Wm(v)}function Wm(v){const{_tokenResponse:h}=v instanceof k.ZR?v.customData:v;if(!h)return null;if(!(v instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return wr.credentialFromResult(v);const g=h.providerId;if(!g||g===fe.PASSWORD)return null;let E;switch(g){case fe.GOOGLE:E=xi;break;case fe.FACEBOOK:E=Zs;break;case fe.GITHUB:E=pu;break;case fe.TWITTER:E=pc;break;default:const{oauthIdToken:C,oauthAccessToken:x,oauthTokenSecret:$,pendingToken:Q,nonce:Pe}=h;return x||$||C||Q?Q?g.startsWith("saml.")?Bt._create(g,Q):Et._fromParams({providerId:g,signInMethod:g,pendingToken:Q,idToken:C,accessToken:x}):new Ss(g).credential({idToken:C,accessToken:x,rawNonce:Pe}):null}return v instanceof k.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Ii(v,h){return h.catch(g=>{throw g instanceof k.ZR&&function Ed(v,h){var g;const E=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new C_(v,function Ah(v,h){var g;const E=(0,k.m9)(v),C=h;return oe(h.customData.operationType,E,"argument-error"),oe(null===(g=C.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Po._fromError(E,C)}(v,h));else if(E){const C=Wm(h),x=h;C&&(x.credential=C,x.tenantId=E.tenantId||void 0,x.email=E.email||void 0,x.phoneNumber=E.phoneNumber||void 0)}}(v,g),g}).then(g=>{const C=g.user;return{operationType:g.operationType,credential:Vu(g),additionalUserInfo:Cp(g),user:nr.getOrCreate(C)}})}function df(v,h){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,y.Z)(function*(v,h){const g=yield h;return{verificationId:g.verificationId,confirm:E=>Ii(v,g.confirm(E))}})).apply(this,arguments)}class C_{constructor(h,g){this.resolver=g,this.auth=function _d(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ii(Rn(this.auth),this.resolver.resolveSignIn(h))}}class nr{constructor(h){this._delegate=h,this.multiFactor=function Oo(v){const h=(0,k.m9)(v);return Js.has(h)||Js.set(h,rn._fromUser(h)),Js.get(h)}(h)}static getOrCreate(h){return nr.USER_MAP.has(h)||nr.USER_MAP.set(h,new nr(h)),nr.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,y.Z)(function*(){return Ii(g.auth,bm(g._delegate,h))})()}linkWithPhoneNumber(h,g){var E=this;return(0,y.Z)(function*(){return df(E.auth,function wt(v,h,g){return Vn.apply(this,arguments)}(E._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,y.Z)(function*(){return Ii(g.auth,function io(v,h,g){return Qt.apply(this,arguments)}(g._delegate,h,Go))})()}linkWithRedirect(h){var g=this;return(0,y.Z)(function*(){return yield cf(Jn(g.auth)),Pc(g._delegate,h,Go)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,y.Z)(function*(){return Ii(g.auth,Sm(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return df(this.auth,function Rs(v,h,g){return Rc.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return Ii(this.auth,function as(v,h,g){return ro.apply(this,arguments)}(this._delegate,h,Go))}reauthenticateWithRedirect(h){var g=this;return(0,y.Z)(function*(){return yield cf(Jn(g.auth)),us(g._delegate,h,Go)})()}sendEmailVerification(h){return function Xs(v,h){return Eu.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,y.Z)(function*(){return yield function Co(v,h){return Ei.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Sh(v,h){return Sp((0,k.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function yc(v,h){return Sp((0,k.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function zn(v,h){return hn.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Cm(v,h){return Kl.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function bh(v,h,g){return No.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}nr.USER_MAP=new WeakMap;const Fs=oe;let uo=(()=>{class v{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=g.options;Fs(C,"invalid-api-key",{appName:g.name}),Fs(C,"invalid-api-key",{appName:g.name});const x=typeof window<"u"?Go:void 0;this._delegate=E.initialize({options:{persistence:Zr(C,g.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?nr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function ri(v,h,g){const E=Jn(v);oe(E._canInitEmulator,E,"emulator-config-failed"),oe(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const C=!!g?.disableWarnings,x=la(h),{host:$,port:Q}=function xl(v){const h=la(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(E);if(C){const x=C[1];return{host:x,port:mh(E.substr(x.length+1))}}{const[x,$]=E.split(":");return{host:x,port:mh($)}}}(h);E.config.emulator={url:`${x}//${$}${null===Q?"":`:${Q}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:$,port:Q,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function Im(){function v(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,E)}applyActionCode(g){return function Dh(v,h){return si.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ar(this._delegate,g)}confirmPasswordReset(g,E){return function Ao(v,h,g){return is.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var C=this;return(0,y.Z)(function*(){return Ii(C._delegate,function $l(v,h,g){return yu.apply(this,arguments)}(C._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function _u(v,h){return Ro.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Hl(v,h){const g=Cn.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,y.Z)(function*(){Fs(Hp(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function cs(v,h){return Bo.apply(this,arguments)}(g._delegate,Go);return E?Ii(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function zm(v,h){Jn(v)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,E,C){const{next:x,error:$,complete:Q}=wd(g,E,C);return this._delegate.onAuthStateChanged(x,$,Q)}onIdTokenChanged(g,E,C){const{next:x,error:$,complete:Q}=wd(g,E,C);return this._delegate.onIdTokenChanged(x,$,Q)}sendSignInLinkToEmail(g,E){return function ya(v,h,g){return vu.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function __(v,h,g){return mu.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,y.Z)(function*(){let C;switch(function zp(v,h){Uc(Object.values(ki).includes(h),v,"invalid-persistence-type"),(0,k.b$)()?Uc(h!==ki.SESSION,v,"unsupported-persistence-type"):(0,k.UG)()?Uc(h===ki.NONE,v,"unsupported-persistence-type"):Fc()?Uc(h===ki.NONE||h===ki.LOCAL&&(0,k.hl)(),v,"unsupported-persistence-type"):Uc(h===ki.NONE||S_(),v,"unsupported-persistence-type")}(E._delegate,g),g){case ki.SESSION:C=ai;break;case ki.LOCAL:C=(yield Yn(Lo)._isAvailable())?Lo:Ea;break;case ki.NONE:C=Ai;break;default:return ve("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ii(this._delegate,function Or(v){return Dp.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ii(this._delegate,Vl(this._delegate,g))}signInWithCustomToken(g){return Ii(this._delegate,function Ih(v,h){return Cs.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Ii(this._delegate,function Th(v,h,g){return Vl((0,k.m9)(v),bo.credential(h,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return Ii(this._delegate,function ur(v,h,g){return zl.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return df(this._delegate,function Ms(v,h,g){return gn.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,y.Z)(function*(){return Fs(Hp(),E._delegate,"operation-not-supported-in-this-environment"),Ii(E._delegate,function Da(v,h,g){return me.apply(this,arguments)}(E._delegate,g,Go))})()}signInWithRedirect(g){var E=this;return(0,y.Z)(function*(){return Fs(Hp(),E._delegate,"operation-not-supported-in-this-environment"),yield cf(E._delegate),Gn(E._delegate,g,Go)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function oi(v,h){return As.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=ki,v})();function wd(v,h,g){let E=v;"function"!=typeof v&&({next:E,error:h,complete:g}=v);const C=E;return{next:$=>C($&&nr.getOrCreate($)),error:h,complete:g}}function Zr(v,h){const g=function fs(v,h){const g=Pa();if(!g)return[];const E=j(xa,v,h);switch(g.getItem(E)){case ki.NONE:return[Ai];case ki.LOCAL:return[Lo,ai];case ki.SESSION:return[ai];default:return[]}}(v,h);if(typeof self<"u"&&!g.includes(Lo)&&g.push(Lo),typeof window<"u")for(const E of[Ea,ai])g.includes(E)||g.push(E);return g.includes(Ai)||g.push(Ai),g}class Oa{constructor(){this.providerId="phone",this._delegate=new wr(Rn(X.Z.auth()))}static credential(h,g){return wr.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Oa.PHONE_SIGN_IN_METHOD=wr.PHONE_SIGN_IN_METHOD,Oa.PROVIDER_ID=wr.PROVIDER_ID;const Bu=oe;class Km{constructor(h,g,E=X.Z.app()){var C;Bu(null===(C=E.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Vh(h,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function qp(v){v.INTERNAL.registerComponent(new ge.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new uo(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bo,FacebookAuthProvider:Zs,GithubAuthProvider:pu,GoogleAuthProvider:xi,OAuthProvider:Ss,SAMLAuthProvider:fa,PhoneAuthProvider:Oa,PhoneMultiFactorGenerator:Zh,RecaptchaVerifier:Km,TwitterAuthProvider:pc,Auth:uo,AuthCredential:Do,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(X.Z)},3106:(lt,De,P)=>{P.d(De,{Z:()=>Ze});var y=P(9058),X=P(4537),k=P(534),J=P(7879);class re{constructor(ze,Le){this._delegate=ze,this.firebase=Le,(0,k._addComponent)(ze,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ze){this._delegate.automaticDataCollectionEnabled=ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ze=>{this._delegate.checkDestroyed(),ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ze,Le=k._DEFAULT_ENTRY_NAME){var mt;this._delegate.checkDestroyed();const ht=this._delegate.container.getProvider(ze);return!ht.isInitialized()&&"EXPLICIT"===(null===(mt=ht.getComponent())||void 0===mt?void 0:mt.instantiationMode)&&ht.initialize(),ht.getImmediate({identifier:Le})}_removeServiceInstance(ze,Le=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ze).clearInstance(Le)}_addComponent(ze){(0,k._addComponent)(this._delegate,ze)}_addOrOverwriteComponent(ze){(0,k._addOrOverwriteComponent)(this._delegate,ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function fe(){const xe=function Oe(xe){const ze={},Le={__esModule:!0,initializeApp:function ne(ke,Ge={}){const oe=k.initializeApp(ke,Ge);if((0,y.r3)(ze,oe.name))return ze[oe.name];const _t=new xe(oe,Le);return ze[oe.name]=_t,_t},app:ht,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function ee(ke){const Ge=ke.name,oe=Ge.replace("-compat","");if(k._registerComponent(ke)&&"PUBLIC"===ke.type){const _t=(Ht=ht())=>{if("function"!=typeof Ht[oe])throw ge.create("invalid-app-argument",{appName:Ge});return Ht[oe]()};void 0!==ke.serviceProps&&(0,y.ZB)(_t,ke.serviceProps),Le[oe]=_t,xe.prototype[oe]=function(...Ht){return this._getService.bind(this,Ge).apply(this,ke.multipleInstances?Ht:[])}}return"PUBLIC"===ke.type?Le[oe]:null},removeApp:function mt(ke){delete ze[ke]},useAsService:function Te(ke,Ge){return"serverAuth"===Ge?null:Ge},modularAPIs:k}};function ht(ke){if(!(0,y.r3)(ze,ke=ke||k._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:ke});return ze[ke]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function ve(){return Object.keys(ze).map(ke=>ze[ke])}}),ht.App=xe,Le}(re);return xe.INTERNAL=Object.assign(Object.assign({},xe.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function ze(Le){(0,y.ZB)(xe,Le)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),xe}(),H=new J.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const xe=self.firebase.SDK_VERSION;xe&&xe.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=U;!function Ae(xe){(0,k.registerVersion)("@firebase/app-compat","0.2.13",xe)}()},534:(lt,De,P)=>{P.r(De),P.d(De,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>Eo,_DEFAULT_ENTRY_NAME:()=>pt,_addComponent:()=>Pn,_addOrOverwriteComponent:()=>ei,_apps:()=>Nt,_clearComponents:()=>en,_components:()=>fn,_getProvider:()=>Rr,_registerComponent:()=>on,_removeServiceInstance:()=>su,deleteApp:()=>qi,getApp:()=>Si,getApps:()=>Ws,initializeApp:()=>wo,onLog:()=>ni,registerVersion:()=>fr,setLogLevel:()=>Yn});var y=P(5861),X=P(4537),k=P(7879),J=P(9058);const re=(ce,te)=>te.some(Ne=>ce instanceof Ne);let pe,ge;const U=new WeakMap,H=new WeakMap,Y=new WeakMap,Ve=new WeakMap,Ae=new WeakMap;let ze={get(ce,te,Ne){if(ce instanceof IDBTransaction){if("done"===te)return H.get(ce);if("objectStoreNames"===te)return ce.objectStoreNames||Y.get(ce);if("store"===te)return Ne.objectStoreNames[1]?void 0:Ne.objectStore(Ne.objectStoreNames[0])}return ne(ce[te])},set:(ce,te,Ne)=>(ce[te]=Ne,!0),has:(ce,te)=>ce instanceof IDBTransaction&&("done"===te||"store"===te)||te in ce};function ht(ce){return"function"==typeof ce?function mt(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...te){return ce.apply(ve(this),te),ne(U.get(this))}:function(...te){return ne(ce.apply(ve(this),te))}:function(te,...Ne){const st=ce.call(ve(this),te,...Ne);return Y.set(st,te.sort?te.sort():[te]),ne(st)}}(ce):(ce instanceof IDBTransaction&&function xe(ce){if(H.has(ce))return;const te=new Promise((Ne,st)=>{const qe=()=>{ce.removeEventListener("complete",kt),ce.removeEventListener("error",Jt),ce.removeEventListener("abort",Jt)},kt=()=>{Ne(),qe()},Jt=()=>{st(ce.error||new DOMException("AbortError","AbortError")),qe()};ce.addEventListener("complete",kt),ce.addEventListener("error",Jt),ce.addEventListener("abort",Jt)});H.set(ce,te)}(ce),re(ce,function Oe(){return pe||(pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,ze):ce)}function ne(ce){if(ce instanceof IDBRequest)return function Ze(ce){const te=new Promise((Ne,st)=>{const qe=()=>{ce.removeEventListener("success",kt),ce.removeEventListener("error",Jt)},kt=()=>{Ne(ne(ce.result)),qe()},Jt=()=>{st(ce.error),qe()};ce.addEventListener("success",kt),ce.addEventListener("error",Jt)});return te.then(Ne=>{Ne instanceof IDBCursor&&U.set(Ne,ce)}).catch(()=>{}),Ae.set(te,ce),te}(ce);if(Ve.has(ce))return Ve.get(ce);const te=ht(ce);return te!==ce&&(Ve.set(ce,te),Ae.set(te,ce)),te}const ve=ce=>Ae.get(ce),ke=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],oe=new Map;function _t(ce,te){if(!(ce instanceof IDBDatabase)||te in ce||"string"!=typeof te)return;if(oe.get(te))return oe.get(te);const Ne=te.replace(/FromIndex$/,""),st=te!==Ne,qe=Ge.includes(Ne);if(!(Ne in(st?IDBIndex:IDBObjectStore).prototype)||!qe&&!ke.includes(Ne))return;const kt=function(){var Jt=(0,y.Z)(function*(Qn,...Xn){const Nr=this.transaction(Qn,qe?"readwrite":"readonly");let rs=Nr.store;return st&&(rs=rs.index(Xn.shift())),(yield Promise.all([rs[Ne](...Xn),qe&&Nr.done]))[0]});return function(Xn){return Jt.apply(this,arguments)}}();return oe.set(te,kt),kt}!function Le(ce){ze=ce(ze)}(ce=>({...ce,get:(te,Ne,st)=>_t(te,Ne)||ce.get(te,Ne,st),has:(te,Ne)=>!!_t(te,Ne)||ce.has(te,Ne)}));class Ht{constructor(te){this.container=te}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function Ar(ce){const te=ce.getComponent();return"VERSION"===te?.type}(Ne)){const st=Ne.getImmediate();return`${st.library}/${st.version}`}return null}).filter(Ne=>Ne).join(" ")}}const Jr="@firebase/app",Zn=new k.Yd("@firebase/app"),pt="[DEFAULT]",zt={[Jr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nt=new Map,fn=new Map;function Pn(ce,te){try{ce.container.addComponent(te)}catch(Ne){Zn.debug(`Component ${te.name} failed to register with FirebaseApp ${ce.name}`,Ne)}}function ei(ce,te){ce.container.addOrOverwriteComponent(te)}function on(ce){const te=ce.name;if(fn.has(te))return Zn.debug(`There were multiple attempts to register component ${te}.`),!1;fn.set(te,ce);for(const Ne of Nt.values())Pn(Ne,ce);return!0}function Rr(ce,te){const Ne=ce.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),ce.container.getProvider(te)}function su(ce,te,Ne=pt){Rr(ce,te).clearInstance(Ne)}function en(){fn.clear()}const Gt=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ws{constructor(te,Ne,st){this._isDeleted=!1,this._options=Object.assign({},te),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=st,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this.checkDestroyed(),this._automaticDataCollectionEnabled=te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(te){this._isDeleted=te}checkDestroyed(){if(this.isDeleted)throw Gt.create("app-deleted",{appName:this._name})}}const Eo="9.23.0";function wo(ce,te={}){let Ne=ce;"object"!=typeof te&&(te={name:te});const st=Object.assign({name:pt,automaticDataCollectionEnabled:!1},te),qe=st.name;if("string"!=typeof qe||!qe)throw Gt.create("bad-app-name",{appName:String(qe)});if(Ne||(Ne=(0,J.aH)()),!Ne)throw Gt.create("no-options");const kt=Nt.get(qe);if(kt){if((0,J.vZ)(Ne,kt.options)&&(0,J.vZ)(st,kt.config))return kt;throw Gt.create("duplicate-app",{appName:qe})}const Jt=new X.H0(qe);for(const Xn of fn.values())Jt.addComponent(Xn);const Qn=new ws(Ne,st,Jt);return Nt.set(qe,Qn),Qn}function Si(ce=pt){const te=Nt.get(ce);if(!te&&ce===pt&&(0,J.aH)())return wo();if(!te)throw Gt.create("no-app",{appName:ce});return te}function Ws(){return Array.from(Nt.values())}function qi(ce){return hr.apply(this,arguments)}function hr(){return(hr=(0,y.Z)(function*(ce){const te=ce.name;Nt.has(te)&&(Nt.delete(te),yield Promise.all(ce.container.getProviders().map(Ne=>Ne.delete())),ce.isDeleted=!0)})).apply(this,arguments)}function fr(ce,te,Ne){var st;let qe=null!==(st=zt[ce])&&void 0!==st?st:ce;Ne&&(qe+=`-${Ne}`);const kt=qe.match(/\s|\//),Jt=te.match(/\s|\//);if(kt||Jt){const Qn=[`Unable to register library "${qe}" with version "${te}":`];return kt&&Qn.push(`library name "${qe}" contains illegal characters (whitespace or "/")`),kt&&Jt&&Qn.push("and"),Jt&&Qn.push(`version name "${te}" contains illegal characters (whitespace or "/")`),void Zn.warn(Qn.join(" "))}on(new X.wA(`${qe}-version`,()=>({library:qe,version:te}),"VERSION"))}function ni(ce,te){if(null!==ce&&"function"!=typeof ce)throw Gt.create("invalid-log-argument");(0,k.Am)(ce,te)}function Yn(ce){(0,k.Ub)(ce)}const Ci="firebase-heartbeat-database",Ai=1,j="firebase-heartbeat-store";let V=null;function q(){return V||(V=function ee(ce,te,{blocked:Ne,upgrade:st,blocking:qe,terminated:kt}={}){const Jt=indexedDB.open(ce,te),Qn=ne(Jt);return st&&Jt.addEventListener("upgradeneeded",Xn=>{st(ne(Jt.result),Xn.oldVersion,Xn.newVersion,ne(Jt.transaction),Xn)}),Ne&&Jt.addEventListener("blocked",Xn=>Ne(Xn.oldVersion,Xn.newVersion,Xn)),Qn.then(Xn=>{kt&&Xn.addEventListener("close",()=>kt()),qe&&Xn.addEventListener("versionchange",Nr=>qe(Nr.oldVersion,Nr.newVersion,Nr))}).catch(()=>{}),Qn}(Ci,Ai,{upgrade:(ce,te)=>{0===te&&ce.createObjectStore(j)}}).catch(ce=>{throw Gt.create("idb-open",{originalErrorMessage:ce.message})})),V}function se(){return(se=(0,y.Z)(function*(ce){try{return yield(yield q()).transaction(j).objectStore(j).get(It(ce))}catch(te){if(te instanceof J.ZR)Zn.warn(te.message);else{const Ne=Gt.create("idb-get",{originalErrorMessage:te?.message});Zn.warn(Ne.message)}}})).apply(this,arguments)}function Xe(ce,te){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,y.Z)(function*(ce,te){try{const st=(yield q()).transaction(j,"readwrite");yield st.objectStore(j).put(te,It(ce)),yield st.done}catch(Ne){if(Ne instanceof J.ZR)Zn.warn(Ne.message);else{const st=Gt.create("idb-set",{originalErrorMessage:Ne?.message});Zn.warn(st.message)}}})).apply(this,arguments)}function It(ce){return`${ce.name}!${ce.options.appId}`}class Un{constructor(te){this.container=te,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new ns(Ne),this._heartbeatsCachePromise=this._storage.read().then(st=>(this._heartbeatsCache=st,st))}triggerHeartbeat(){var te=this;return(0,y.Z)(function*(){const st=te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qe=Kt();if(null===te._heartbeatsCache&&(te._heartbeatsCache=yield te._heartbeatsCachePromise),te._heartbeatsCache.lastSentHeartbeatDate!==qe&&!te._heartbeatsCache.heartbeats.some(kt=>kt.date===qe))return te._heartbeatsCache.heartbeats.push({date:qe,agent:st}),te._heartbeatsCache.heartbeats=te._heartbeatsCache.heartbeats.filter(kt=>{const Jt=new Date(kt.date).valueOf();return Date.now()-Jt<=2592e6}),te._storage.overwrite(te._heartbeatsCache)})()}getHeartbeatsHeader(){var te=this;return(0,y.Z)(function*(){if(null===te._heartbeatsCache&&(yield te._heartbeatsCachePromise),null===te._heartbeatsCache||0===te._heartbeatsCache.heartbeats.length)return"";const Ne=Kt(),{heartbeatsToSend:st,unsentEntries:qe}=function or(ce,te=1024){const Ne=[];let st=ce.slice();for(const qe of ce){const kt=Ne.find(Jt=>Jt.agent===qe.agent);if(kt){if(kt.dates.push(qe.date),Is(Ne)>te){kt.dates.pop();break}}else if(Ne.push({agent:qe.agent,dates:[qe.date]}),Is(Ne)>te){Ne.pop();break}st=st.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:st}}(te._heartbeatsCache.heartbeats),kt=(0,J.L)(JSON.stringify({version:2,heartbeats:st}));return te._heartbeatsCache.lastSentHeartbeatDate=Ne,qe.length>0?(te._heartbeatsCache.heartbeats=qe,yield te._storage.overwrite(te._heartbeatsCache)):(te._heartbeatsCache.heartbeats=[],te._storage.overwrite(te._heartbeatsCache)),kt})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class ns{constructor(te){this.app=te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var te=this;return(0,y.Z)(function*(){return(yield te._canUseIndexedDBPromise)&&(yield function we(ce){return se.apply(this,arguments)}(te.app))||{heartbeats:[]}})()}overwrite(te){var Ne=this;return(0,y.Z)(function*(){var st;if(yield Ne._canUseIndexedDBPromise){const kt=yield Ne.read();return Xe(Ne.app,{lastSentHeartbeatDate:null!==(st=te.lastSentHeartbeatDate)&&void 0!==st?st:kt.lastSentHeartbeatDate,heartbeats:te.heartbeats})}})()}add(te){var Ne=this;return(0,y.Z)(function*(){var st;if(yield Ne._canUseIndexedDBPromise){const kt=yield Ne.read();return Xe(Ne.app,{lastSentHeartbeatDate:null!==(st=te.lastSentHeartbeatDate)&&void 0!==st?st:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...te.heartbeats]})}})()}}function Is(ce){return(0,J.L)(JSON.stringify({version:2,heartbeats:ce})).length}!function ou(ce){on(new X.wA("platform-logger",te=>new Ht(te),"PRIVATE")),on(new X.wA("heartbeat",te=>new Un(te),"PRIVATE")),fr(Jr,"0.9.13",ce),fr(Jr,"0.9.13","esm2017"),fr("fire-js","")}("")},4537:(lt,De,P)=>{P.d(De,{H0:()=>Oe,wA:()=>k});var y=P(5861),X=P(9058);class k{constructor(U,H,Y){this.name=U,this.instanceFactory=H,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const J="[DEFAULT]";class re{constructor(U,H){this.name=U,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const H=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(H)){const Y=new X.BH;if(this.instancesDeferred.set(H,Y),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:H});Ve&&Y.resolve(Ve)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(U){var H;const Y=this.normalizeInstanceIdentifier(U?.identifier),Ve=null!==(H=U?.optional)&&void 0!==H&&H;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Ae){if(Ve)return null;throw Ae}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ge(fe){return"EAGER"===fe.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[H,Y]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(H);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ve});Y.resolve(Ae)}catch{}}}}clearInstance(U=J){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,y.Z)(function*(){const H=Array.from(U.instances.values());yield Promise.all([...H.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...H.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=J){return this.instances.has(U)}getOptions(U=J){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:H={}}=U,Y=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:Y,options:H});for(const[Ae,Ze]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Ae)&&Ze.resolve(Ve);return Ve}onInit(U,H){var Y;const Ve=this.normalizeInstanceIdentifier(H),Ae=null!==(Y=this.onInitCallbacks.get(Ve))&&void 0!==Y?Y:new Set;Ae.add(U),this.onInitCallbacks.set(Ve,Ae);const Ze=this.instances.get(Ve);return Ze&&U(Ze,Ve),()=>{Ae.delete(U)}}invokeOnInitCallbacks(U,H){const Y=this.onInitCallbacks.get(H);if(Y)for(const Ve of Y)try{Ve(U,H)}catch{}}getOrInitializeService({instanceIdentifier:U,options:H={}}){let Y=this.instances.get(U);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=U,fe===J?void 0:fe),options:H}),this.instances.set(U,Y),this.instancesOptions.set(U,H),this.invokeOnInitCallbacks(Y,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,Y)}catch{}var fe;return Y||null}normalizeInstanceIdentifier(U=J){return this.component?this.component.multipleInstances?U:J:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const H=this.getProvider(U.name);if(H.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);H.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const H=new re(U,this);return this.providers.set(U,H),H}getProviders(){return Array.from(this.providers.values())}}},7879:(lt,De,P)=>{P.d(De,{Am:()=>fe,Ub:()=>Oe,Yd:()=>ge,in:()=>X});const y=[];var X=function(U){return U[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",U}(X||{});const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},J=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},pe=(U,H,...Y)=>{if(H<U.logLevel)return;const Ve=(new Date).toISOString(),Ae=re[H];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ae](`[${Ve}]  ${U.name}:`,...Y)};class ge{constructor(H){this.name=H,this._logLevel=J,this._logHandler=pe,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in X))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...H),this._logHandler(this,X.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...H),this._logHandler(this,X.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,X.INFO,...H),this._logHandler(this,X.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,X.WARN,...H),this._logHandler(this,X.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...H),this._logHandler(this,X.ERROR,...H)}}function Oe(U){y.forEach(H=>{H.setLogLevel(U)})}function fe(U,H){for(const Y of y){let Ve=null;H&&H.level&&(Ve=k[H.level]),Y.userLogHandler=null===U?null:(Ae,Ze,...xe)=>{const ze=xe.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");Ze>=(Ve??Ae.logLevel)&&U({level:X[Ze].toLowerCase(),message:ze,args:xe,type:Ae.name})}}}},5861:(lt,De,P)=>{function y(k,J,re,pe,ge,Oe,fe){try{var U=k[Oe](fe),H=U.value}catch(Y){return void re(Y)}U.done?J(H):Promise.resolve(H).then(pe,ge)}function X(k){return function(){var J=this,re=arguments;return new Promise(function(pe,ge){var Oe=k.apply(J,re);function fe(H){y(Oe,pe,ge,fe,U,"next",H)}function U(H){y(Oe,pe,ge,fe,U,"throw",H)}fe(void 0)})}}P.d(De,{Z:()=>X})},7582:(lt,De,P)=>{function J(ae,de){var _e={};for(var Ee in ae)Object.prototype.hasOwnProperty.call(ae,Ee)&&de.indexOf(Ee)<0&&(_e[Ee]=ae[Ee]);if(null!=ae&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(Ee=Object.getOwnPropertySymbols(ae);Ie<Ee.length;Ie++)de.indexOf(Ee[Ie])<0&&Object.prototype.propertyIsEnumerable.call(ae,Ee[Ie])&&(_e[Ee[Ie]]=ae[Ee[Ie]])}return _e}function Y(ae,de,_e,Ee){return new(_e||(_e=Promise))(function(Ce,tt){function $e(Xt){try{yt(Ee.next(Xt))}catch(Ot){tt(Ot)}}function $n(Xt){try{yt(Ee.throw(Xt))}catch(Ot){tt(Ot)}}function yt(Xt){Xt.done?Ce(Xt.value):function Ie(Ce){return Ce instanceof _e?Ce:new _e(function(tt){tt(Ce)})}(Xt.value).then($e,$n)}yt((Ee=Ee.apply(ae,de||[])).next())})}function ne(ae){return this instanceof ne?(this.v=ae,this):new ne(ae)}function ve(ae,de,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,Ee=_e.apply(ae,de||[]),Ce=[];return Ie={},tt("next"),tt("throw"),tt("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function tt(Tn){Ee[Tn]&&(Ie[Tn]=function(xn){return new Promise(function(Mr,cn){Ce.push([Tn,xn,Mr,cn])>1||$e(Tn,xn)})})}function $e(Tn,xn){try{!function $n(Tn){Tn.value instanceof ne?Promise.resolve(Tn.value.v).then(yt,Xt):Ot(Ce[0][2],Tn)}(Ee[Tn](xn))}catch(Mr){Ot(Ce[0][3],Mr)}}function yt(Tn){$e("next",Tn)}function Xt(Tn){$e("throw",Tn)}function Ot(Tn,xn){Tn(xn),Ce.shift(),Ce.length&&$e(Ce[0][0],Ce[0][1])}}function Te(ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,de=ae[Symbol.asyncIterator];return de?de.call(ae):(ae=function xe(ae){var de="function"==typeof Symbol&&Symbol.iterator,_e=de&&ae[de],Ee=0;if(_e)return _e.call(ae);if(ae&&"number"==typeof ae.length)return{next:function(){return ae&&Ee>=ae.length&&(ae=void 0),{value:ae&&ae[Ee++],done:!ae}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(ae),_e={},Ee("next"),Ee("throw"),Ee("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function Ee(Ce){_e[Ce]=ae[Ce]&&function(tt){return new Promise(function($e,$n){!function Ie(Ce,tt,$e,$n){Promise.resolve($n).then(function(yt){Ce({value:yt,done:$e})},tt)}($e,$n,(tt=ae[Ce](tt)).done,tt.value)})}}}P.d(De,{FC:()=>ve,KL:()=>Te,_T:()=>J,mG:()=>Y,qq:()=>ne}),"function"==typeof SuppressedError&&SuppressedError}},lt=>{lt(lt.s=9104)}]);